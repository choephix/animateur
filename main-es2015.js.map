{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.html","./src/app/components/animation-bar.component.html","./src/app/components/explorer.component.html","./src/app/components/statusbar.component.html","./src/app/components/toolbar.component.html","./src/app/components/viewport.component.html","./node_modules/tslib/tslib.es6.js","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/common/tab.component.ts","./src/app/common/tabs.component.ts","./src/app/components/animation-bar.component.css","./src/app/components/animation-bar.component.ts","./src/app/components/explorer.component.ts","./src/app/components/statusbar.component.ts","./src/app/components/toolbar.component.ts","./src/app/components/viewport.component.ts","./src/app/services/exportor.service.ts","./src/app/services/loador.service.ts","./src/app/services/main.service.ts","./src/app/services/scener.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"<main id=\\\"pageMain\\\">\\n  <div class=\\\"panes\\\">\\n    <app-toolbar id=\\\"panel-toolbar\\\" class=\\\"toolbar-vertical\\\"></app-toolbar>\\n    <app-explorer class=\\\"pane\\\" *ngIf=\\\"!! context.viewMode && context.characters.length\\\">\\n      \\n    </app-explorer>\\n    <div class=\\\"middle-pane\\\">\\n      <app-viewport id=\\\"viewport\\\"></app-viewport>\\n      <app-animation-bar id=\\\"animation-bar\\\" class=\\\"bar-horizontal\\\" *ngIf=\\\"context.characters.length\\\"\\n                         [hidden]=\\\"!context.character||!context.character.currentAction\\\"></app-animation-bar>\\n    </div>\\n  </div>\\n  <!-- <app-statusbar></app-statusbar> -->\\n</main>\"","export default \"\\n\\n<div class=\\\"buttons-bar\\\">\\n  <button class=\\\"button-play\\\" (click)=\\\"togglePause()\\\"></button>\\n  <!-- <button (click)=\\\"addEvent()\\\">Add Event Yo!</button> -->\\n  <!-- <div class=\\\"filler\\\"><span class=\\\"timer\\\"></span></div> -->\\n</div>\\n<div class=\\\"sliders\\\">\\n  <br/>\\n  <nouislider id=\\\"slider-events\\\" [config]=\\\"sliderConfig.events\\\" #SliderEvents\\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.events\\\"\\n              (slide)=\\\"handlers.change_events($event)\\\"\\n              [hidden]=\\\"!action.hasEvents\\\"\\n              ></nouislider>\\n  <nouislider id=\\\"slider-weight\\\" [config]=\\\"sliderConfig.weight\\\"\\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.weight\\\"\\n              ></nouislider>\\n  <nouislider id=\\\"slider-play\\\"   [config]=\\\"sliderConfig.play\\\"   \\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.time\\\"\\n              (slide)=\\\"handlers.change_play($event)\\\"\\n              ></nouislider>\\n  <br/>\\n</div>\"","export default \"<!-- CHARACTERS -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'characters'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>Current Characters</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let c of context.characters\\\" attr.uuid=\\\"{{c.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.character === c\\\"\\n      (click)=\\\"main.focusOnCharacter( c )\\\">{{c.name}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- OVERVIEW -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'overview'\\\">\\n  <div id=\\\"subpanel-properties\\\" class=\\\"subpanel\\\">\\n    <header><h3>Selection</h3></header>\\n    <div class=\\\"contents\\\">\\n      <br />\\n      <input id=\\\"field-name\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.name\\\"/>\\n      <div class=\\\"i-vector-row position\\\">\\n        <input id=\\\"field-position-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.x\\\" />\\n        <input id=\\\"field-position-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.y\\\" />\\n        <input id=\\\"field-position-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.z\\\" />\\n      </div>\\n      <div class=\\\"i-vector-row rotation\\\">\\n        <input id=\\\"field-rotation-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.x\\\" />\\n        <input id=\\\"field-rotation-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.y\\\" />\\n        <input id=\\\"field-rotation-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.z\\\" />\\n      </div>\\n      <div class=\\\"i-vector-row scale linked\\\">\\n        <input id=\\\"field-scale-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.x\\\" />\\n        <input id=\\\"field-scale-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.y\\\" />\\n        <input id=\\\"field-scale-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.z\\\" />\\n      </div>\\n      <br/>\\n    </div>\\n  </div>\\n  <div id=\\\"subpanel-nodes\\\" class=\\\"subpanel\\\">\\n    <header><h3>Model</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.model.children\\\"\\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      (click)=\\\"select(o,'node')\\\">{{o.name||o.uuid}}</li>\\n    </ul>\\n  </div>\\n  <div id=\\\"subpanel-props\\\" class=\\\"subpanel\\\" *ngIf=\\\"context.character\\\">\\n    <header><h3>Props</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.props\\\" \\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      [hidden]=\\\"o.userData.hidden\\\"\\n      (click)=\\\"select(o,'prop')\\\"><a>{{o.name||o.uuid}}</a></li>\\n    </ul>\\n  </div>\\n  <div id=\\\"subpanel-anims\\\" class=\\\"subpanel\\\" *ngIf=\\\"context.character\\\">\\n    <header><h3>Animations</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.anims\\\" \\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      (click)=\\\"select(o,'anim')\\\">{{o.name||o.uuid}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- NODES -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'nodes'\\\">\\n  <header><h3>Model Nodes</h3></header>\\n  <tree [tree]=\\\"tree_sceneNodes\\\" \\n        (nodeSelected)=\\\"tree_sceneNodes.onNodeSelected($event)\\\"\\n        #tree__sceneNodes>\\n  </tree>\\n</div>\\n\\n<!-- BONES -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'bones'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>My Bones</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let bone of allBones\\\" attr.uuid=\\\"{{bone.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.selection.last === bone\\\"\\n      (click)=\\\"select(bone,'node')\\\">{{bone.name}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- ANIMATIONS -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'animations'\\\">\\n</div>\\n\\n<!-- MATERIALING -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'materials'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>All Materials</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let m of allMaterials\\\" attr.uuid=\\\"{{m.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.selection.last === m\\\"\\n      (click)=\\\"select(m,'mat')\\\">{{m.name||m.uuid}}</li>\\n    </ul>\\n  </div>\\n  <div class=\\\"filler\\\"></div>\\n  <div class=\\\"subpanel\\\" *ngIf=\\\"!! material\\\">\\n    <header><h3> {{ material.name || material.uuid }} </h3></header>\\n    <br/>\\n    <nouislider id=\\\"slider-roughness\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.roughness\\\"\\n    ></nouislider>\\n    <br/>\\n    <nouislider id=\\\"slider-metalness\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.metalness\\\"\\n    ></nouislider>\\n    <br/>\\n    <nouislider id=\\\"slider-envMapIntensity\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.envMapIntensity\\\"\\n    ></nouislider>\\n    <br/>\\n  </div>\\n</div>\\n\\n<!-- STUDIO -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'studio'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>Select Studio Rig</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let config of scener.rigConfigurations\\\"\\n      class=\\\"list-item\\\" [class.selected]=\\\"scener.rig.configuration === config\\\"\\n      (click)=\\\"scener.setupRig( config )\\\">{{config.name}}</li>\\n    </ul>\\n  </div>\\n</div>\"","export default \"<!-- <b>Characters: </b> -->\\n<a *ngFor=\\\"let c of context.characters\\\" (click)=\\\"main.focusOnCharacter( c )\\\">    {{c.name}}    </a>\\n\"","export default \"<div class=\\\"top\\\">\\n  <button *ngFor=\\\"let b of buttons\\\" title=\\\"{{b.name}}\\\" [class.selected]=\\\"context.viewMode===b.viewMode\\\"\\n    (click)=\\\"selectViewMode(b.viewMode)\\\">\\n    <i class=\\\"material-icons\\\">{{b.icon}}</i>\\n  </button>\\n</div>\\n<div class=\\\"filler\\\"></div>\\n<div class=\\\"bottom\\\">\\n  <!-- <button onclick=\\\"location.reload()\\\"><i class=\\\"material-icons\\\">autorenew</i></button> -->\\n  <button class=\\\"options-menu\\\"><i class=\\\"material-icons\\\">menu</i></button>\\n</div>\"","export default \"<div class=\\\"contents\\\">\\n  <canvas id=\\\"webgl-canvas\\\" [hidden]=\\\"!context.character\\\"></canvas>\\n  <div [hidden]=\\\"context.character\\\">Drag files here</div>\\n  <div class=\\\"overlay overlay-top-right\\\">\\n    <button class=\\\"transform position\\\">&#xFE0E;</button>\\n    <button class=\\\"transform rotation\\\">&#xFE0E;</button>\\n    <button class=\\\"transform scale\\\">&#xFE0E;</button>\\n    <button class=\\\"transform space\\\">&#xFE0E;</button>\\n  </div>\\n  <!-- <div class=\\\"overlay overlay-top-left\\\"> -->\\n  <div class=\\\"overlay overlay-bottom-right\\\">\\n    <!-- <button class=\\\"select-character\\\">&#xFE0E;</button> -->\\n  </div>\\n  <div class=\\\"loading\\\" *ngIf=\\\"loador.isBusy\\\"><h1>Loading</h1></div>\\n  <div class=\\\"exporting\\\" *ngIf=\\\"exportor.isBusy\\\"><h1>Exporting...</h1></div>\\n</div>\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Component } from '@angular/core'\nimport { LoadorService } from './services/loador.service'\nimport { SceneService } from './services/scener.service'\nimport { context, MainService, Character } from './services/main.service'\nimport Stats from \"stats-js\"\n\n@Component({ selector: 'app-root', templateUrl: './app.component.html' })\nexport class AppComponent {\n  context = context\n  \n  constructor( private main:MainService, private loador:LoadorService, private scener:SceneService ) { }\n  ngOnInit() \n  {\n    this.main.initialize()\n    this.scener.initialize()\n\n    this.loador.makeDropField( 'viewport', this.loador.fileResolvers.characters, \n                               ( ...rest:any ) => this.onCharactersLoaded( ...rest ) )\n    ///\n    \n    // new DropField( document.getElementById('subpanel-nodes') ).resolver( fileResolvers.model ).loaded( onCharacterLoaded )\n    // new DropField( document.getElementById('subpanel-props') ).resolver( fileResolvers.props ).loaded( onPropLoaded )\n    // new DropField( document.getElementById('subpanel-anims') ).resolver( fileResolvers.anims ).loaded( onAnimationsLoaded )\n    \n    //this.loador.loadZipFromLocalStorage( ( ...rest:any ) => this.onCharactersLoaded( ...rest ) )\n    this.loador.loadFromUrl( \"/assets/examples/glb/hero-shield.glb\" ).then( ( c:any ) => \n      this.onCharactersLoaded( new Character( c.scene , c.animations ) ) )\n\n    const SHOW_STATS = false\n    \n    if ( SHOW_STATS ) {\n      var stats = new Stats()\n      stats.showPanel( 1 ); // 0: fps, 1: ms, 2: mb, 3+: custom\n      stats.dom.style.setProperty(\"left\", \"unset\")\n      stats.dom.style.setProperty(\"right\", \"48px\")\n      document.body.appendChild( stats.dom )\n      function animate() {\n        stats.end()\n        stats.begin()\n        requestAnimationFrame( animate )\n      }\n      requestAnimationFrame( animate )\n    }\n\n    /// @ts-ignore\n    window.app = this ; window.context = context\n  }\n\n  onCharactersLoaded( ...characters:Character[] ) \n  {\n    characters.forEach( character => {\n      console.log( character )\n      this.main.addCharacter( character )\n      character.playDefaultAnimation()\n      // this.extractColors( character.model )\n    } )\n    this.main.focusOnCharacter( characters[0] )\n  }\n  \n}\n\n/////// EXTENSIONS //////\n\ndeclare global { interface Array<T> {\n  toSet<T>():Set<T>\n  mapToObject<T>( func:(o:T,i?:number) => string | [string,any] ):{[key:string]:any}\n} }\nArray.prototype.toSet = function<T>():Set<T> { return new Set( this ) }\nArray.prototype.mapToObject = function<T>( func:(o:T,i?:number) => string | [string,T] ):{[key:string]:T} {\n  const result = {}\n  this.forEach( ( o:T, i:number ) => {\n    let r = func( o, i )\n    let [ key, value ] = Array.isArray( r ) ? [ r[0], r[1] ] : [ r, o ]\n    result[ key ] = value\n  } )\n  return result\n}","import { BrowserModule } from '@angular/platform-browser'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { NouisliderModule } from 'ng2-nouislider'\nimport { TreeModule } from 'ng2-tree'\n\nimport { TabsComponent } from './common/tabs.component'\nimport { TabComponent } from './common/tab.component'\n\nimport { AppComponent } from './app.component'\nimport { ViewportComponent } from './components/viewport.component'\nimport { AnimationBarComponent } from './components/animation-bar.component'\nimport { ExplorerComponent } from './components/explorer.component'\nimport { ToolbarComponent } from './components/toolbar.component'\nimport { StatusbarComponent } from './components/statusbar.component'\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations'\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ViewportComponent,\n    AnimationBarComponent,\n    ExplorerComponent,\n    ToolbarComponent,\n    TabsComponent,\n    TabComponent,\n    StatusbarComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    FormsModule,\n    NouisliderModule,\n    TreeModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","/**\n * A single tab page. It renders the passed template\n * via the @Input properties by using the ngTemplateOutlet\n * and ngTemplateOutletContext directives.\n */\n\nimport { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'my-tab',\n  styles: [\n    `\n    .pane{\n      // padding: 1em;\n    }\n  `\n  ],\n  template: `\n    <div [hidden]=\"!active\" class=\"pane\">\n      <ng-content></ng-content>\n    </div>\n  `\n})\nexport class TabComponent {\n  @Input('tabTitle') title: string;\n  @Input() active = false;\n}\n","/**\n * The main component that renders single TabComponent\n * instances.\n */\n\nimport {\n  Component,\n  ContentChildren,\n  QueryList,\n  AfterContentInit,\n  ViewChild,\n  ComponentFactoryResolver,\n  ViewContainerRef\n} from '@angular/core';\n\nimport { TabComponent } from './tab.component';\n// import { DynamicTabsDirective } from './dynamic-tabs.directive';\n\n@Component({\n  selector: 'my-tabs',\n  template: `\n    <ul class=\"nav nav-tabs\">\n      <li *ngFor=\"let tab of tabs\" (click)=\"selectTab(tab)\" [class.active]=\"tab.active\">\n        <a href=\"#\">{{tab.title}}</a>\n      </li>\n    </ul>\n    <ng-content></ng-content>\n  `,\n  styles: [\n    `\n    .tab-close {\n      color: gray;\n      text-align: right;\n      cursor: pointer;\n    }\n    `\n  ]\n})\nexport class TabsComponent implements AfterContentInit\n{\n  @ContentChildren(TabComponent) tabs: QueryList<TabComponent>;\n  \n  // contentChildren are set\n  ngAfterContentInit() {\n    // get all active tabs\n    let activeTabs = this.tabs.filter((tab)=>tab.active)\n    \n    // if there is no active tab set, activate the first\n    if(activeTabs.length === 0) {\n      this.selectTab( this.tabs.first )\n    }\n  }\n  \n  selectTab( target_tab:TabComponent ){\n    this.tabs.toArray().forEach( tab => tab.active = tab === target_tab )\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvYW5pbWF0aW9uLWJhci5jb21wb25lbnQuY3NzIn0= */\"","import { Component, OnInit, ViewChild } from '@angular/core'\nimport { context, Events } from '../services/main.service'\nimport { NouisliderModule, NouisliderComponent } from 'ng2-nouislider'\nimport * as THREE from \"three\"\nimport * as $ from 'jquery'\n\nconst FRAME_TIME = 1.000 / 30\n\n@Component({\n  selector: 'app-animation-bar',\n  templateUrl: './animation-bar.component.html',\n  styleUrls: ['./animation-bar.component.css']\n})\nexport class AnimationBarComponent implements OnInit\n{\n  @ViewChild( NouisliderComponent, {static:true} )\n  slider_events:NouisliderComponent\n\n  sliderConfig = {\n    events : {\n      step: FRAME_TIME,\n      connect: false,\n      animate: false,\n      behaviour: 'unconstrained-tap-snap',\n      // tooltips: true,\n      tooltips: [\n        { to : () => \"1\" } ,\n        { to : () => \"2\" } ,\n        { to : () => \"3\" } ,\n        { to : () => \"4\" } ,\n        { to : () => \"5\" } ,\n        { to : () => \"6\" } ,\n        { to : () => \"7\" } ,\n        { to : () => \"8\" } ,\n        { to : () => \"9\" } ,\n        { to : () => \"10\" } ,\n      ]\n    } ,\n    weight : {\n      step: FRAME_TIME,\n      margin: FRAME_TIME,\n      connect: [true,false,true],\n      animate: false,\n      behaviour: 'snap',\n    } ,\n    play : {\n      step: .001,\n      connect: [true,false],\n      animate: false,\n      behaviour: 'snap',\n      // pips: {\n        // mode: 'steps',\n        // filter: t => t % 1.000 ? -1 : 0,\n        // format: t => (<number>t).toPrecision(1)\n        // density: 1,\n      // }\n    }\n  }\n  \n  action = {\n    get clip():THREE.AnimationClip { \n      if ( ! context.character || ! context.character.currentAction )\n        return null\n      return context.character.currentAction.getClip()\n    } ,\n    get userData() { \n      if ( ! this.clip )\n        return null\n      return context.character.anims.getUserData( this.clip )\n    } ,\n\n    get duration():number { \n      if ( ! context.character || ! context.character.currentAction )\n        return 1.000\n      return this.clip.duration\n    } ,\n    get hasEvents():boolean {\n      return !! context.character && \n             !! context.character.currentAction &&\n             !! this.userData.eventTimes.length\n    } ,\n\n    // _events : [.1,.2,.3,.4,.5,.6,.7,.8,.9,1.0] ,\n    events : [11,12,13,14,15,16,17,18,19,20] ,\n\n    get weight():number[] { \n      if ( ! context.character || ! context.character.currentAction )\n        return [ 0.000, 0.000 ]\n      const clip = context.character.currentAction.getClip()\n      return context.character.anims.getUserData( clip ).fadeTimes\n    } ,\n    set weight( v:number[] ) { \n      const clip = context.character.currentAction.getClip()\n      const fadeTimes = context.character.anims.getUserData( clip ).fadeTimes\n      fadeTimes[ 0 ] = v[ 0 ]\n      fadeTimes[ 1 ] = v[ 1 ]\n    } ,\n\n    get time():number { \n      if ( ! context.character || ! context.character.currentAction )\n        return 0.000\n      return context.character.currentAction.time\n    } ,\n    set time(v:number) { \n      if ( ! context.character || ! context.character.currentAction )\n        return\n      // console.log( v )\n      // context.character.currentAction.paused = true\n      // context.character.currentAction.time = v\n    }\n  }\n\n  context = context\n\n  handlers = {\n    change_play( value:number ) { \n      // console.log( value )\n      context.character.currentAction.paused = true\n      context.character.currentAction.time = value\n    } ,\n    change_events( values:number[] ) {\n      const clip = context.character.currentAction.getClip()\n      const eventTimes = context.character.anims.getUserData( clip ).eventTimes\n      eventTimes.forEach( ( t, i ) => eventTimes[ i ] = values[ i ] )\n    }\n  }\n\n  constructor() { }\n\n  ngOnInit() \n  {\n    ///@ts-ignore\n    window.ani = this\n    context.events.subscribe( Events.CHANGE_SELECTION, selection => {\n      if ( selection.type === \"anim\" ) {\n        context.character.play( selection.last as THREE.AnimationClip )\n      }\n    } )\n\n    /// @ts-ignore\n    $.contextMenu( {\n      selector: 'div.sliders',\n      animation: {duration: 100, show: 'fadeIn', hide: 'fadeOut'},\n      items: [\n        { name : \"Add Event\", icon: \"star\", callback : () => this.addEvent() } , \n        { name : \"Create animation from first frame\", icon: \"flash\", callback : () => {\n          /// @ts-ignore\n          let a = this.action.clip.clone()\n          a.tracks.forEach( t => { \n            t.times = [ 0 ]\n            t.values = t.values.slice( 0, t.name.endsWith(\".quaternion\") ? 4 : 3 ) \n          } )\n          a.name += \"-start-pose\"\n          a.duration = 0.000\n          context.character.anims.add( a )\n        } } , \n        { name : \"Create animation from first frame\", icon: \"flash\", callback : () => {\n          /// @ts-ignore\n          let a = this.action.clip.clone()\n          a.tracks.forEach( t => { \n            t.times = [ 0 ]\n            t.values = t.values.slice( t.values.length - ( t.name.endsWith(\".quaternion\") ? 4 : 3 ) )\n          } )\n          a.name += \"-end-pose\"\n          a.duration = 0.000\n          context.character.anims.add( a )\n        } } , \n      ]\n    } )\n\n    // this.slider_events.slide.subscribe( (...rest) => console.log(rest) )\n    // this.slider_events.slider.on( \"slide\", (...rest) => console.log(rest) )\n    // $(\"#slider-events\").on(\"change\",(...rest) => console.log(rest))\n\n    context.events.subscribe( Events.ANIMATION_PLAY, () => this.refresh() )\n    context.events.subscribe( Events.CHANGE_CHARACTER, () => this.refresh() )\n    if ( context.character && context.character.currentAction )\n      this.refresh() \n    \n    this.onFrame()\n  }\n\n  onFrame() {\n\n    try {\n      const action = context.character.currentAction\n      const clip = action.getClip()\n      const udata = context.character.anims.getUserData( clip )\n      udata.eventTimes.forEach( ( et, i ) => this.action.events[ i ] = et )\n      const handles = $(\"#slider-events .noUi-handle\").toArray()\n      handles.forEach( ( o, i ) => $(o).toggle( udata.eventTimes[ i ] !== undefined ) )\n    } catch( e ) { }\n\n    requestAnimationFrame( () => this.onFrame() )\n  }\n\n  refresh() \n  {\n    const action = context.character.currentAction\n    const clip = action.getClip()\n    const udata = context.character.anims.getUserData( clip )\n    udata.eventTimes.forEach( ( et, i ) => this.action.events[ i ] = et )\n\n    ///@ts-ignore\n    this.slider_events.writeValue( this.action.events )\n\n    console.log( udata )\n  }\n\n  ////\n\n  togglePause() {\n    context.character.currentAction.paused = ! context.character.currentAction.paused\n  }\n  \n  addEvent() {\n    const clip = context.character.currentAction.getClip()\n    const udata = context.character.anims.getUserData( clip )\n    udata.addEvent( context.character.currentAction.time )\n    \n    this.refresh() \n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core'\nimport { NouisliderModule, NouisliderComponent } from 'ng2-nouislider'\nimport { context, Events, MainService } from '../services/main.service'\nimport { SceneService } from '../services/scener.service'\nimport * as THREE from \"three\"\nimport * as $ from 'jquery'\nimport 'jquery-contextmenu'\n\n// import 'nouislider/distribute/nouislider.css'\nimport { TreeModel, NodeSelectedEvent, TreeComponent } from 'ng2-tree'\n\nconst VECTOR3_NaN = { x:NaN, y:NaN, z:NaN }\n\nconst boner = {\n  subjects : [], \n  keepWorldMatrix : false, \n  addCurrentSubjectsTo( parentToBe ) {\n    const add = subject =>\n      this.keepWorldMatrix ? parentToBe.attach( subject ) : parentToBe.add( subject )\n    this.subjects.forEach( subject => add( subject ) )\n    context.data.dirty = true\n    return this\n  },\n  openFor( ...subjects ) {\n    this.subjects.length = 0\n    this.subjects.push( ...subjects )\n    return this\n  },\n}\n\nfunction map_node( o:THREE.Object3D, depth=0 ) {\n  return {\n    id : o.uuid,\n    value : o.name || o.uuid,\n    children : o.children.map( child => map_node( child, ++depth ) )\n  }\n}\n\n@Component({ selector: 'app-explorer', templateUrl: './explorer.component.html', })\nexport class ExplorerComponent implements OnInit \n{\n  @ViewChild('tree__sceneNodes',{static:false}) elTree_sceneNodes\n\n  context = context\n\n  tree_sceneNodes:TreeModel = {\n    value: 'character.model',\n    settings: {\n      static : true,\n      isCollapsedOnInit : false,\n    },\n    loadChildren: function( callback ) {\n      callback( context.character.model.children.map( o => map_node( o ) ) )\n    },\n    onNodeSelected( e:NodeSelectedEvent ) {\n      const item = context.character.model.getObjectByProperty( \"uuid\", e.node.id as string )\n      context.selection.type = \"node\"\n      context.selection.last = item\n      context.selection.dirty = true\n      console.log( e ) \n    },\n  }\n\n  constructor( private main:MainService, private scener:SceneService ) { }\n\n  ngOnInit() \n  {\n    ///@ts-ignore\n    window.ex = this\n\n    // this.setup_keyboardEvents()\n    this.setup_contextMenus()\n\n    console.log( this.elTree_sceneNodes )\n  }\n\n  setup_contextMenus()\n  {\n    const animation = {duration: 0, show: 'show', hide: 'hide'}\n    const util = {\n      addChild( parent, name, userData={} )\n      {\n        let child = new THREE.Object3D()\n        child.name = name\n        child.userData = userData\n        parent.add( child )\n        context.data.dirty = true\n      },\n    }\n\n    /// @ts-ignore\n    $.contextMenu( {\n      selector: '#subpanel-nodes .list-item',\n      animation : animation,\n      build: function( el, event )\n      {\n        const uuid = el.attr(\"uuid\")\n        const item = context.character.model.getObjectByProperty( \"uuid\", uuid )\n        return {\n          callback: action => console.log( action, uuid ),\n          animation: {duration: undefined, show: 'show', hide: 'hide'},\n          items: {\n            addChild: {\n              name: \"Add empty child\", icon: \"add\",\n              callback: () => util.addChild( item, \"o\" )\n            },\n            addHolster: {\n              name: \"Add empty holster\", icon: \"add\",\n              callback: () => util.addChild( item, \"holster-\"+item.name, { isHolster : true } )\n            },\n            toggleHolster: { \n              name: item.userData.isHolster ? \"Untag as holster\" : \"Tag as holster\", icon: \"paste\",\n              callback: () => item.userData.isHolster = item.userData.isHolster ? undefined : true\n            },\n            delete: {\n              name: \"Delete\", icon: \"delete\",\n              callback: () => {\n                item.parent.remove( item )\n                context.data.dirty = true\n              }\n            },\n          }\n        }\n      }\n    } )\n\n    /// @ts-ignore\n    $.contextMenu( {\n      selector: '#subpanel-props .list-item',\n      animation : animation,\n      build: ( el, event ) =>\n      {\n        const uuid = el.attr(\"uuid\")\n        const targets:THREE.Object3D[] = [ context.character.model.getObjectByProperty(\"uuid\",uuid) ]\n\n        const makeItem = ( holster, i, keepWorldMatrix ) => {\n          return [ \"attachTo_\" + i, {\n            name: holster.name + ( keepWorldMatrix ? \" (keep global matrix)\" : '' ), \n            icon: \"link\",\n            callback: () => {\n              boner.keepWorldMatrix = keepWorldMatrix\n              boner.openFor( ...targets ).addCurrentSubjectsTo( holster )\n            }\n          } ]\n        }\n\n        return {\n          items: {\n            toggleHidden: { \n              name: targets.length && targets[0].visible ? \"Hide\" : \"Show\", icon: \"eye\",\n              visible: targets.length === 1,\n              callback: () => context.character.setHidden( targets[0], targets[0].visible )\n            },\n            setHiddenTrue: { \n              name: \"Hide\", icon: \"eye\", \n              visible: targets.length > 1,\n              callback: () => targets.forEach( o => context.character.setHidden( o, true ) )\n            },\n            setHiddenFalse: { \n              name: \"Show\", icon: \"eye\", \n              visible: targets.length > 1,\n              callback: () => targets.forEach( o => context.character.setHidden( o, false ) )\n            },\n            sep1: \"---------\",\n            attachLocal: {\n              name: \"Attach to\", icon: \"link\",\n              // items: context.character.findAllChildren( child => child.userData.isHolster )\n              //        .mapToObject( ( holster, i ) => makeItem( holster, i, false ) ),\n            },\n            attachGlobal: {\n              name: \"Attach to (keep global matrix)\", icon: \"link\",\n              // items: context.character.findAllChildren( child => child.userData.isHolster )\n              //        .mapToObject( ( holster, i ) => makeItem( holster, i, true ) ),\n            },\n            sep2: \"---------\",\n            addChild: {\n              name: \"Add hotpoint (empty child)\", icon: \"add\",\n              // visible: targets.length === 1,\n              callback: () => targets.forEach( target => util.addChild( target, \"hot-point\" ) )\n            },\n            clone: {\n              name: \"Clone\", icon: \"copy\",\n              callback: () => targets.forEach( o => context.character.props.duplicate( o ) )\n            },\n            delete: {\n              name: \"Delete\", icon: \"delete\",\n              callback: () => context.character.props.deleteAll( ...targets )\n            },\n          }\n        }\n      },\n    } )\n    \n    /// @ts-ignore\n    $.contextMenu( {\n      selector: '#subpanel-anims .list-item',\n      animation : animation,\n      build: function( el, event )\n      {\n        const uuid = el.attr(\"uuid\")\n        const targets:THREE.AnimationClip[] = [ context.character.anims.getByUuid( uuid ) ]\n        return {\n          items: {\n            clone: {\n              name: \"Clone\", icon: \"copy\",\n              callback: () => targets.forEach( clip => context.character.anims.duplicate( clip ) )\n            },\n            delete: {\n              name: \"Delete\", icon: \"delete\",\n              callback: () => context.character.anims.deleteAll( ...targets )\n            },\n          }\n        }\n      },\n    } )\n  }\n\n  //// GENERAL\n  \n  get object() { \n    const fake = { name : '-', position : VECTOR3_NaN, rotation : VECTOR3_NaN, scale : VECTOR3_NaN }\n    if ( ! context.selection.last ) return fake\n    if ( context.selection.type === \"anim\" ) return fake\n    if ( context.selection.type === \"mat\" ) return fake\n    return context.selection.last as THREE.Object3D\n  }\n\n  select( target, selectionType:\"node\"|\"prop\"|\"anim\" ) {\n    context.selection.all = [ target ]\n    context.selection.last = target\n    context.selection.type = selectionType\n    context.selection.dirty = true\n  }\n\n  //// BONES\n\n  get allBones():THREE.Bone[] { \n    return context.character.findAllChildren( o => o.type === \"Bone\" ) as THREE.Bone[]\n  }\n\n  //// MATERIALS\n\n  materialSliders = {\n    zeroToOne : { connect: [true,false], animate: false, behaviour: 'snap', },\n  }\n  get material():THREE.Material {\n    return context.selection.type !== 'mat' ? null : context.selection.last as THREE.Material\n  }\n\n  get allMaterials():THREE.Material[] {\n    let r = new Set() \n    /// @ts-ignore\n    context.character.model.traverse( o => !o.material ? null : r.add( o.material ) )\n    return Array.from( r ) as Array<THREE.Material>\n  }\n}","import { Component, OnInit } from '@angular/core';\nimport { context, MainService } from '../services/main.service';\n\n@Component({  selector: 'app-statusbar', templateUrl: './statusbar.component.html', })\nexport class StatusbarComponent\n{\n  readonly context = context\n  constructor( private main:MainService ) {\n  }\n  // ngOnInit() { }\n}","import { Component, OnInit } from '@angular/core'\nimport { ExportorService } from '../services/exportor.service'\nimport { context, Events, MainService } from '../services/main.service'\nimport * as $ from 'jquery'\n\n@Component({ selector: 'app-toolbar', templateUrl: './toolbar.component.html', })\nexport class ToolbarComponent implements OnInit \n{\n  context = context\n\n  buttons = []\n\n  constructor( private exportor:ExportorService ) {}\n\n  ngOnInit() {\n    this.buttons = [\n      { icon : \"people\", name : \"Characters\", viewMode : \"characters\" },\n      { icon : \"remove_red_eye\", name : \"Overview\", viewMode : \"overview\" },\n      { icon : \"account_tree\", name : \"Nodes\", viewMode : \"nodes\" }, \n      { icon : \"accessibility\", name : \"Bones\", viewMode : \"bones\" },\n      { icon : \"playlist_play\", name : \"Animations\", viewMode : \"animations\" },\n      { icon : \"format_paint\", name : \"Materials\", viewMode : \"materials\" },\n      { icon : \"camera\", name : \"Studio Rigs\", viewMode : \"studio\" },\n    ]\n\n    /// @ts-ignore\n    $.contextMenu( {\n      selector: 'button.options-menu',\n      trigger: \"left\",\n      animation: {duration: 100, show: 'fadeIn', hide: 'fadeOut'},\n      items: [\n        // { name : \"xxxx\", icon: \"eye\", \n        //   callback : () => null } , \n\n        { name : \"Download GLTF (text)\", icon: \"disk-a\", \n          callback : () => this.exportor.saveZip( false, \"download\" ) } , \n\n        { name : \"Download GLB (binary)\", icon: \"disk-b\", \n          callback : () => this.exportor.saveZip( true, \"download\" ) } , \n\n        { name : \"Save to browser's localStorage\", icon: \"disk-c\", \n          callback : () => this.exportor.saveZip( true, \"storage\" ) } , \n          \n        { name : \"Clear Local Storage\", icon : \"clear\", \n          callback : () => { localStorage.removeItem(\"zip\") } } , \n  \n        { name : \"Upload to Firebase (wip)\", icon: \"fire\", \n          callback : () => this.exportor.saveZip( true, \"firebase\" ) } , \n      ]\n    } )\n  }\n\n  selectViewMode( viewMode ) {\n    context.viewMode = context.viewMode !== viewMode ? viewMode : null\n  }\n}","import { Component, OnInit, ElementRef, HostListener } from '@angular/core'\nimport * as THREE from \"three\"\nimport * as $ from 'jquery'\nimport { LoadorService } from '../services/loador.service'\nimport { SceneService } from '../services/scener.service'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport { TransformControls } from 'three/examples/jsm/controls/TransformControls'\nimport { context, Events } from '../services/main.service'\nimport { ExportorService } from '../services/exportor.service';\n\n@Component({\n  selector: 'app-viewport',\n  templateUrl: './viewport.component.html',\n})\nexport class ViewportComponent implements OnInit \n{\n  context = context\n\n  renderer:THREE.WebGLRenderer\n  orbit:OrbitControls\n  transformer:TransformControls\n  camera:THREE.PerspectiveCamera\n\n  constructor( private viewportElem:ElementRef, \n               private scener:SceneService, \n               private loador:LoadorService,\n               private exportor:ExportorService ) {}\n\n  ngOnInit() \n  {\n    const canvasElem = document.getElementById( \"webgl-canvas\" ) as HTMLCanvasElement \n    this.renderer = new THREE.WebGLRenderer( { canvas: canvasElem, antialias: true } )\n    this.scener.initialize()\n\n    this.camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 1000 )\n    this.camera.position.z = 3\n    this.camera.position.y = 2\n    this.camera.lookAt( new THREE.Vector3() )\n\n    this.orbit = new OrbitControls( this.camera, canvasElem )\n    this.orbit.target = new THREE.Vector3( 0, 1, 0 )\n    this.orbit.update()\n    this.orbit.mouseButtons.LEFT = 0\n    this.orbit.mouseButtons.RIGHT = 2\n    this.orbit.mouseButtons.MIDDLE = -1\n    this.orbit.enableKeys = false\n\n    this.transformer = new TransformControls( this.camera, canvasElem )\n    this.transformer.addEventListener( 'dragging-changed', event => this.orbit.enabled = ! event.value )\n    this.transformer.setSize( 0.5 )\n    this.transformer.setSpace( \"local\" )\n    this.scener.scene.add( this.transformer )\n\n    context.events.subscribe( Events.CHANGE_CHARACTER, character => {\n      this.scener.rig.position.x = \n      this.camera.position.x = \n      this.orbit.target.x = this.scener.platforms[ character.uuid ].position.x\n      this.orbit.update()\n      this.transformer.detach()\n    } )\n\n    context.events.subscribe( Events.CHANGE_DATA, data => {\n      if ( this.transformer.object && ! this.transformer.object.parent )\n        this.transformer.detach()\n    } )\n\n    context.events.subscribe( Events.CHANGE_SELECTION, selection => {\n      if ( selection.type === \"node\" || selection.type === \"prop\" )\n        this.transformer.attach( selection.last as THREE.Object3D )\n      else\n        this.transformer.detach()\n    } )\n    \n    $( \"button.transform.position\" ).click( e => this.transformer.setMode( \"translate\" ) )\n    $( \"button.transform.rotation\" ).click( e => this.transformer.setMode( \"rotate\" ) )\n    $( \"button.transform.scale\" ).click( e => this.transformer.setMode( \"scale\" ) )\n    $( \"button.transform.space\" ).click( e => this.transformer.setSpace( \n                                              this.transformer.space === \"world\" ? \"local\" : \"world\" ) )\n\n    this.onResize()\n    this.animate()\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize() {\n    let [ W, H ] = [ this.viewportElem.nativeElement.clientWidth, this.viewportElem.nativeElement.clientHeight ]\n    this.renderer.setSize( W, H )\n    this.camera.aspect = W / H;\n    this.camera.updateProjectionMatrix();\n  }\n\n  animate()\n  {\n    this.renderer.render( this.scener.scene, this.camera )\n    requestAnimationFrame( () => this.animate() )\n  }\n}","import { Injectable } from '@angular/core'\nimport { context, Events, Character } from '../services/main.service'\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\"\nimport * as THREE from \"three\"\nimport * as JSZip from \"jszip\"\n\nconst link = document.createElement( 'a' )\nlink.style.display = 'none'\n\nconst exporter = new GLTFExporter()\nconst zipper = new JSZip()\n\nexport enum ExportDestination { Download, LocalStorage, Firebase }\n\n@Injectable({ providedIn: 'root' })\nexport class ExportorService \n{\n  public get isBusy():boolean { return this._busy }\n  private _busy:boolean = false\n\n  constructor() { console.log( zipper ) }\n\n  async saveZip( binary:boolean, destination:\"download\"|\"storage\"|\"firebase\" )\n  {\n    this._busy = true\n    try {\n      const zip = new JSZip()\n      console.log( \"hajime\" )\n      const results = await Promise.all( context.characters.map( c => this.convertCharacter( c, binary ) ) )\n      console.log( \"results: \", results )\n      results.forEach( (r:any) => zip.file( r.filename, r.blob ) )\n      console.log( \"zip: \", zip )\n      const zip_blob = await new Promise<Blob>( resolve => \n            zip.generateAsync({type : \"blob\",compression: \"DEFLATE\"}).then( resolve ) )\n\n      switch( destination )\n      {\n        case \"download\": this.download( zip_blob, \"characters.zip\" ); break;\n        case \"storage\":  this.saveToLocalStorage( zip_blob ); break;\n        case \"firebase\": throw new Error(\"Not implemented...\"); break;\n      }\n      \n      console.log( \"done \", zip_blob )\n    } finally {\n      this._busy = false\n    }\n  }\n\n  saveToLocalStorage( blob:Blob ) {\n    let fileReader = new FileReader()\n    fileReader.onload = function (evt) {\n        /// @ts-ignore\n        var result = evt.target.result\n        try { localStorage.setItem(\"zip\", result as string ) }\n        catch (e) { console.log(\"Storage failed: \" + e) }\n    }\n    fileReader.readAsDataURL( blob )\n  }\n\n  download( blob:Blob, filename:string ) {\n    link.href = URL.createObjectURL( blob )\n    link.download = filename\n    link.click()\n  }\n\n  async convertCharacter( character:Character, binary:boolean )\n  {\n    let model = character.model\n    let anims = character.anims.toArray()\n    let userData = character.makeUserData()\n    return await this.exportToGLTF( model, anims, userData, binary )\n  }\n\n  async exportToGLTF( group:THREE.Object3D, animations:THREE.AnimationClip[], userData:object, binary:boolean ):Promise<Result>\n  {\n    console.log( group, animations, userData, binary )\n\n    // let exportee = new THREE.Scene()\n    // exportee.add( group )\n    // exportee.add( group.clone( true ) )\n    let exportee = group\n    exportee.userData = userData\n\n    return new Promise( ( resolve, reject ) => {\n      try {\n        exporter.parse( exportee, function ( data ) {\n        // exporter.parse( group, function ( data ) {\n          const name = group.name || \"LeScene\"\n          let binary = data instanceof ArrayBuffer\n          let output = binary ? data : JSON.stringify( data, null, 2 )\n          let filename = `${ name }.${ binary ? \"glb\" : \"gltf\" }`\n          let blob = binary ?\n                    new Blob( [ output as string ], { type: 'text/plain' } ) :\n                    new Blob( [ output as ArrayBuffer ], { type: 'application/octet-stream' } )\n          resolve( new Result( blob, filename ) )\n        }, { animations : animations, onlyVisible : false, binary : binary } )\n      } catch( e ) { reject( e ) }\n    } )\n  }\n}\n\nclass Result {\n  constructor( public readonly blob:Blob, public readonly filename:string ) {}\n}","import { Injectable } from '@angular/core'\n\nimport * as JSZip from \"jszip\"\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js'\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js'\nimport { ColladaLoader } from 'three/examples/jsm/loaders/ColladaLoader.js'\nimport { SVGLoader } from 'three/examples/jsm/loaders/SVGLoader.js'\n\nimport * as THREE from \"three\"\nimport * as $ from 'jquery'\nimport { Character } from './main.service';\n\n@Injectable({ providedIn: 'root' })\nexport class LoadorService\n{\n  public get isBusy():boolean { return this._busy }\n  private _busy:boolean = false\n  \n  private loadingManager = new THREE.LoadingManager()\n  private loaders = {\n    gltf: new GLTFLoader( this.loadingManager ),\n    fbx : new FBXLoader( this.loadingManager ),\n    obj : new OBJLoader( this.loadingManager ),\n    dae : new ColladaLoader( this.loadingManager ),\n    svg : new SVGLoader( this.loadingManager ),\n  }\n\n  fileResolvers = {\n    characters : async ( data:string, file_extension:string, file_name:string ):Promise<Character> => {\n      let [ group, animations ] = await new Promise( ( resolve, reject ) => {\n        switch ( file_extension ) {\n          case \"gltf\":\n          case \"glb\": this.loaders.gltf.load( data, gltf => resolve( [ gltf.scene, gltf.animations ] ) ); break;\n          case \"fbx\": this.loaders.fbx.load( data, (o:any) => resolve( [ o, o.animations || [] ] ) ); break;\n          default: reject( `Sorry, can't load files with extension \"${file_extension}\" here` )\n        }\n      } )\n  \n      console.log( group )\n      \n      let model = null\n  \n      if ( group.children.length === 0 )\n      {\n        console.warn( \"No 3D objects found...\" )\n      }\n      else\n      if ( group.children.length === 1)\n      {\n        // model = gltf.scene.children.shift()\n        model = group.children[ 0 ]\n      }\n      else\n      {\n        model = new THREE.Object3D()\n        model.scale.setScalar( .01 )\n        // gltf.scene.children.forEach( o => model.add( o ) )\n        while ( group.children.length )\n          model.add( group.children.shift() )\n      }\n  \n      return new Character( model , animations )\n    },\n    model : async ( data:string, file_extension:string, file_name:string ) => {\n      let model:THREE.Object3D = await new Promise( ( resolve, reject ) => {\n        switch ( file_extension ) {\n          case \"gltf\":\n          case \"glb\": this.loaders.gltf.load( data, o => resolve( o.scene.children[0] ) ); break;\n          case \"dae\": this.loaders.dae.load( data, o => resolve( o.scene.children[0] ) ); break;\n          case \"obj\": this.loaders.obj.load( data, o => resolve( o ) ); break;\n          case \"fbx\": this.loaders.fbx.load( data, o => resolve( o ) ); break;\n          default: reject( `Sorry, can't load files with extension \"${file_extension}\" here` )\n        }\n      } )\n      console.log( model )\n      model.name = model.name || file_name\n      return model\n    },\n    props : async ( data:string, file_extension:string, file_name:string ) => {\n      let props:THREE.Object3D[] = await new Promise( ( resolve, reject ) => {\n        switch ( file_extension ) {\n          case \"gltf\":\n          case \"glb\": this.loaders.gltf.load( data, o => resolve( o.scene.children ) ); break;\n          case \"obj\": this.loaders.obj.load( data, o => resolve( [o] ) ); break;\n          case \"dae\": this.loaders.dae.load( data, o => resolve( [o.scene] ) ); break;\n          case \"fbx\": this.loaders.fbx.load( data, o => resolve( [o] ) ); break;\n          case \"svg\": this.loaders.svg.load( data, o => {\n            let paths = o.paths\n            let group = new THREE.Group()\n            for ( var i = 0; i < paths.length; i ++ ) {\n              var path = paths[ i ]\n              var material = new THREE.MeshBasicMaterial( {\n                color: o.xml.fgColor,\n                side: THREE.DoubleSide,\n                depthWrite: false\n              } );\n              var shapes = path.toShapes( true, false )\n              for ( var j = 0; j < shapes.length; j ++ ) {\n                var shape = shapes[ j ]\n                var geometry = new THREE.ShapeBufferGeometry( shape )\n                var mesh = new THREE.Mesh( geometry, material )\n                group.add( mesh )\n              }\n            }\n            resolve( [ group ] )\n  \n          } ); break;\n          default: reject( `Sorry, can't load files with extension \"${file_extension}\" here` )\n        }\n      } )\n      props = [].concat( ...props )\n      \n      let todel = []\n      props.forEach( prop => {\n        prop.traverse( o => { \n          let del = false\n          del = del || o.type.indexOf(\"Light\") > -1\n          del = del || o.type.indexOf(\"Camera\") > -1\n          del = del || o.type === \"SkinnedMesh\"\n          del = del || o.type === \"Bone\"\n          if ( del ) todel.push( o )\n        } )\n      } )\n      todel.forEach( o => o.parent.remove( o ) )\n  \n      if ( props.length === 1 ) props[ 0 ].name = file_name\n      else props.forEach( prop => prop.name = prop.name || file_name )\n      return props\n    },\n    anims : async ( data:string, file_extension:string, file_name:string ) => {\n      let animations:THREE.AnimationClip[] = await new Promise( ( resolve, reject ) => {\n        switch ( file_extension ) {\n          case \"gltf\":\n          case \"glb\": this.loaders.gltf.load( data, gl => resolve( gl.animations ) ); break;\n          // case \"fbx\": this.loaders.fbx.load( data, group => console.warn( group ), null, e => console.error( e ) );\n          // case \"fbx\": this.loaders.fbx.load( data, group => resolve( group.animations ) ); break;\n          case \"fbx\": this.loaders.fbx.load( data, (group:any) => resolve( group.animations ) ); break;\n          default: reject( `Sorry, can't load files with extension \"${file_extension}\" here` )\n        }\n      } )\n      animations = animations.filter( a => a.duration > 0.0 )\n      if ( animations.length === 1 )\n        animations[ 0 ].name = file_name\n      animations.forEach( a => a.name = a.name.match(/[\\w-]+/g).join('-').toLowerCase() )\n      return animations\n    },\n  }\n\n  constructor() {\n    this.loadingManager.onStart = () => this._busy = true\n    this.loadingManager.onLoad  = () => this._busy = false\n    this.loadingManager.onError = () => this._busy = false\n    // loadingManager.onStart = () => $( \".loading\" ).show()\n    // loadingManager.onLoad  = () => $( \".loading\" ).hide()\n    // loadingManager.onError = () => $( \".loading\" ).hide()\n\n    /// @ts-ignore\n    window.loador = this\n  }\n\n  async loadFromUrl( url:string ) {\n    return await new Promise( ( resolve ) => this.loaders.gltf.load( url, resolve ) )\n  }\n\n  async loadZipFromLocalStorage( funcLoaded:Function ) {\n\n    function dataURLtoBlob(dataurl) {\n      var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n          bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n      while(n--){\n          u8arr[n] = bstr.charCodeAt(n);\n      }\n      return new Blob([u8arr], {type:mime});\n    }\n\n    let data = localStorage[\"zip\"]\n\n    let o = await JSZip.loadAsync( dataURLtoBlob( data ) )\n    console.log( o.files )\n\n    const funcResolver = this.fileResolvers.characters\n\n    let promises = []\n    for ( let zip_filename in o.files )\n    {\n      promises.push( new Promise( async(resolve) => {\n        let file = o.files[ zip_filename ]\n        let [ zfext, zfname ] = this.getFileNameAndExtension( file )\n        let blob = await file.async( \"blob\" )\n        let url = URL.createObjectURL( blob )\n        funcResolver( url, zfext, zfname ).then( resolve ).catch( this.onError ) \n      } ).catch( this.onError ) )\n    }\n\n    Promise.all( promises ).then( a => funcLoaded( ...[].concat( ...a ) ) ).catch( this.onError )\n\n    // let fileReader = new FileReader()\n    // fileReader.onload = function (evt) {\n    //     /// @ts-ignore\n    //     var result = evt.target.result\n    //     try { localStorage.setItem(\"zip\", result) }\n    //     catch (e) { console.log(\"Storage failed: \" + e) }\n    // }\n    // fileReader.\n  }\n\n  makeDropField( elementId, funcResolver:(data,file_extension,file_name)=>any, funcLoaded:Function ) {\n    const element = document.getElementById( elementId )\n    \n    element.ondragover = e => {\n      if ( e.ctrlKey || e.altKey || $(element).is(\":focus-within\") ) \n        return true\n      e.preventDefault()\n      element.classList.add(\"dragover\")\n      return false;\n    }\n\n    element.ondragleave = e => {\n      if ( e.ctrlKey || e.altKey ) \n        return true\n      e.preventDefault()\n      element.classList.remove(\"dragover\")\n      return false;\n    }\n\n    element.ondrop = async(e:DragEvent) => {\n      if ( e.ctrlKey || e.altKey || !e.dataTransfer.files.length ) \n        return true\n\n      e.preventDefault()\n      element.classList.remove(\"dragover\")\n\n      let promises = []\n      /// @ts-ignore\n      for ( let file of e.dataTransfer.files )\n      {\n        let [ fileext, filename ] = this.getFileNameAndExtension( file )\n        // console.log( file )\n          \n        if ( fileext === \"zip\" )\n        {\n          let ab:ArrayBuffer = await new Promise( resolve => {\n            let zip_reader = new FileReader()\n            zip_reader.onload = async(event:any) => resolve( event.target.result )\n            zip_reader.readAsArrayBuffer( file )\n          } )\n          let o = await JSZip.loadAsync( ab )\n          for ( let zip_filename in o.files )\n          {\n            promises.push( new Promise( async(resolve) => {\n              let file = o.files[ zip_filename ]\n              let [ zfext, zfname ] = this.getFileNameAndExtension( file )\n              let blob = await file.async( \"blob\" )\n              let url = URL.createObjectURL( blob )\n              funcResolver( url, zfext, zfname ).then( resolve ).catch( this.onError ) \n            } ).catch( this.onError ) )\n          }\n        } else {\n          promises.push( new Promise( async(resolve) => {\n            let reader = new FileReader()\n            reader.onload = (event:any) => {\n              funcResolver( event.target.result, fileext, filename ).then( resolve ).catch( this.onError )\n            }\n            reader.readAsDataURL( file )\n          } ).catch( this.onError ) )\n        }\n      }\n\n      Promise.all( promises ).then( a => funcLoaded( ...[].concat( ...a ) ) ).catch( this.onError )\n        \n      return false\n    }\n  }\n\n  getFileNameAndExtension( file:{name:string} ) {\n    return [\n      file.name.match( /\\.([0-9a-z]+)(?:[\\?#]|$)/i )[1].toLowerCase() ,\n      file.name.split( '.' )[ 0 ]\n    ]\n  }\n\n  onError( e ) { \n    console.error( e )\n    // try { this._busy = false }\n    // catch( e ) { console.error( e ) }\n  }\n}","import { Injectable } from '@angular/core'\nimport * as THREE from \"three\"\n\nexport enum Events { \n  CHANGE_DATA = \"change.data\",\n  CHANGE_SELECTION = \"change.selection\",\n  CHANGE_CHARACTER = \"change.character\",\n  ANIMATION_PLAY = \"animation.play\",\n  ADD_CHARACTER = \"add.character\",\n}\n\n@Injectable({ providedIn: 'root' })\nexport class MainService\n{\n  initialize() {\n    context.time.clock.start()\n    \n    this.onFrame()\n    \n    context.events.subscribe( Events.CHANGE_DATA, (...a) => console.info( \"CHANGE_DATA\", ...a ) )\n    context.events.subscribe( Events.CHANGE_SELECTION, (...a) => console.info( \"CHANGE_SELECTION\", ...a ) )\n    context.events.subscribe( Events.CHANGE_CHARACTER, (...a) => console.info( \"CHANGE_CHARACTER\", ...a ) )\n    context.events.subscribe( Events.ANIMATION_PLAY, (...a) => console.info( \"ANIMATION_PLAY\", ...a ) )\n  }\n  private onFrame() {\n    context.time.delta = context.time.clock.getDelta()\n  \n    if ( context.data.dirty ) {\n      context.events.dispatch( Events.CHANGE_DATA, context.data )\n      context.data.dirty = false\n    }\n    if ( context.selection.dirty ) {\n      context.events.dispatch( Events.CHANGE_SELECTION, context.selection )\n      context.selection.dirty = false\n    }\n    for ( let c of context.characters )\n      c.aniMixer.update( context.time.delta )\n    requestAnimationFrame( () => this.onFrame() )\n  }\n\n  /// /// /// /// \n\n  makeAndAddCharacter( model:THREE.Object3D, animations:THREE.AnimationClip[] ):Character {\n    return this.addCharacter( new Character( model , animations ) )\n  }\n  addCharacter( character:Character ):Character\n  {\n    character.model.position.setScalar( 0 )\n    character.model.traverse( o => o.visible = ! o.userData.hidden )\n    context.characters.push( character )\n    context.events.dispatch( Events.ADD_CHARACTER, character )\n    context.data.dirty = true\n    return character\n  }\n  \n  focusOnCharacter( character:Character )\n  {\n    context.viewMode = context.viewMode || \"overview\"\n    context.character = character\n    context.events.dispatch( Events.CHANGE_CHARACTER, character )\n    context.data.dirty = true\n  }\n}\n\nexport const context = \n{\n  time : {\n    clock : new THREE.Clock(),\n    delta : 0.0,\n  }, \n  \n  // viewMode : null, //  \"characters\" , // \n  get viewMode() { return localStorage[\"state.viewMode\"] },\n  set viewMode(value) { localStorage[\"state.viewMode\"] = value },\n  \n  character : <Character>null,\n\n  characters : new Array<Character>(),\n\n  data : new class CurrentData {\n    dirty:boolean = false\n  },\n  \n  selection : new class SelectionManager {\n    all:THREE.Object3D[]|THREE.AnimationClip[]\n    type:\"node\"|\"prop\"|\"anim\"|\"mat\"\n    last:THREE.Object3D|THREE.AnimationClip|THREE.Material\n    dirty:boolean = false\n  },\n\n  events : new class EventManager {\n    functions:{ [key:string]:Function[] } = {}\n    subscribe( key:Events, callback:Function ) \n    {\n      if ( !this.functions[ key ] )\n        this.functions[ key ] = []\n      this.functions[ key ].push( callback )\n    }\n    dispatch( key:Events, data?:any ) {\n      if ( this.functions[key] )\n        for ( let callback of this.functions[key] )\n          callback( data )\n    }\n  },\n\n  // state : new class {\n  //   data : any\n  //   constructor() { this.data = localStorage[ \"state\" ] || {} }\n  //   getValue( key:string ) { return this.data[ key ] }\n  //   setValue( key:string, value:any ) {\n  //     this.data[ key ] = value\n  //     localStorage[\"state\"] = JSON.stringify( this.data )\n  //   }\n  //   ////\n  //   get viewMode():string { return this.getValue(\"viewMode\") }\n  // }\n}\n\nexport class Character\n{\n  readonly props:PropsList\n  readonly anims:AnimationsList\n  readonly aniMixer:THREE.AnimationMixer\n  readonly uuid:string\n  \n  currentAction:THREE.AnimationAction = null\n\n  get name():string { return this.model.name || this.model.uuid }\n\n  constructor( public model:THREE.Object3D, animations:THREE.AnimationClip[] ) \n  {\n    this.props = this.findAllProps( model )\n    this.anims = new AnimationsList( animations )\n    this.aniMixer = new THREE.AnimationMixer( model )\n\n    this.uuid = model.uuid\n\n    const animationsUserData = model.userData.animationsUserData\n    if ( animationsUserData )\n      animations.forEach( (clip,i) => \n        this.anims.setUserData( clip, animationsUserData[ i ] ) )\n  }\n\n  makeUserData() {\n    return {\n      animationsUserData : \n        this.anims.toArray().map( clip => this.anims.getUserData( clip ) )\n    }\n  }\n\n  findAllProps( model:THREE.Object3D )\n  {\n    let results:PropsList = new PropsList()\n\n    function traverseChildren( o:THREE.Object3D ) {\n      let push = false \n      let hasChildren = o.children && !! o.children.filter(c=>c.type!==\"Bone\").length\n      push = push || ( ( o.type === \"Object3D\" || o.type === \"Group\" ) && hasChildren )\n      push = push || o.type === \"Mesh\"\n      push = push && ! o.userData.isHolster\n      push = push && o !== model\n  \n      if ( push )\n        results.add( o )\n      else \n      if ( o.children )\n        o.children.forEach( (child:THREE.Object3D) => traverseChildren( child ) )\n    }\n  \n    traverseChildren( model )\n\n    return results\n  }\n\n  /// /// ///\n  \n  findAllChildren( func:(child:THREE.Object3D)=>boolean ) {\n    let results:THREE.Object3D[] = []\n    this.model.traverse( child => func( child ) ? results.push( child ) : null )\n    return results\n  }\n\n  setHidden( object:THREE.Object3D, hidden:boolean )\n  {\n    hidden = hidden !== undefined ? hidden : ! object.visible\n    object.userData.hidden = hidden\n    object.visible = ! hidden\n    context.data.dirty = true\n  }\n  \n  playDefaultAnimation() {\n    let idle_anim = this.anims.find( a => a.name === \"idle\" ) ||\n                    this.anims.find( a => a.name.toLowerCase().indexOf( \"idle\" ) > -1 )\n    if ( idle_anim )\n      this.play( idle_anim )\n  }\n  \n  play( clip:THREE.AnimationClip ) {\n    this.aniMixer.stopAllAction()\n    this.aniMixer.uncacheClip( clip )\n    this.currentAction = this.aniMixer.clipAction( clip )\n    this.currentAction.setLoop( THREE.LoopRepeat, undefined )\n    this.currentAction.enabled = true\n    this.currentAction.weight = 1.0\n    this.currentAction.play()\n\n    if ( context.character === this )\n      context.events.dispatch( Events.ANIMATION_PLAY, this.currentAction )\n  }\n}\n\nexport class UniqueItemsList<T> extends Set<T>\n{\n  get length():number { return this.size }\n\n  getByUuid( uuid:string ) { \n    for ( let item of this )\n      if ( (<any>item).uuid === uuid )\n        return item\n    return null\n  }\n\n  map( func:Function ) { \n    return Array.from(this).map( (v,i,a)=>func(v,i,a) )\n  }\n\n  find( func:(o:T)=>boolean ) { \n    for ( let item of this )\n      if ( func( item ) )\n        return item\n    return null\n  }\n\n  addAll( ...items:T[] ):void {\n    items.forEach( item => this.add( item ) )\n  }\n\n  add( item:T) {\n    context.data.dirty = true\n    return super.add( item )\n  }\n\n  deleteAll( ...props:T[] ):void {\n    props.forEach( item => this.delete( item ) )\n  }\n\n  delete( item:T ):boolean {\n    context.data.dirty = true\n    return super.delete( item )\n  }\n\n  toArray():T[] { return Array.from( this ) }\n}\n\nclass AnimationUserData\n{\n  fadeTimes:[number,number]\n  eventTimes:number[]\n  // get events():{time:number}[] { return this.eventTimes.map( time => { return { time : time } } ) }\n  // events:{time:number}[]\n  constructor( clip:THREE.AnimationClip, data?:any ) {\n    this.fadeTimes = [ 0.0 , clip.duration ]\n    this.eventTimes = [ ]\n\n    if ( data ) {\n      this.fadeTimes[ 0 ] = data.fadeTimes[ 0 ]\n      this.fadeTimes[ 1 ] = data.fadeTimes[ 1 ]\n      this.eventTimes.push( ...data.eventTimes )\n    }\n\n    // this.events = [ ]\n  }\n  addEvent( time:number ) {\n    this.eventTimes.push( time )\n    this.eventTimes.sort()\n    // this.events.push( { time : time } )\n  }\n}\nexport class AnimationsList extends UniqueItemsList<THREE.AnimationClip>\n{\n  userDatas:{ [uuid:string] : AnimationUserData } = {}\n\n  getUserData( clip:THREE.AnimationClip ):AnimationUserData {\n    if ( this.userDatas[ clip.uuid ] === undefined ) {\n      this.userDatas[ clip.uuid ] = new AnimationUserData( clip )\n    }\n    return this.userDatas[ clip.uuid ]\n  }\n  setUserData( clip:THREE.AnimationClip, data:any ):void {\n    this.userDatas[ clip.uuid ] = new AnimationUserData( clip, data )\n  }\n\n  add( item:THREE.AnimationClip ) {\n    let i = 0, originalName = item.name\n    while ( this.find( a => a.name === item.name ) )\n      item.name = `${originalName}-${++i}`\n    return super.add( item )\n  }\n\n  duplicate( clip:THREE.AnimationClip ):THREE.AnimationClip {\n    /// @ts-ignore\n    let clone = clip.clone()\n    this.add( clone )\n    return clone\n  }\n}\n\nexport class PropsList extends UniqueItemsList<THREE.Object3D>\n{\n  duplicate( prop:THREE.Object3D ):THREE.Object3D {\n    let clone = prop.clone()\n    prop.parent.add( clone )\n    this.add( clone )\n    return clone\n  }\n\n  delete( prop:THREE.Object3D ):boolean {\n    prop.parent.remove( prop )\n    return super.delete( prop )\n  }\n}","import { Injectable } from '@angular/core'\nimport * as THREE from \"three\"\nimport { context, Events, Character } from '../services/main.service'\n\nconst DEFAULT_RIG = 2 /// 0 1 2\n\nconst textureLoader = new THREE.TextureLoader()\n\nexport const studioRigConfigurations = [\n  {\n    name : \"default\",\n    colors : {\n      background : 0x224477,\n      grid_a : 0x99CCFF,\n      grid_b : 0x4466CC,\n    } ,\n    lights : {\n      ambient : [\n        { color : 0xffffff, intensity : .60 } \n      ] ,\n      directional : [\n        { color : 0xffffff, intensity : .50, position : [-1, 0, 0 ] } ,\n        { color : 0xffffff, intensity : .75, position : [ 1, 1, 1 ] } ,\n        { color : 0xffffff, intensity : .50, position : [ 0, 0,-1 ] } ,\n      ] ,\n    } ,\n  } ,\n  {\n    name : \"in-gamish\",\n    colors : {\n      background : 0x3a7f41,\n      grid_a : 0xFFFF41,\n      grid_b : 0x5a9f61,\n    } ,\n    lights : {\n      ambient : [\n        { color : 0xffffff, intensity : 0.70 }\n      ] ,\n      directional : [\n        { color : 0xffffff, intensity : .40, position : [-1, 0,-1 ] } ,\n        { color : 0xffffff, intensity : .70, position : [ 1, 1, 1 ] } ,\n      ] ,\n    } ,\n  } ,\n  {\n    name : \"dark\",\n    colors : {\n      background : 0x1A1A1A,\n      grid_a : 0x404040,\n      grid_b : 0x303030,\n    } ,\n    lights : {\n      ambient : [\n        { color : 0xffffff, intensity : .50 } \n      ] ,\n      directional : [\n        { color : 0xffffff, intensity : .50, position : [-1, 0, 0 ] } ,\n        { color : 0xffffff, intensity : .75, position : [ 1, 1, 1 ] } ,\n        { color : 0xffffff, intensity : .50, position : [ 0, 0,-1 ] } ,\n      ] ,\n    } ,\n  } ,\n]\n\n@Injectable({ providedIn: 'root' })\nexport class SceneService\n{\n  scene = new THREE.Scene()\n  rig = new StudioRig()\n  rigConfigurations = studioRigConfigurations\n\n  platforms:{[character_uuid:string]:THREE.Group} = {}\n\n  isLoading:boolean = true //// directly use loader.busy\n\n  initialize() \n  {\n    this.scene.add( this.rig )\n    this.rig.initialize( studioRigConfigurations[ DEFAULT_RIG ], this.scene )\n\n    context.events.subscribe( Events.ADD_CHARACTER, (character:Character) => {\n      let platform = this.platforms[ character.uuid ] = new THREE.Group()\n      platform.add( character.model )\n      platform.position.x = context.characters.length - 1\n      this.scene.add( platform )\n    } )\n\n    this.isLoading = false\n  }\n\n  setupRig( config ) {\n    this.rig.initialize( config, this.scene )\n  }\n}\n\nclass StudioRig extends THREE.Group\n{\n  configuration\n  grid:THREE.GridHelper\n  envMap:THREE.Texture\n\n  initialize( configuration, scene:THREE.Scene ) {\n    this.configuration = configuration\n\n    while( this.children.length > 0 )\n      this.remove( this.children[ 0 ] )\n\n    scene.background = new THREE.Color( configuration.colors.background )\n\n    configuration.lights.ambient.forEach( ( c, i ) => {\n      let light = new THREE.AmbientLight( c.color, c.intensity )\n      light.name = \"Light (ambient) \" + i\n      this.add( light )\n    } )\n\n    configuration.lights.directional.forEach( ( c, i ) => {\n      let light = new THREE.DirectionalLight( c.color, c.intensity )\n      light.position.set( c.position[0], c.position[1], c.position[2] ).setLength(20)\n      light.lookAt( new THREE.Vector3( 0,0,0 ) )\n      light.name = \"Light (directional) \" + i\n      this.add( light )\n    } )\n\n    this.grid = new THREE.GridHelper( 20, 20, \n                    configuration.colors.grid_a, \n                    configuration.colors.grid_b )\n    this.add( this.grid )\n\n    this.envMap = textureLoader.load( \"assets/images/metal-5.png\" )\n    this.envMap.mapping = THREE.SphericalReflectionMapping\n    this.envMap.encoding = THREE.sRGBEncoding\n\n    // this.envMap = textureLoader.load( \"assets/shitroom.jpg\" )\n    // this.envMap.mapping = THREE.EquirectangularReflectionMapping;\n    // this.envMap.magFilter = THREE.LinearFilter;\n    // this.envMap.minFilter = THREE.LinearMipmapLinearFilter;\n    // this.envMap.encoding = THREE.sRGBEncoding\n  }\n}","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import 'hammerjs';\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}