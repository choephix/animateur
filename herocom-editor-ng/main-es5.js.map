{"version":3,"sources":["main-es5.js","webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.html","webpack:///src/app/components/animation-bar.component.html","webpack:///src/app/components/explorer.component.html","webpack:///src/app/components/statusbar.component.html","webpack:///src/app/components/toolbar.component.html","webpack:///src/app/components/viewport.component.html","webpack:///node_modules/tslib/tslib.es6.js","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/common/tab.component.ts","webpack:///src/app/common/tabs.component.ts","webpack:///src/app/components/animation-bar.component.css","webpack:///src/app/components/animation-bar.component.ts","webpack:///src/app/components/explorer.component.ts","webpack:///src/app/components/statusbar.component.ts","webpack:///src/app/components/toolbar.component.ts","webpack:///src/app/components/viewport.component.ts","webpack:///src/app/services/exportor.service.ts","webpack:///src/app/services/loador.service.ts","webpack:///src/app/services/main.service.ts","webpack:///src/app/services/scener.service.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":[],"mappings":"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","file":"x","sourcesContent":["(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[\"main\"],{\n\n/***/ \"./$$_lazy_route_resource lazy recursive\":\n/*!******************************************************!*\\\n  !*** ./$$_lazy_route_resource lazy namespace object ***!\n  \\******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nfunction webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html\":\n/*!**************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html ***!\n  \\**************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<main id=\\\"pageMain\\\">\\n  <div class=\\\"panes\\\">\\n    <app-toolbar id=\\\"panel-toolbar\\\" class=\\\"toolbar-vertical\\\"></app-toolbar>\\n    <app-explorer class=\\\"pane\\\" *ngIf=\\\"!! context.viewMode && context.characters.length\\\">\\n      \\n    </app-explorer>\\n    <div class=\\\"middle-pane\\\">\\n      <app-viewport id=\\\"viewport\\\"></app-viewport>\\n      <app-animation-bar id=\\\"animation-bar\\\" class=\\\"bar-horizontal\\\" *ngIf=\\\"context.characters.length\\\"\\n                         [hidden]=\\\"!context.character||!context.character.currentAction\\\"></app-animation-bar>\\n    </div>\\n  </div>\\n  <!-- <app-statusbar></app-statusbar> -->\\n</main>\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/animation-bar.component.html\":\n/*!***********************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/components/animation-bar.component.html ***!\n  \\***********************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n\\n<div class=\\\"buttons-bar\\\">\\n  <button class=\\\"button-play\\\" (click)=\\\"togglePause()\\\">▶</button>\\n  <!-- <button (click)=\\\"addEvent()\\\">Add Event Yo!</button> -->\\n  <!-- <div class=\\\"filler\\\"><span class=\\\"timer\\\"></span></div> -->\\n</div>\\n<div class=\\\"sliders\\\">\\n  <br/>\\n  <nouislider id=\\\"slider-events\\\" [config]=\\\"sliderConfig.events\\\" #SliderEvents\\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.events\\\"\\n              (slide)=\\\"handlers.change_events($event)\\\"\\n              [hidden]=\\\"!action.hasEvents\\\"\\n              ></nouislider>\\n  <nouislider id=\\\"slider-weight\\\" [config]=\\\"sliderConfig.weight\\\"\\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.weight\\\"\\n              ></nouislider>\\n  <nouislider id=\\\"slider-play\\\"   [config]=\\\"sliderConfig.play\\\"   \\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.time\\\"\\n              (slide)=\\\"handlers.change_play($event)\\\"\\n              ></nouislider>\\n  <br/>\\n</div>\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/explorer.component.html\":\n/*!******************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/components/explorer.component.html ***!\n  \\******************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<!-- CHARACTERS -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'characters'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>Current Characters</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let c of context.characters\\\" attr.uuid=\\\"{{c.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.character === c\\\"\\n      (click)=\\\"main.focusOnCharacter( c )\\\">{{c.name}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- OVERVIEW -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'overview'\\\">\\n  <div id=\\\"subpanel-properties\\\" class=\\\"subpanel\\\">\\n    <header><h3>Selection</h3></header>\\n    <div class=\\\"contents\\\">\\n      <br />\\n      <input id=\\\"field-name\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.name\\\"/>\\n      <div class=\\\"i-vector-row position\\\">\\n        <input id=\\\"field-position-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.x\\\" />\\n        <input id=\\\"field-position-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.y\\\" />\\n        <input id=\\\"field-position-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.z\\\" />\\n      </div>\\n      <div class=\\\"i-vector-row rotation\\\">\\n        <input id=\\\"field-rotation-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.x\\\" />\\n        <input id=\\\"field-rotation-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.y\\\" />\\n        <input id=\\\"field-rotation-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.z\\\" />\\n      </div>\\n      <div class=\\\"i-vector-row scale linked\\\">\\n        <input id=\\\"field-scale-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.x\\\" />\\n        <input id=\\\"field-scale-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.y\\\" />\\n        <input id=\\\"field-scale-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.z\\\" />\\n      </div>\\n      <br/>\\n    </div>\\n  </div>\\n  <div id=\\\"subpanel-nodes\\\" class=\\\"subpanel\\\">\\n    <header><h3>Model</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.model.children\\\"\\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      (click)=\\\"select(o,'node')\\\">{{o.name||o.uuid}}</li>\\n    </ul>\\n  </div>\\n  <div id=\\\"subpanel-props\\\" class=\\\"subpanel\\\" *ngIf=\\\"context.character\\\">\\n    <header><h3>Props</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.props\\\" \\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      [hidden]=\\\"o.userData.hidden\\\"\\n      (click)=\\\"select(o,'prop')\\\"><a>{{o.name||o.uuid}}</a></li>\\n    </ul>\\n  </div>\\n  <div id=\\\"subpanel-anims\\\" class=\\\"subpanel\\\" *ngIf=\\\"context.character\\\">\\n    <header><h3>Animations</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.anims\\\" \\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      (click)=\\\"select(o,'anim')\\\">{{o.name||o.uuid}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- NODES -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'nodes'\\\">\\n  <header><h3>Model Nodes</h3></header>\\n  <tree [tree]=\\\"tree_sceneNodes\\\" \\n        (nodeSelected)=\\\"tree_sceneNodes.onNodeSelected($event)\\\"\\n        #tree__sceneNodes>\\n  </tree>\\n</div>\\n\\n<!-- BONES -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'bones'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>My Bones</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let bone of allBones\\\" attr.uuid=\\\"{{bone.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.selection.last === bone\\\"\\n      (click)=\\\"select(bone,'node')\\\">{{bone.name}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- ANIMATIONS -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'animations'\\\">\\n</div>\\n\\n<!-- MATERIALING -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'materials'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>All Materials</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let m of allMaterials\\\" attr.uuid=\\\"{{m.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.selection.last === m\\\"\\n      (click)=\\\"select(m,'mat')\\\">{{m.name||m.uuid}}</li>\\n    </ul>\\n  </div>\\n  <div class=\\\"filler\\\"></div>\\n  <div class=\\\"subpanel\\\" *ngIf=\\\"!! material\\\">\\n    <header><h3> {{ material.name || material.uuid }} </h3></header>\\n    <br/>\\n    <nouislider id=\\\"slider-roughness\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.roughness\\\"\\n    ></nouislider>\\n    <br/>\\n    <nouislider id=\\\"slider-metalness\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.metalness\\\"\\n    ></nouislider>\\n    <br/>\\n    <nouislider id=\\\"slider-envMapIntensity\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.envMapIntensity\\\"\\n    ></nouislider>\\n    <br/>\\n  </div>\\n</div>\\n\\n<!-- STUDIO -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'studio'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>Select Studio Rig</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let config of scener.rigConfigurations\\\"\\n      class=\\\"list-item\\\" [class.selected]=\\\"scener.rig.configuration === config\\\"\\n      (click)=\\\"scener.setupRig( config )\\\">{{config.name}}</li>\\n    </ul>\\n  </div>\\n</div>\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/statusbar.component.html\":\n/*!*******************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/components/statusbar.component.html ***!\n  \\*******************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<!-- <b>Characters: </b> -->\\n<a *ngFor=\\\"let c of context.characters\\\" (click)=\\\"main.focusOnCharacter( c )\\\"> •   {{c.name}}   • </a>\\n\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/toolbar.component.html\":\n/*!*****************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/components/toolbar.component.html ***!\n  \\*****************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"top\\\">\\n  <button *ngFor=\\\"let b of buttons\\\" title=\\\"{{b.name}}\\\" [class.selected]=\\\"context.viewMode===b.viewMode\\\"\\n    (click)=\\\"selectViewMode(b.viewMode)\\\">\\n    <i class=\\\"material-icons\\\">{{b.icon}}</i>\\n  </button>\\n</div>\\n<div class=\\\"filler\\\"></div>\\n<div class=\\\"bottom\\\">\\n  <!-- <button onclick=\\\"location.reload()\\\"><i class=\\\"material-icons\\\">autorenew</i></button> -->\\n  <button class=\\\"options-menu\\\"><i class=\\\"material-icons\\\">menu</i></button>\\n</div>\");\n\n/***/ }),\n\n/***/ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/viewport.component.html\":\n/*!******************************************************************************************!*\\\n  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/components/viewport.component.html ***!\n  \\******************************************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"contents\\\">\\n  <canvas id=\\\"webgl-canvas\\\" [hidden]=\\\"!context.character\\\"></canvas>\\n  <div [hidden]=\\\"context.character\\\">Drag files here</div>\\n  <div class=\\\"overlay overlay-top-right\\\">\\n    <button class=\\\"transform position\\\">✣&#xFE0E;</button>\\n    <button class=\\\"transform rotation\\\">↺&#xFE0E;</button>\\n    <button class=\\\"transform scale\\\">■&#xFE0E;</button>\\n    <button class=\\\"transform space\\\">🌐&#xFE0E;</button>\\n  </div>\\n  <!-- <div class=\\\"overlay overlay-top-left\\\"> -->\\n  <div class=\\\"overlay overlay-bottom-right\\\">\\n    <!-- <button class=\\\"select-character\\\">💀&#xFE0E;</button> -->\\n  </div>\\n  <div class=\\\"loading\\\" *ngIf=\\\"loador.isBusy\\\"><h1>Loading</h1></div>\\n  <div class=\\\"exporting\\\" *ngIf=\\\"exportor.isBusy\\\"><h1>Exporting...</h1></div>\\n</div>\");\n\n/***/ }),\n\n/***/ \"./node_modules/tslib/tslib.es6.js\":\n/*!*****************************************!*\\\n  !*** ./node_modules/tslib/tslib.es6.js ***!\n  \\*****************************************/\n/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__extends\", function() { return __extends; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__assign\", function() { return __assign; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__rest\", function() { return __rest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__decorate\", function() { return __decorate; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__param\", function() { return __param; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__metadata\", function() { return __metadata; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__awaiter\", function() { return __awaiter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__generator\", function() { return __generator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__exportStar\", function() { return __exportStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__values\", function() { return __values; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__read\", function() { return __read; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spread\", function() { return __spread; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__spreadArrays\", function() { return __spreadArrays; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__await\", function() { return __await; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncGenerator\", function() { return __asyncGenerator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncDelegator\", function() { return __asyncDelegator; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__asyncValues\", function() { return __asyncValues; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__makeTemplateObject\", function() { return __makeTemplateObject; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importStar\", function() { return __importStar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__importDefault\", function() { return __importDefault; });\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\n\n/***/ }),\n\n/***/ \"./src/app/app.component.ts\":\n/*!**********************************!*\\\n  !*** ./src/app/app.component.ts ***!\n  \\**********************************/\n/*! exports provided: AppComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppComponent\", function() { return AppComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_loador_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services/loador.service */ \"./src/app/services/loador.service.ts\");\n/* harmony import */ var _services_scener_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/scener.service */ \"./src/app/services/scener.service.ts\");\n/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/main.service */ \"./src/app/services/main.service.ts\");\n/* harmony import */ var stats_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! stats-js */ \"./node_modules/stats-js/build/stats.min.js\");\n/* harmony import */ var stats_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(stats_js__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nlet AppComponent = class AppComponent {\n    constructor(main, loador, scener) {\n        this.main = main;\n        this.loador = loador;\n        this.scener = scener;\n        this.context = _services_main_service__WEBPACK_IMPORTED_MODULE_4__[\"context\"];\n    }\n    ngOnInit() {\n        this.main.initialize();\n        this.scener.initialize();\n        this.loador.makeDropField('viewport', this.loador.fileResolvers.characters, (...rest) => this.onCharactersLoaded(...rest));\n        ///\n        // new DropField( document.getElementById('subpanel-nodes') ).resolver( fileResolvers.model ).loaded( onCharacterLoaded )\n        // new DropField( document.getElementById('subpanel-props') ).resolver( fileResolvers.props ).loaded( onPropLoaded )\n        // new DropField( document.getElementById('subpanel-anims') ).resolver( fileResolvers.anims ).loaded( onAnimationsLoaded )\n        //this.loador.loadZipFromLocalStorage( ( ...rest:any ) => this.onCharactersLoaded( ...rest ) )\n        this.loador.loadFromUrl(\"/assets/examples/glb/hero-shield.glb\").then((c) => this.onCharactersLoaded(new _services_main_service__WEBPACK_IMPORTED_MODULE_4__[\"Character\"](c.scene, c.animations)));\n        const SHOW_STATS = false;\n        if (SHOW_STATS) {\n            var stats = new stats_js__WEBPACK_IMPORTED_MODULE_5___default.a();\n            stats.showPanel(1); // 0: fps, 1: ms, 2: mb, 3+: custom\n            stats.dom.style.setProperty(\"left\", \"unset\");\n            stats.dom.style.setProperty(\"right\", \"48px\");\n            document.body.appendChild(stats.dom);\n            function animate() {\n                stats.end();\n                stats.begin();\n                requestAnimationFrame(animate);\n            }\n            requestAnimationFrame(animate);\n        }\n        /// @ts-ignore\n        window.app = this;\n        window.context = _services_main_service__WEBPACK_IMPORTED_MODULE_4__[\"context\"];\n    }\n    onCharactersLoaded(...characters) {\n        characters.forEach(character => {\n            console.log(character);\n            this.main.addCharacter(character);\n            character.playDefaultAnimation();\n            // this.extractColors( character.model )\n        });\n        this.main.focusOnCharacter(characters[0]);\n    }\n};\nAppComponent.ctorParameters = () => [\n    { type: _services_main_service__WEBPACK_IMPORTED_MODULE_4__[\"MainService\"] },\n    { type: _services_loador_service__WEBPACK_IMPORTED_MODULE_2__[\"LoadorService\"] },\n    { type: _services_scener_service__WEBPACK_IMPORTED_MODULE_3__[\"SceneService\"] }\n];\nAppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({ selector: 'app-root', template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./app.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html\")).default })\n], AppComponent);\n\nArray.prototype.toSet = function () { return new Set(this); };\nArray.prototype.mapToObject = function (func) {\n    const result = {};\n    this.forEach((o, i) => {\n        let r = func(o, i);\n        let [key, value] = Array.isArray(r) ? [r[0], r[1]] : [r, o];\n        result[key] = value;\n    });\n    return result;\n};\n\n\n/***/ }),\n\n/***/ \"./src/app/app.module.ts\":\n/*!*******************************!*\\\n  !*** ./src/app/app.module.ts ***!\n  \\*******************************/\n/*! exports provided: AppModule */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppModule\", function() { return AppModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ \"./node_modules/@angular/platform-browser/fesm2015/platform-browser.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ \"./node_modules/@angular/forms/fesm2015/forms.js\");\n/* harmony import */ var ng2_nouislider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ng2-nouislider */ \"./node_modules/ng2-nouislider/ng2-nouislider.js\");\n/* harmony import */ var ng2_tree__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ng2-tree */ \"./node_modules/ng2-tree/index.js\");\n/* harmony import */ var ng2_tree__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ng2_tree__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _common_tabs_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common/tabs.component */ \"./src/app/common/tabs.component.ts\");\n/* harmony import */ var _common_tab_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./common/tab.component */ \"./src/app/common/tab.component.ts\");\n/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./app.component */ \"./src/app/app.component.ts\");\n/* harmony import */ var _components_viewport_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/viewport.component */ \"./src/app/components/viewport.component.ts\");\n/* harmony import */ var _components_animation_bar_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./components/animation-bar.component */ \"./src/app/components/animation-bar.component.ts\");\n/* harmony import */ var _components_explorer_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/explorer.component */ \"./src/app/components/explorer.component.ts\");\n/* harmony import */ var _components_toolbar_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/toolbar.component */ \"./src/app/components/toolbar.component.ts\");\n/* harmony import */ var _components_statusbar_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/statusbar.component */ \"./src/app/components/statusbar.component.ts\");\n/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/platform-browser/animations */ \"./node_modules/@angular/platform-browser/fesm2015/animations.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet AppModule = class AppModule {\n};\nAppModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__[\"NgModule\"])({\n        declarations: [\n            _app_component__WEBPACK_IMPORTED_MODULE_8__[\"AppComponent\"],\n            _components_viewport_component__WEBPACK_IMPORTED_MODULE_9__[\"ViewportComponent\"],\n            _components_animation_bar_component__WEBPACK_IMPORTED_MODULE_10__[\"AnimationBarComponent\"],\n            _components_explorer_component__WEBPACK_IMPORTED_MODULE_11__[\"ExplorerComponent\"],\n            _components_toolbar_component__WEBPACK_IMPORTED_MODULE_12__[\"ToolbarComponent\"],\n            _common_tabs_component__WEBPACK_IMPORTED_MODULE_6__[\"TabsComponent\"],\n            _common_tab_component__WEBPACK_IMPORTED_MODULE_7__[\"TabComponent\"],\n            _components_statusbar_component__WEBPACK_IMPORTED_MODULE_13__[\"StatusbarComponent\"]\n        ],\n        imports: [\n            _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__[\"BrowserModule\"],\n            _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_14__[\"BrowserAnimationsModule\"],\n            _angular_forms__WEBPACK_IMPORTED_MODULE_3__[\"FormsModule\"],\n            ng2_nouislider__WEBPACK_IMPORTED_MODULE_4__[\"NouisliderModule\"],\n            ng2_tree__WEBPACK_IMPORTED_MODULE_5__[\"TreeModule\"]\n        ],\n        providers: [],\n        bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_8__[\"AppComponent\"]]\n    })\n], AppModule);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/common/tab.component.ts\":\n/*!*****************************************!*\\\n  !*** ./src/app/common/tab.component.ts ***!\n  \\*****************************************/\n/*! exports provided: TabComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TabComponent\", function() { return TabComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/**\n * A single tab page. It renders the passed template\n * via the @Input properties by using the ngTemplateOutlet\n * and ngTemplateOutletContext directives.\n */\n\n\nlet TabComponent = class TabComponent {\n    constructor() {\n        this.active = false;\n    }\n};\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Input\"])('tabTitle')\n], TabComponent.prototype, \"title\", void 0);\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Input\"])()\n], TabComponent.prototype, \"active\", void 0);\nTabComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'my-tab',\n        template: `\n    <div [hidden]=\"!active\" class=\"pane\">\n      <ng-content></ng-content>\n    </div>\n  `,\n        styles: [\"\\n    .pane{\\n      // padding: 1em;\\n    }\\n  \"]\n    })\n], TabComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/common/tabs.component.ts\":\n/*!******************************************!*\\\n  !*** ./src/app/common/tabs.component.ts ***!\n  \\******************************************/\n/*! exports provided: TabsComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TabsComponent\", function() { return TabsComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _tab_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tab.component */ \"./src/app/common/tab.component.ts\");\n/**\n * The main component that renders single TabComponent\n * instances.\n */\n\n\n\n// import { DynamicTabsDirective } from './dynamic-tabs.directive';\nlet TabsComponent = class TabsComponent {\n    // contentChildren are set\n    ngAfterContentInit() {\n        // get all active tabs\n        let activeTabs = this.tabs.filter((tab) => tab.active);\n        // if there is no active tab set, activate the first\n        if (activeTabs.length === 0) {\n            this.selectTab(this.tabs.first);\n        }\n    }\n    selectTab(target_tab) {\n        this.tabs.toArray().forEach(tab => tab.active = tab === target_tab);\n    }\n};\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ContentChildren\"])(_tab_component__WEBPACK_IMPORTED_MODULE_2__[\"TabComponent\"])\n], TabsComponent.prototype, \"tabs\", void 0);\nTabsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'my-tabs',\n        template: `\n    <ul class=\"nav nav-tabs\">\n      <li *ngFor=\"let tab of tabs\" (click)=\"selectTab(tab)\" [class.active]=\"tab.active\">\n        <a href=\"#\">{{tab.title}}</a>\n      </li>\n    </ul>\n    <ng-content></ng-content>\n  `,\n        styles: [\"\\n    .tab-close {\\n      color: gray;\\n      text-align: right;\\n      cursor: pointer;\\n    }\\n    \"]\n    })\n], TabsComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/components/animation-bar.component.css\":\n/*!********************************************************!*\\\n  !*** ./src/app/components/animation-bar.component.css ***!\n  \\********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvYW5pbWF0aW9uLWJhci5jb21wb25lbnQuY3NzIn0= */\");\n\n/***/ }),\n\n/***/ \"./src/app/components/animation-bar.component.ts\":\n/*!*******************************************************!*\\\n  !*** ./src/app/components/animation-bar.component.ts ***!\n  \\*******************************************************/\n/*! exports provided: AnimationBarComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AnimationBarComponent\", function() { return AnimationBarComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/main.service */ \"./src/app/services/main.service.ts\");\n/* harmony import */ var ng2_nouislider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng2-nouislider */ \"./node_modules/ng2-nouislider/ng2-nouislider.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst FRAME_TIME = 1.000 / 30;\nlet AnimationBarComponent = class AnimationBarComponent {\n    constructor() {\n        this.sliderConfig = {\n            events: {\n                step: FRAME_TIME,\n                connect: false,\n                animate: false,\n                behaviour: 'unconstrained-tap-snap',\n                // tooltips: true,\n                tooltips: [\n                    { to: () => \"1\" },\n                    { to: () => \"2\" },\n                    { to: () => \"3\" },\n                    { to: () => \"4\" },\n                    { to: () => \"5\" },\n                    { to: () => \"6\" },\n                    { to: () => \"7\" },\n                    { to: () => \"8\" },\n                    { to: () => \"9\" },\n                    { to: () => \"10\" },\n                ]\n            },\n            weight: {\n                step: FRAME_TIME,\n                margin: FRAME_TIME,\n                connect: [true, false, true],\n                animate: false,\n                behaviour: 'snap',\n            },\n            play: {\n                step: .001,\n                connect: [true, false],\n                animate: false,\n                behaviour: 'snap',\n            }\n        };\n        this.action = {\n            get clip() {\n                if (!_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character || !_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction)\n                    return null;\n                return _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.getClip();\n            },\n            get userData() {\n                if (!this.clip)\n                    return null;\n                return _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.getUserData(this.clip);\n            },\n            get duration() {\n                if (!_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character || !_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction)\n                    return 1.000;\n                return this.clip.duration;\n            },\n            get hasEvents() {\n                return !!_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character &&\n                    !!_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction &&\n                    !!this.userData.eventTimes.length;\n            },\n            // _events : [.1,.2,.3,.4,.5,.6,.7,.8,.9,1.0] ,\n            events: [11, 12, 13, 14, 15, 16, 17, 18, 19, 20],\n            get weight() {\n                if (!_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character || !_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction)\n                    return [0.000, 0.000];\n                const clip = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.getClip();\n                return _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.getUserData(clip).fadeTimes;\n            },\n            set weight(v) {\n                const clip = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.getClip();\n                const fadeTimes = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.getUserData(clip).fadeTimes;\n                fadeTimes[0] = v[0];\n                fadeTimes[1] = v[1];\n            },\n            get time() {\n                if (!_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character || !_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction)\n                    return 0.000;\n                return _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.time;\n            },\n            set time(v) {\n                if (!_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character || !_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction)\n                    return;\n                // console.log( v )\n                // context.character.currentAction.paused = true\n                // context.character.currentAction.time = v\n            }\n        };\n        this.context = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"];\n        this.handlers = {\n            change_play(value) {\n                // console.log( value )\n                _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.paused = true;\n                _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.time = value;\n            },\n            change_events(values) {\n                const clip = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.getClip();\n                const eventTimes = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.getUserData(clip).eventTimes;\n                eventTimes.forEach((t, i) => eventTimes[i] = values[i]);\n            }\n        };\n    }\n    ngOnInit() {\n        ///@ts-ignore\n        window.ani = this;\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].events.subscribe(_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"Events\"].CHANGE_SELECTION, selection => {\n            if (selection.type === \"anim\") {\n                _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.play(selection.last);\n            }\n        });\n        /// @ts-ignore\n        jquery__WEBPACK_IMPORTED_MODULE_4__[\"contextMenu\"]({\n            selector: 'div.sliders',\n            animation: { duration: 100, show: 'fadeIn', hide: 'fadeOut' },\n            items: [\n                { name: \"Add Event\", icon: \"star\", callback: () => this.addEvent() },\n                { name: \"Create animation from first frame\", icon: \"flash\", callback: () => {\n                        /// @ts-ignore\n                        let a = this.action.clip.clone();\n                        a.tracks.forEach(t => {\n                            t.times = [0];\n                            t.values = t.values.slice(0, t.name.endsWith(\".quaternion\") ? 4 : 3);\n                        });\n                        a.name += \"-start-pose\";\n                        a.duration = 0.000;\n                        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.add(a);\n                    } },\n                { name: \"Create animation from first frame\", icon: \"flash\", callback: () => {\n                        /// @ts-ignore\n                        let a = this.action.clip.clone();\n                        a.tracks.forEach(t => {\n                            t.times = [0];\n                            t.values = t.values.slice(t.values.length - (t.name.endsWith(\".quaternion\") ? 4 : 3));\n                        });\n                        a.name += \"-end-pose\";\n                        a.duration = 0.000;\n                        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.add(a);\n                    } },\n            ]\n        });\n        // this.slider_events.slide.subscribe( (...rest) => console.log(rest) )\n        // this.slider_events.slider.on( \"slide\", (...rest) => console.log(rest) )\n        // $(\"#slider-events\").on(\"change\",(...rest) => console.log(rest))\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].events.subscribe(_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"Events\"].ANIMATION_PLAY, () => this.refresh());\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].events.subscribe(_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"Events\"].CHANGE_CHARACTER, () => this.refresh());\n        if (_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character && _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction)\n            this.refresh();\n        this.onFrame();\n    }\n    onFrame() {\n        try {\n            const action = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction;\n            const clip = action.getClip();\n            const udata = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.getUserData(clip);\n            udata.eventTimes.forEach((et, i) => this.action.events[i] = et);\n            const handles = jquery__WEBPACK_IMPORTED_MODULE_4__(\"#slider-events .noUi-handle\").toArray();\n            handles.forEach((o, i) => jquery__WEBPACK_IMPORTED_MODULE_4__(o).toggle(udata.eventTimes[i] !== undefined));\n        }\n        catch (e) { }\n        requestAnimationFrame(() => this.onFrame());\n    }\n    refresh() {\n        const action = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction;\n        const clip = action.getClip();\n        const udata = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.getUserData(clip);\n        udata.eventTimes.forEach((et, i) => this.action.events[i] = et);\n        ///@ts-ignore\n        this.slider_events.writeValue(this.action.events);\n        console.log(udata);\n    }\n    ////\n    togglePause() {\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.paused = !_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.paused;\n    }\n    addEvent() {\n        const clip = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.getClip();\n        const udata = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.getUserData(clip);\n        udata.addEvent(_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.currentAction.time);\n        this.refresh();\n    }\n};\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(ng2_nouislider__WEBPACK_IMPORTED_MODULE_3__[\"NouisliderComponent\"], { static: true })\n], AnimationBarComponent.prototype, \"slider_events\", void 0);\nAnimationBarComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-animation-bar',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./animation-bar.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/animation-bar.component.html\")).default,\n        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! ./animation-bar.component.css */ \"./src/app/components/animation-bar.component.css\")).default]\n    })\n], AnimationBarComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/components/explorer.component.ts\":\n/*!**************************************************!*\\\n  !*** ./src/app/components/explorer.component.ts ***!\n  \\**************************************************/\n/*! exports provided: ExplorerComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ExplorerComponent\", function() { return ExplorerComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/main.service */ \"./src/app/services/main.service.ts\");\n/* harmony import */ var _services_scener_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/scener.service */ \"./src/app/services/scener.service.ts\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var jquery_contextmenu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jquery-contextmenu */ \"./node_modules/jquery-contextmenu/dist/jquery.contextMenu.js\");\n/* harmony import */ var jquery_contextmenu__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jquery_contextmenu__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nconst VECTOR3_NaN = { x: NaN, y: NaN, z: NaN };\nconst boner = {\n    subjects: [],\n    keepWorldMatrix: false,\n    addCurrentSubjectsTo(parentToBe) {\n        const add = subject => this.keepWorldMatrix ? parentToBe.attach(subject) : parentToBe.add(subject);\n        this.subjects.forEach(subject => add(subject));\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].data.dirty = true;\n        return this;\n    },\n    openFor(...subjects) {\n        this.subjects.length = 0;\n        this.subjects.push(...subjects);\n        return this;\n    },\n};\nfunction map_node(o, depth = 0) {\n    return {\n        id: o.uuid,\n        value: o.name || o.uuid,\n        children: o.children.map(child => map_node(child, ++depth))\n    };\n}\nlet ExplorerComponent = class ExplorerComponent {\n    constructor(main, scener) {\n        this.main = main;\n        this.scener = scener;\n        this.context = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"];\n        this.tree_sceneNodes = {\n            value: 'character.model',\n            settings: {\n                static: true,\n                isCollapsedOnInit: false,\n            },\n            loadChildren: function (callback) {\n                callback(_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.model.children.map(o => map_node(o)));\n            },\n            onNodeSelected(e) {\n                const item = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.model.getObjectByProperty(\"uuid\", e.node.id);\n                _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.type = \"node\";\n                _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.last = item;\n                _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.dirty = true;\n                console.log(e);\n            },\n        };\n        //// MATERIALS\n        this.materialSliders = {\n            zeroToOne: { connect: [true, false], animate: false, behaviour: 'snap', },\n        };\n    }\n    ngOnInit() {\n        ///@ts-ignore\n        window.ex = this;\n        // this.setup_keyboardEvents()\n        this.setup_contextMenus();\n        console.log(this.elTree_sceneNodes);\n    }\n    setup_contextMenus() {\n        const animation = { duration: 0, show: 'show', hide: 'hide' };\n        const util = {\n            addChild(parent, name, userData = {}) {\n                let child = new three__WEBPACK_IMPORTED_MODULE_4__[\"Object3D\"]();\n                child.name = name;\n                child.userData = userData;\n                parent.add(child);\n                _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].data.dirty = true;\n            },\n        };\n        /// @ts-ignore\n        jquery__WEBPACK_IMPORTED_MODULE_5__[\"contextMenu\"]({\n            selector: '#subpanel-nodes .list-item',\n            animation: animation,\n            build: function (el, event) {\n                const uuid = el.attr(\"uuid\");\n                const item = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.model.getObjectByProperty(\"uuid\", uuid);\n                return {\n                    callback: action => console.log(action, uuid),\n                    animation: { duration: undefined, show: 'show', hide: 'hide' },\n                    items: {\n                        addChild: {\n                            name: \"Add empty child\", icon: \"add\",\n                            callback: () => util.addChild(item, \"o\")\n                        },\n                        addHolster: {\n                            name: \"Add empty holster\", icon: \"add\",\n                            callback: () => util.addChild(item, \"holster-\" + item.name, { isHolster: true })\n                        },\n                        toggleHolster: {\n                            name: item.userData.isHolster ? \"Untag as holster\" : \"Tag as holster\", icon: \"paste\",\n                            callback: () => item.userData.isHolster = item.userData.isHolster ? undefined : true\n                        },\n                        delete: {\n                            name: \"Delete\", icon: \"delete\",\n                            callback: () => {\n                                item.parent.remove(item);\n                                _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].data.dirty = true;\n                            }\n                        },\n                    }\n                };\n            }\n        });\n        /// @ts-ignore\n        jquery__WEBPACK_IMPORTED_MODULE_5__[\"contextMenu\"]({\n            selector: '#subpanel-props .list-item',\n            animation: animation,\n            build: (el, event) => {\n                const uuid = el.attr(\"uuid\");\n                const targets = [_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.model.getObjectByProperty(\"uuid\", uuid)];\n                const makeItem = (holster, i, keepWorldMatrix) => {\n                    return [\"attachTo_\" + i, {\n                            name: holster.name + (keepWorldMatrix ? \" (keep global matrix)\" : ''),\n                            icon: \"link\",\n                            callback: () => {\n                                boner.keepWorldMatrix = keepWorldMatrix;\n                                boner.openFor(...targets).addCurrentSubjectsTo(holster);\n                            }\n                        }];\n                };\n                return {\n                    items: {\n                        toggleHidden: {\n                            name: targets.length && targets[0].visible ? \"Hide\" : \"Show\", icon: \"eye\",\n                            visible: targets.length === 1,\n                            callback: () => _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.setHidden(targets[0], targets[0].visible)\n                        },\n                        setHiddenTrue: {\n                            name: \"Hide\", icon: \"eye\",\n                            visible: targets.length > 1,\n                            callback: () => targets.forEach(o => _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.setHidden(o, true))\n                        },\n                        setHiddenFalse: {\n                            name: \"Show\", icon: \"eye\",\n                            visible: targets.length > 1,\n                            callback: () => targets.forEach(o => _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.setHidden(o, false))\n                        },\n                        sep1: \"---------\",\n                        attachLocal: {\n                            name: \"Attach to\", icon: \"link\",\n                        },\n                        attachGlobal: {\n                            name: \"Attach to (keep global matrix)\", icon: \"link\",\n                        },\n                        sep2: \"---------\",\n                        addChild: {\n                            name: \"Add hotpoint (empty child)\", icon: \"add\",\n                            // visible: targets.length === 1,\n                            callback: () => targets.forEach(target => util.addChild(target, \"hot-point\"))\n                        },\n                        clone: {\n                            name: \"Clone\", icon: \"copy\",\n                            callback: () => targets.forEach(o => _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.props.duplicate(o))\n                        },\n                        delete: {\n                            name: \"Delete\", icon: \"delete\",\n                            callback: () => _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.props.deleteAll(...targets)\n                        },\n                    }\n                };\n            },\n        });\n        /// @ts-ignore\n        jquery__WEBPACK_IMPORTED_MODULE_5__[\"contextMenu\"]({\n            selector: '#subpanel-anims .list-item',\n            animation: animation,\n            build: function (el, event) {\n                const uuid = el.attr(\"uuid\");\n                const targets = [_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.getByUuid(uuid)];\n                return {\n                    items: {\n                        clone: {\n                            name: \"Clone\", icon: \"copy\",\n                            callback: () => targets.forEach(clip => _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.duplicate(clip))\n                        },\n                        delete: {\n                            name: \"Delete\", icon: \"delete\",\n                            callback: () => _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.anims.deleteAll(...targets)\n                        },\n                    }\n                };\n            },\n        });\n    }\n    //// GENERAL\n    get object() {\n        const fake = { name: '-', position: VECTOR3_NaN, rotation: VECTOR3_NaN, scale: VECTOR3_NaN };\n        if (!_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.last)\n            return fake;\n        if (_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.type === \"anim\")\n            return fake;\n        if (_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.type === \"mat\")\n            return fake;\n        return _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.last;\n    }\n    select(target, selectionType) {\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.all = [target];\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.last = target;\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.type = selectionType;\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.dirty = true;\n    }\n    //// BONES\n    get allBones() {\n        return _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.findAllChildren(o => o.type === \"Bone\");\n    }\n    get material() {\n        return _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.type !== 'mat' ? null : _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].selection.last;\n    }\n    get allMaterials() {\n        let r = new Set();\n        /// @ts-ignore\n        _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].character.model.traverse(o => !o.material ? null : r.add(o.material));\n        return Array.from(r);\n    }\n};\nExplorerComponent.ctorParameters = () => [\n    { type: _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"MainService\"] },\n    { type: _services_scener_service__WEBPACK_IMPORTED_MODULE_3__[\"SceneService\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])('tree__sceneNodes', { static: false })\n], ExplorerComponent.prototype, \"elTree_sceneNodes\", void 0);\nExplorerComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({ selector: 'app-explorer', template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./explorer.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/explorer.component.html\")).default, })\n], ExplorerComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/components/statusbar.component.ts\":\n/*!***************************************************!*\\\n  !*** ./src/app/components/statusbar.component.ts ***!\n  \\***************************************************/\n/*! exports provided: StatusbarComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"StatusbarComponent\", function() { return StatusbarComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/main.service */ \"./src/app/services/main.service.ts\");\n\n\n\nlet StatusbarComponent = class StatusbarComponent {\n    constructor(main) {\n        this.main = main;\n        this.context = _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"];\n    }\n};\nStatusbarComponent.ctorParameters = () => [\n    { type: _services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"MainService\"] }\n];\nStatusbarComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({ selector: 'app-statusbar', template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./statusbar.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/statusbar.component.html\")).default, })\n], StatusbarComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/components/toolbar.component.ts\":\n/*!*************************************************!*\\\n  !*** ./src/app/components/toolbar.component.ts ***!\n  \\*************************************************/\n/*! exports provided: ToolbarComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ToolbarComponent\", function() { return ToolbarComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_exportor_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/exportor.service */ \"./src/app/services/exportor.service.ts\");\n/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/main.service */ \"./src/app/services/main.service.ts\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nlet ToolbarComponent = class ToolbarComponent {\n    constructor(exportor) {\n        this.exportor = exportor;\n        this.context = _services_main_service__WEBPACK_IMPORTED_MODULE_3__[\"context\"];\n        this.buttons = [];\n    }\n    ngOnInit() {\n        this.buttons = [\n            { icon: \"people\", name: \"Characters\", viewMode: \"characters\" },\n            { icon: \"remove_red_eye\", name: \"Overview\", viewMode: \"overview\" },\n            { icon: \"account_tree\", name: \"Nodes\", viewMode: \"nodes\" },\n            { icon: \"accessibility\", name: \"Bones\", viewMode: \"bones\" },\n            { icon: \"playlist_play\", name: \"Animations\", viewMode: \"animations\" },\n            { icon: \"format_paint\", name: \"Materials\", viewMode: \"materials\" },\n            { icon: \"camera\", name: \"Studio Rigs\", viewMode: \"studio\" },\n        ];\n        /// @ts-ignore\n        jquery__WEBPACK_IMPORTED_MODULE_4__[\"contextMenu\"]({\n            selector: 'button.options-menu',\n            trigger: \"left\",\n            animation: { duration: 100, show: 'fadeIn', hide: 'fadeOut' },\n            items: [\n                // { name : \"xxxx\", icon: \"eye\", \n                //   callback : () => null } , \n                { name: \"Download GLTF (text)\", icon: \"disk-a\",\n                    callback: () => this.exportor.saveZip(false, \"download\") },\n                { name: \"Download GLB (binary)\", icon: \"disk-b\",\n                    callback: () => this.exportor.saveZip(true, \"download\") },\n                { name: \"Save to browser's localStorage\", icon: \"disk-c\",\n                    callback: () => this.exportor.saveZip(true, \"storage\") },\n                { name: \"Clear Local Storage\", icon: \"clear\",\n                    callback: () => { localStorage.removeItem(\"zip\"); } },\n                { name: \"Upload to Firebase (wip)\", icon: \"fire\",\n                    callback: () => this.exportor.saveZip(true, \"firebase\") },\n            ]\n        });\n    }\n    selectViewMode(viewMode) {\n        _services_main_service__WEBPACK_IMPORTED_MODULE_3__[\"context\"].viewMode = _services_main_service__WEBPACK_IMPORTED_MODULE_3__[\"context\"].viewMode !== viewMode ? viewMode : null;\n    }\n};\nToolbarComponent.ctorParameters = () => [\n    { type: _services_exportor_service__WEBPACK_IMPORTED_MODULE_2__[\"ExportorService\"] }\n];\nToolbarComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({ selector: 'app-toolbar', template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./toolbar.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/toolbar.component.html\")).default, })\n], ToolbarComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/components/viewport.component.ts\":\n/*!**************************************************!*\\\n  !*** ./src/app/components/viewport.component.ts ***!\n  \\**************************************************/\n/*! exports provided: ViewportComponent */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ViewportComponent\", function() { return ViewportComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _services_loador_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/loador.service */ \"./src/app/services/loador.service.ts\");\n/* harmony import */ var _services_scener_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../services/scener.service */ \"./src/app/services/scener.service.ts\");\n/* harmony import */ var three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls */ \"./node_modules/three/examples/jsm/controls/OrbitControls.js\");\n/* harmony import */ var three_examples_jsm_controls_TransformControls__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! three/examples/jsm/controls/TransformControls */ \"./node_modules/three/examples/jsm/controls/TransformControls.js\");\n/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../services/main.service */ \"./src/app/services/main.service.ts\");\n/* harmony import */ var _services_exportor_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../services/exportor.service */ \"./src/app/services/exportor.service.ts\");\n\n\n\n\n\n\n\n\n\n\nlet ViewportComponent = class ViewportComponent {\n    constructor(viewportElem, scener, loador, exportor) {\n        this.viewportElem = viewportElem;\n        this.scener = scener;\n        this.loador = loador;\n        this.exportor = exportor;\n        this.context = _services_main_service__WEBPACK_IMPORTED_MODULE_8__[\"context\"];\n    }\n    ngOnInit() {\n        const canvasElem = document.getElementById(\"webgl-canvas\");\n        this.renderer = new three__WEBPACK_IMPORTED_MODULE_2__[\"WebGLRenderer\"]({ canvas: canvasElem, antialias: true });\n        this.scener.initialize();\n        this.camera = new three__WEBPACK_IMPORTED_MODULE_2__[\"PerspectiveCamera\"](45, window.innerWidth / window.innerHeight, 0.1, 1000);\n        this.camera.position.z = 3;\n        this.camera.position.y = 2;\n        this.camera.lookAt(new three__WEBPACK_IMPORTED_MODULE_2__[\"Vector3\"]());\n        this.orbit = new three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_6__[\"OrbitControls\"](this.camera, canvasElem);\n        this.orbit.target = new three__WEBPACK_IMPORTED_MODULE_2__[\"Vector3\"](0, 1, 0);\n        this.orbit.update();\n        this.orbit.mouseButtons.LEFT = 0;\n        this.orbit.mouseButtons.RIGHT = 2;\n        this.orbit.mouseButtons.MIDDLE = -1;\n        this.orbit.enableKeys = false;\n        this.transformer = new three_examples_jsm_controls_TransformControls__WEBPACK_IMPORTED_MODULE_7__[\"TransformControls\"](this.camera, canvasElem);\n        this.transformer.addEventListener('dragging-changed', event => this.orbit.enabled = !event.value);\n        this.transformer.setSize(0.5);\n        this.transformer.setSpace(\"local\");\n        this.scener.scene.add(this.transformer);\n        _services_main_service__WEBPACK_IMPORTED_MODULE_8__[\"context\"].events.subscribe(_services_main_service__WEBPACK_IMPORTED_MODULE_8__[\"Events\"].CHANGE_CHARACTER, character => {\n            this.scener.rig.position.x =\n                this.camera.position.x =\n                    this.orbit.target.x = this.scener.platforms[character.uuid].position.x;\n            this.orbit.update();\n            this.transformer.detach();\n        });\n        _services_main_service__WEBPACK_IMPORTED_MODULE_8__[\"context\"].events.subscribe(_services_main_service__WEBPACK_IMPORTED_MODULE_8__[\"Events\"].CHANGE_DATA, data => {\n            if (this.transformer.object && !this.transformer.object.parent)\n                this.transformer.detach();\n        });\n        _services_main_service__WEBPACK_IMPORTED_MODULE_8__[\"context\"].events.subscribe(_services_main_service__WEBPACK_IMPORTED_MODULE_8__[\"Events\"].CHANGE_SELECTION, selection => {\n            if (selection.type === \"node\" || selection.type === \"prop\")\n                this.transformer.attach(selection.last);\n            else\n                this.transformer.detach();\n        });\n        jquery__WEBPACK_IMPORTED_MODULE_3__(\"button.transform.position\").click(e => this.transformer.setMode(\"translate\"));\n        jquery__WEBPACK_IMPORTED_MODULE_3__(\"button.transform.rotation\").click(e => this.transformer.setMode(\"rotate\"));\n        jquery__WEBPACK_IMPORTED_MODULE_3__(\"button.transform.scale\").click(e => this.transformer.setMode(\"scale\"));\n        jquery__WEBPACK_IMPORTED_MODULE_3__(\"button.transform.space\").click(e => this.transformer.setSpace(this.transformer.space === \"world\" ? \"local\" : \"world\"));\n        this.onResize();\n        this.animate();\n    }\n    onResize() {\n        let [W, H] = [this.viewportElem.nativeElement.clientWidth, this.viewportElem.nativeElement.clientHeight];\n        this.renderer.setSize(W, H);\n        this.camera.aspect = W / H;\n        this.camera.updateProjectionMatrix();\n    }\n    animate() {\n        this.renderer.render(this.scener.scene, this.camera);\n        requestAnimationFrame(() => this.animate());\n    }\n};\nViewportComponent.ctorParameters = () => [\n    { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"] },\n    { type: _services_scener_service__WEBPACK_IMPORTED_MODULE_5__[\"SceneService\"] },\n    { type: _services_loador_service__WEBPACK_IMPORTED_MODULE_4__[\"LoadorService\"] },\n    { type: _services_exportor_service__WEBPACK_IMPORTED_MODULE_9__[\"ExportorService\"] }\n];\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"HostListener\"])('window:resize', ['$event'])\n], ViewportComponent.prototype, \"onResize\", null);\nViewportComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: 'app-viewport',\n        template: tslib__WEBPACK_IMPORTED_MODULE_0__[\"__importDefault\"](__webpack_require__(/*! raw-loader!./viewport.component.html */ \"./node_modules/raw-loader/dist/cjs.js!./src/app/components/viewport.component.html\")).default,\n    })\n], ViewportComponent);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/services/exportor.service.ts\":\n/*!**********************************************!*\\\n  !*** ./src/app/services/exportor.service.ts ***!\n  \\**********************************************/\n/*! exports provided: ExportDestination, ExportorService */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ExportDestination\", function() { return ExportDestination; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ExportorService\", function() { return ExportorService; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/main.service */ \"./src/app/services/main.service.ts\");\n/* harmony import */ var three_examples_jsm_exporters_GLTFExporter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/exporters/GLTFExporter */ \"./node_modules/three/examples/jsm/exporters/GLTFExporter.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jszip */ \"./node_modules/jszip/dist/jszip.min.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst link = document.createElement('a');\nlink.style.display = 'none';\nconst exporter = new three_examples_jsm_exporters_GLTFExporter__WEBPACK_IMPORTED_MODULE_3__[\"GLTFExporter\"]();\nconst zipper = new jszip__WEBPACK_IMPORTED_MODULE_4__();\nvar ExportDestination;\n(function (ExportDestination) {\n    ExportDestination[ExportDestination[\"Download\"] = 0] = \"Download\";\n    ExportDestination[ExportDestination[\"LocalStorage\"] = 1] = \"LocalStorage\";\n    ExportDestination[ExportDestination[\"Firebase\"] = 2] = \"Firebase\";\n})(ExportDestination || (ExportDestination = {}));\nlet ExportorService = class ExportorService {\n    constructor() {\n        this._busy = false;\n        console.log(zipper);\n    }\n    get isBusy() { return this._busy; }\n    saveZip(binary, destination) {\n        return tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n            this._busy = true;\n            try {\n                const zip = new jszip__WEBPACK_IMPORTED_MODULE_4__();\n                console.log(\"hajime\");\n                const results = yield Promise.all(_services_main_service__WEBPACK_IMPORTED_MODULE_2__[\"context\"].characters.map(c => this.convertCharacter(c, binary)));\n                console.log(\"results: \", results);\n                results.forEach((r) => zip.file(r.filename, r.blob));\n                console.log(\"zip: \", zip);\n                const zip_blob = yield new Promise(resolve => zip.generateAsync({ type: \"blob\", compression: \"DEFLATE\" }).then(resolve));\n                switch (destination) {\n                    case \"download\":\n                        this.download(zip_blob, \"characters.zip\");\n                        break;\n                    case \"storage\":\n                        this.saveToLocalStorage(zip_blob);\n                        break;\n                    case \"firebase\":\n                        throw new Error(\"Not implemented...\");\n                        break;\n                }\n                console.log(\"done \", zip_blob);\n            }\n            finally {\n                this._busy = false;\n            }\n        });\n    }\n    saveToLocalStorage(blob) {\n        let fileReader = new FileReader();\n        fileReader.onload = function (evt) {\n            /// @ts-ignore\n            var result = evt.target.result;\n            try {\n                localStorage.setItem(\"zip\", result);\n            }\n            catch (e) {\n                console.log(\"Storage failed: \" + e);\n            }\n        };\n        fileReader.readAsDataURL(blob);\n    }\n    download(blob, filename) {\n        link.href = URL.createObjectURL(blob);\n        link.download = filename;\n        link.click();\n    }\n    convertCharacter(character, binary) {\n        return tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n            let model = character.model;\n            let anims = character.anims.toArray();\n            let userData = character.makeUserData();\n            return yield this.exportToGLTF(model, anims, userData, binary);\n        });\n    }\n    exportToGLTF(group, animations, userData, binary) {\n        return tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n            console.log(group, animations, userData, binary);\n            // let exportee = new THREE.Scene()\n            // exportee.add( group )\n            // exportee.add( group.clone( true ) )\n            let exportee = group;\n            exportee.userData = userData;\n            return new Promise((resolve, reject) => {\n                try {\n                    exporter.parse(exportee, function (data) {\n                        // exporter.parse( group, function ( data ) {\n                        const name = group.name || \"LeScene\";\n                        let binary = data instanceof ArrayBuffer;\n                        let output = binary ? data : JSON.stringify(data, null, 2);\n                        let filename = `${name}.${binary ? \"glb\" : \"gltf\"}`;\n                        let blob = binary ?\n                            new Blob([output], { type: 'text/plain' }) :\n                            new Blob([output], { type: 'application/octet-stream' });\n                        resolve(new Result(blob, filename));\n                    }, { animations: animations, onlyVisible: false, binary: binary });\n                }\n                catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n};\nExportorService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({ providedIn: 'root' })\n], ExportorService);\n\nclass Result {\n    constructor(blob, filename) {\n        this.blob = blob;\n        this.filename = filename;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/services/loador.service.ts\":\n/*!********************************************!*\\\n  !*** ./src/app/services/loador.service.ts ***!\n  \\********************************************/\n/*! exports provided: LoadorService */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LoadorService\", function() { return LoadorService; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jszip */ \"./node_modules/jszip/dist/jszip.min.js\");\n/* harmony import */ var jszip__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var three_examples_jsm_loaders_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader.js */ \"./node_modules/three/examples/jsm/loaders/GLTFLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_FBXLoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three/examples/jsm/loaders/FBXLoader.js */ \"./node_modules/three/examples/jsm/loaders/FBXLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_OBJLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three/examples/jsm/loaders/OBJLoader.js */ \"./node_modules/three/examples/jsm/loaders/OBJLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_ColladaLoader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three/examples/jsm/loaders/ColladaLoader.js */ \"./node_modules/three/examples/jsm/loaders/ColladaLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_SVGLoader_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! three/examples/jsm/loaders/SVGLoader.js */ \"./node_modules/three/examples/jsm/loaders/SVGLoader.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _main_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./main.service */ \"./src/app/services/main.service.ts\");\n\n\n\n\n\n\n\n\n\n\n\nlet LoadorService = class LoadorService {\n    constructor() {\n        this._busy = false;\n        this.loadingManager = new three__WEBPACK_IMPORTED_MODULE_8__[\"LoadingManager\"]();\n        this.loaders = {\n            gltf: new three_examples_jsm_loaders_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_3__[\"GLTFLoader\"](this.loadingManager),\n            fbx: new three_examples_jsm_loaders_FBXLoader_js__WEBPACK_IMPORTED_MODULE_4__[\"FBXLoader\"](this.loadingManager),\n            obj: new three_examples_jsm_loaders_OBJLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"OBJLoader\"](this.loadingManager),\n            dae: new three_examples_jsm_loaders_ColladaLoader_js__WEBPACK_IMPORTED_MODULE_6__[\"ColladaLoader\"](this.loadingManager),\n            svg: new three_examples_jsm_loaders_SVGLoader_js__WEBPACK_IMPORTED_MODULE_7__[\"SVGLoader\"](this.loadingManager),\n        };\n        this.fileResolvers = {\n            characters: (data, file_extension, file_name) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n                let [group, animations] = yield new Promise((resolve, reject) => {\n                    switch (file_extension) {\n                        case \"gltf\":\n                        case \"glb\":\n                            this.loaders.gltf.load(data, gltf => resolve([gltf.scene, gltf.animations]));\n                            break;\n                        case \"fbx\":\n                            this.loaders.fbx.load(data, (o) => resolve([o, o.animations || []]));\n                            break;\n                        default: reject(`Sorry, can't load files with extension \"${file_extension}\" here`);\n                    }\n                });\n                console.log(group);\n                let model = null;\n                if (group.children.length === 0) {\n                    console.warn(\"No 3D objects found...\");\n                }\n                else if (group.children.length === 1) {\n                    // model = gltf.scene.children.shift()\n                    model = group.children[0];\n                }\n                else {\n                    model = new three__WEBPACK_IMPORTED_MODULE_8__[\"Object3D\"]();\n                    model.scale.setScalar(.01);\n                    // gltf.scene.children.forEach( o => model.add( o ) )\n                    while (group.children.length)\n                        model.add(group.children.shift());\n                }\n                return new _main_service__WEBPACK_IMPORTED_MODULE_10__[\"Character\"](model, animations);\n            }),\n            model: (data, file_extension, file_name) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n                let model = yield new Promise((resolve, reject) => {\n                    switch (file_extension) {\n                        case \"gltf\":\n                        case \"glb\":\n                            this.loaders.gltf.load(data, o => resolve(o.scene.children[0]));\n                            break;\n                        case \"dae\":\n                            this.loaders.dae.load(data, o => resolve(o.scene.children[0]));\n                            break;\n                        case \"obj\":\n                            this.loaders.obj.load(data, o => resolve(o));\n                            break;\n                        case \"fbx\":\n                            this.loaders.fbx.load(data, o => resolve(o));\n                            break;\n                        default: reject(`Sorry, can't load files with extension \"${file_extension}\" here`);\n                    }\n                });\n                console.log(model);\n                model.name = model.name || file_name;\n                return model;\n            }),\n            props: (data, file_extension, file_name) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n                let props = yield new Promise((resolve, reject) => {\n                    switch (file_extension) {\n                        case \"gltf\":\n                        case \"glb\":\n                            this.loaders.gltf.load(data, o => resolve(o.scene.children));\n                            break;\n                        case \"obj\":\n                            this.loaders.obj.load(data, o => resolve([o]));\n                            break;\n                        case \"dae\":\n                            this.loaders.dae.load(data, o => resolve([o.scene]));\n                            break;\n                        case \"fbx\":\n                            this.loaders.fbx.load(data, o => resolve([o]));\n                            break;\n                        case \"svg\":\n                            this.loaders.svg.load(data, o => {\n                                let paths = o.paths;\n                                let group = new three__WEBPACK_IMPORTED_MODULE_8__[\"Group\"]();\n                                for (var i = 0; i < paths.length; i++) {\n                                    var path = paths[i];\n                                    var material = new three__WEBPACK_IMPORTED_MODULE_8__[\"MeshBasicMaterial\"]({\n                                        color: o.xml.fgColor,\n                                        side: three__WEBPACK_IMPORTED_MODULE_8__[\"DoubleSide\"],\n                                        depthWrite: false\n                                    });\n                                    var shapes = path.toShapes(true, false);\n                                    for (var j = 0; j < shapes.length; j++) {\n                                        var shape = shapes[j];\n                                        var geometry = new three__WEBPACK_IMPORTED_MODULE_8__[\"ShapeBufferGeometry\"](shape);\n                                        var mesh = new three__WEBPACK_IMPORTED_MODULE_8__[\"Mesh\"](geometry, material);\n                                        group.add(mesh);\n                                    }\n                                }\n                                resolve([group]);\n                            });\n                            break;\n                        default: reject(`Sorry, can't load files with extension \"${file_extension}\" here`);\n                    }\n                });\n                props = [].concat(...props);\n                let todel = [];\n                props.forEach(prop => {\n                    prop.traverse(o => {\n                        let del = false;\n                        del = del || o.type.indexOf(\"Light\") > -1;\n                        del = del || o.type.indexOf(\"Camera\") > -1;\n                        del = del || o.type === \"SkinnedMesh\";\n                        del = del || o.type === \"Bone\";\n                        if (del)\n                            todel.push(o);\n                    });\n                });\n                todel.forEach(o => o.parent.remove(o));\n                if (props.length === 1)\n                    props[0].name = file_name;\n                else\n                    props.forEach(prop => prop.name = prop.name || file_name);\n                return props;\n            }),\n            anims: (data, file_extension, file_name) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n                let animations = yield new Promise((resolve, reject) => {\n                    switch (file_extension) {\n                        case \"gltf\":\n                        case \"glb\":\n                            this.loaders.gltf.load(data, gl => resolve(gl.animations));\n                            break;\n                        // case \"fbx\": this.loaders.fbx.load( data, group => console.warn( group ), null, e => console.error( e ) );\n                        // case \"fbx\": this.loaders.fbx.load( data, group => resolve( group.animations ) ); break;\n                        case \"fbx\":\n                            this.loaders.fbx.load(data, (group) => resolve(group.animations));\n                            break;\n                        default: reject(`Sorry, can't load files with extension \"${file_extension}\" here`);\n                    }\n                });\n                animations = animations.filter(a => a.duration > 0.0);\n                if (animations.length === 1)\n                    animations[0].name = file_name;\n                animations.forEach(a => a.name = a.name.match(/[\\w-]+/g).join('-').toLowerCase());\n                return animations;\n            }),\n        };\n        this.loadingManager.onStart = () => this._busy = true;\n        this.loadingManager.onLoad = () => this._busy = false;\n        this.loadingManager.onError = () => this._busy = false;\n        // loadingManager.onStart = () => $( \".loading\" ).show()\n        // loadingManager.onLoad  = () => $( \".loading\" ).hide()\n        // loadingManager.onError = () => $( \".loading\" ).hide()\n        /// @ts-ignore\n        window.loador = this;\n    }\n    get isBusy() { return this._busy; }\n    loadFromUrl(url) {\n        return tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n            return yield new Promise((resolve) => this.loaders.gltf.load(url, resolve));\n        });\n    }\n    loadZipFromLocalStorage(funcLoaded) {\n        return tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n            function dataURLtoBlob(dataurl) {\n                var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1], bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n                while (n--) {\n                    u8arr[n] = bstr.charCodeAt(n);\n                }\n                return new Blob([u8arr], { type: mime });\n            }\n            let data = localStorage[\"zip\"];\n            let o = yield jszip__WEBPACK_IMPORTED_MODULE_2__[\"loadAsync\"](dataURLtoBlob(data));\n            console.log(o.files);\n            const funcResolver = this.fileResolvers.characters;\n            let promises = [];\n            for (let zip_filename in o.files) {\n                promises.push(new Promise((resolve) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n                    let file = o.files[zip_filename];\n                    let [zfext, zfname] = this.getFileNameAndExtension(file);\n                    let blob = yield file.async(\"blob\");\n                    let url = URL.createObjectURL(blob);\n                    funcResolver(url, zfext, zfname).then(resolve).catch(this.onError);\n                })).catch(this.onError));\n            }\n            Promise.all(promises).then(a => funcLoaded(...[].concat(...a))).catch(this.onError);\n            // let fileReader = new FileReader()\n            // fileReader.onload = function (evt) {\n            //     /// @ts-ignore\n            //     var result = evt.target.result\n            //     try { localStorage.setItem(\"zip\", result) }\n            //     catch (e) { console.log(\"Storage failed: \" + e) }\n            // }\n            // fileReader.\n        });\n    }\n    makeDropField(elementId, funcResolver, funcLoaded) {\n        const element = document.getElementById(elementId);\n        element.ondragover = e => {\n            if (e.ctrlKey || e.altKey || jquery__WEBPACK_IMPORTED_MODULE_9__(element).is(\":focus-within\"))\n                return true;\n            e.preventDefault();\n            element.classList.add(\"dragover\");\n            return false;\n        };\n        element.ondragleave = e => {\n            if (e.ctrlKey || e.altKey)\n                return true;\n            e.preventDefault();\n            element.classList.remove(\"dragover\");\n            return false;\n        };\n        element.ondrop = (e) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n            if (e.ctrlKey || e.altKey || !e.dataTransfer.files.length)\n                return true;\n            e.preventDefault();\n            element.classList.remove(\"dragover\");\n            let promises = [];\n            /// @ts-ignore\n            for (let file of e.dataTransfer.files) {\n                let [fileext, filename] = this.getFileNameAndExtension(file);\n                // console.log( file )\n                if (fileext === \"zip\") {\n                    let ab = yield new Promise(resolve => {\n                        let zip_reader = new FileReader();\n                        zip_reader.onload = (event) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () { return resolve(event.target.result); });\n                        zip_reader.readAsArrayBuffer(file);\n                    });\n                    let o = yield jszip__WEBPACK_IMPORTED_MODULE_2__[\"loadAsync\"](ab);\n                    for (let zip_filename in o.files) {\n                        promises.push(new Promise((resolve) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n                            let file = o.files[zip_filename];\n                            let [zfext, zfname] = this.getFileNameAndExtension(file);\n                            let blob = yield file.async(\"blob\");\n                            let url = URL.createObjectURL(blob);\n                            funcResolver(url, zfext, zfname).then(resolve).catch(this.onError);\n                        })).catch(this.onError));\n                    }\n                }\n                else {\n                    promises.push(new Promise((resolve) => tslib__WEBPACK_IMPORTED_MODULE_0__[\"__awaiter\"](this, void 0, void 0, function* () {\n                        let reader = new FileReader();\n                        reader.onload = (event) => {\n                            funcResolver(event.target.result, fileext, filename).then(resolve).catch(this.onError);\n                        };\n                        reader.readAsDataURL(file);\n                    })).catch(this.onError));\n                }\n            }\n            Promise.all(promises).then(a => funcLoaded(...[].concat(...a))).catch(this.onError);\n            return false;\n        });\n    }\n    getFileNameAndExtension(file) {\n        return [\n            file.name.match(/\\.([0-9a-z]+)(?:[\\?#]|$)/i)[1].toLowerCase(),\n            file.name.split('.')[0]\n        ];\n    }\n    onError(e) {\n        console.error(e);\n        // try { this._busy = false }\n        // catch( e ) { console.error( e ) }\n    }\n};\nLoadorService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({ providedIn: 'root' })\n], LoadorService);\n\n\n\n/***/ }),\n\n/***/ \"./src/app/services/main.service.ts\":\n/*!******************************************!*\\\n  !*** ./src/app/services/main.service.ts ***!\n  \\******************************************/\n/*! exports provided: Events, MainService, context, Character, UniqueItemsList, AnimationsList, PropsList */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Events\", function() { return Events; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MainService\", function() { return MainService; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"context\", function() { return context; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Character\", function() { return Character; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UniqueItemsList\", function() { return UniqueItemsList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AnimationsList\", function() { return AnimationsList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PropsList\", function() { return PropsList; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n\n\n\nvar Events;\n(function (Events) {\n    Events[\"CHANGE_DATA\"] = \"change.data\";\n    Events[\"CHANGE_SELECTION\"] = \"change.selection\";\n    Events[\"CHANGE_CHARACTER\"] = \"change.character\";\n    Events[\"ANIMATION_PLAY\"] = \"animation.play\";\n    Events[\"ADD_CHARACTER\"] = \"add.character\";\n})(Events || (Events = {}));\nlet MainService = class MainService {\n    initialize() {\n        context.time.clock.start();\n        this.onFrame();\n        context.events.subscribe(Events.CHANGE_DATA, (...a) => console.info(\"CHANGE_DATA\", ...a));\n        context.events.subscribe(Events.CHANGE_SELECTION, (...a) => console.info(\"CHANGE_SELECTION\", ...a));\n        context.events.subscribe(Events.CHANGE_CHARACTER, (...a) => console.info(\"CHANGE_CHARACTER\", ...a));\n        context.events.subscribe(Events.ANIMATION_PLAY, (...a) => console.info(\"ANIMATION_PLAY\", ...a));\n    }\n    onFrame() {\n        context.time.delta = context.time.clock.getDelta();\n        if (context.data.dirty) {\n            context.events.dispatch(Events.CHANGE_DATA, context.data);\n            context.data.dirty = false;\n        }\n        if (context.selection.dirty) {\n            context.events.dispatch(Events.CHANGE_SELECTION, context.selection);\n            context.selection.dirty = false;\n        }\n        for (let c of context.characters)\n            c.aniMixer.update(context.time.delta);\n        requestAnimationFrame(() => this.onFrame());\n    }\n    /// /// /// /// \n    makeAndAddCharacter(model, animations) {\n        return this.addCharacter(new Character(model, animations));\n    }\n    addCharacter(character) {\n        character.model.position.setScalar(0);\n        character.model.traverse(o => o.visible = !o.userData.hidden);\n        context.characters.push(character);\n        context.events.dispatch(Events.ADD_CHARACTER, character);\n        context.data.dirty = true;\n        return character;\n    }\n    focusOnCharacter(character) {\n        context.viewMode = context.viewMode || \"overview\";\n        context.character = character;\n        context.events.dispatch(Events.CHANGE_CHARACTER, character);\n        context.data.dirty = true;\n    }\n};\nMainService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({ providedIn: 'root' })\n], MainService);\n\nconst context = {\n    time: {\n        clock: new three__WEBPACK_IMPORTED_MODULE_2__[\"Clock\"](),\n        delta: 0.0,\n    },\n    // viewMode : null, //  \"characters\" , // \n    get viewMode() { return localStorage[\"state.viewMode\"]; },\n    set viewMode(value) { localStorage[\"state.viewMode\"] = value; },\n    character: null,\n    characters: new Array(),\n    data: new class CurrentData {\n        constructor() {\n            this.dirty = false;\n        }\n    },\n    selection: new class SelectionManager {\n        constructor() {\n            this.dirty = false;\n        }\n    },\n    events: new class EventManager {\n        constructor() {\n            this.functions = {};\n        }\n        subscribe(key, callback) {\n            if (!this.functions[key])\n                this.functions[key] = [];\n            this.functions[key].push(callback);\n        }\n        dispatch(key, data) {\n            if (this.functions[key])\n                for (let callback of this.functions[key])\n                    callback(data);\n        }\n    },\n};\nclass Character {\n    constructor(model, animations) {\n        this.model = model;\n        this.currentAction = null;\n        this.props = this.findAllProps(model);\n        this.anims = new AnimationsList(animations);\n        this.aniMixer = new three__WEBPACK_IMPORTED_MODULE_2__[\"AnimationMixer\"](model);\n        this.uuid = model.uuid;\n        const animationsUserData = model.userData.animationsUserData;\n        if (animationsUserData)\n            animations.forEach((clip, i) => this.anims.setUserData(clip, animationsUserData[i]));\n    }\n    get name() { return this.model.name || this.model.uuid; }\n    makeUserData() {\n        return {\n            animationsUserData: this.anims.toArray().map(clip => this.anims.getUserData(clip))\n        };\n    }\n    findAllProps(model) {\n        let results = new PropsList();\n        function traverseChildren(o) {\n            let push = false;\n            let hasChildren = o.children && !!o.children.filter(c => c.type !== \"Bone\").length;\n            push = push || ((o.type === \"Object3D\" || o.type === \"Group\") && hasChildren);\n            push = push || o.type === \"Mesh\";\n            push = push && !o.userData.isHolster;\n            push = push && o !== model;\n            if (push)\n                results.add(o);\n            else if (o.children)\n                o.children.forEach((child) => traverseChildren(child));\n        }\n        traverseChildren(model);\n        return results;\n    }\n    /// /// ///\n    findAllChildren(func) {\n        let results = [];\n        this.model.traverse(child => func(child) ? results.push(child) : null);\n        return results;\n    }\n    setHidden(object, hidden) {\n        hidden = hidden !== undefined ? hidden : !object.visible;\n        object.userData.hidden = hidden;\n        object.visible = !hidden;\n        context.data.dirty = true;\n    }\n    playDefaultAnimation() {\n        let idle_anim = this.anims.find(a => a.name === \"idle\") ||\n            this.anims.find(a => a.name.toLowerCase().indexOf(\"idle\") > -1);\n        if (idle_anim)\n            this.play(idle_anim);\n    }\n    play(clip) {\n        this.aniMixer.stopAllAction();\n        this.aniMixer.uncacheClip(clip);\n        this.currentAction = this.aniMixer.clipAction(clip);\n        this.currentAction.setLoop(three__WEBPACK_IMPORTED_MODULE_2__[\"LoopRepeat\"], undefined);\n        this.currentAction.enabled = true;\n        this.currentAction.weight = 1.0;\n        this.currentAction.play();\n        if (context.character === this)\n            context.events.dispatch(Events.ANIMATION_PLAY, this.currentAction);\n    }\n}\nclass UniqueItemsList extends Set {\n    get length() { return this.size; }\n    getByUuid(uuid) {\n        for (let item of this)\n            if (item.uuid === uuid)\n                return item;\n        return null;\n    }\n    map(func) {\n        return Array.from(this).map((v, i, a) => func(v, i, a));\n    }\n    find(func) {\n        for (let item of this)\n            if (func(item))\n                return item;\n        return null;\n    }\n    addAll(...items) {\n        items.forEach(item => this.add(item));\n    }\n    add(item) {\n        context.data.dirty = true;\n        return super.add(item);\n    }\n    deleteAll(...props) {\n        props.forEach(item => this.delete(item));\n    }\n    delete(item) {\n        context.data.dirty = true;\n        return super.delete(item);\n    }\n    toArray() { return Array.from(this); }\n}\nclass AnimationUserData {\n    // get events():{time:number}[] { return this.eventTimes.map( time => { return { time : time } } ) }\n    // events:{time:number}[]\n    constructor(clip, data) {\n        this.fadeTimes = [0.0, clip.duration];\n        this.eventTimes = [];\n        if (data) {\n            this.fadeTimes[0] = data.fadeTimes[0];\n            this.fadeTimes[1] = data.fadeTimes[1];\n            this.eventTimes.push(...data.eventTimes);\n        }\n        // this.events = [ ]\n    }\n    addEvent(time) {\n        this.eventTimes.push(time);\n        this.eventTimes.sort();\n        // this.events.push( { time : time } )\n    }\n}\nclass AnimationsList extends UniqueItemsList {\n    constructor() {\n        super(...arguments);\n        this.userDatas = {};\n    }\n    getUserData(clip) {\n        if (this.userDatas[clip.uuid] === undefined) {\n            this.userDatas[clip.uuid] = new AnimationUserData(clip);\n        }\n        return this.userDatas[clip.uuid];\n    }\n    setUserData(clip, data) {\n        this.userDatas[clip.uuid] = new AnimationUserData(clip, data);\n    }\n    add(item) {\n        let i = 0, originalName = item.name;\n        while (this.find(a => a.name === item.name))\n            item.name = `${originalName}-${++i}`;\n        return super.add(item);\n    }\n    duplicate(clip) {\n        /// @ts-ignore\n        let clone = clip.clone();\n        this.add(clone);\n        return clone;\n    }\n}\nclass PropsList extends UniqueItemsList {\n    duplicate(prop) {\n        let clone = prop.clone();\n        prop.parent.add(clone);\n        this.add(clone);\n        return clone;\n    }\n    delete(prop) {\n        prop.parent.remove(prop);\n        return super.delete(prop);\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/app/services/scener.service.ts\":\n/*!********************************************!*\\\n  !*** ./src/app/services/scener.service.ts ***!\n  \\********************************************/\n/*! exports provided: studioRigConfigurations, SceneService */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"studioRigConfigurations\", function() { return studioRigConfigurations; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SceneService\", function() { return SceneService; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"./node_modules/three/build/three.module.js\");\n/* harmony import */ var _services_main_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/main.service */ \"./src/app/services/main.service.ts\");\n\n\n\n\nconst DEFAULT_RIG = 2; /// 0 1 2\nconst textureLoader = new three__WEBPACK_IMPORTED_MODULE_2__[\"TextureLoader\"]();\nconst studioRigConfigurations = [\n    {\n        name: \"default\",\n        colors: {\n            background: 0x224477,\n            grid_a: 0x99CCFF,\n            grid_b: 0x4466CC,\n        },\n        lights: {\n            ambient: [\n                { color: 0xffffff, intensity: .60 }\n            ],\n            directional: [\n                { color: 0xffffff, intensity: .50, position: [-1, 0, 0] },\n                { color: 0xffffff, intensity: .75, position: [1, 1, 1] },\n                { color: 0xffffff, intensity: .50, position: [0, 0, -1] },\n            ],\n        },\n    },\n    {\n        name: \"in-gamish\",\n        colors: {\n            background: 0x3a7f41,\n            grid_a: 0xFFFF41,\n            grid_b: 0x5a9f61,\n        },\n        lights: {\n            ambient: [\n                { color: 0xffffff, intensity: 0.70 }\n            ],\n            directional: [\n                { color: 0xffffff, intensity: .40, position: [-1, 0, -1] },\n                { color: 0xffffff, intensity: .70, position: [1, 1, 1] },\n            ],\n        },\n    },\n    {\n        name: \"dark\",\n        colors: {\n            background: 0x1A1A1A,\n            grid_a: 0x404040,\n            grid_b: 0x303030,\n        },\n        lights: {\n            ambient: [\n                { color: 0xffffff, intensity: .50 }\n            ],\n            directional: [\n                { color: 0xffffff, intensity: .50, position: [-1, 0, 0] },\n                { color: 0xffffff, intensity: .75, position: [1, 1, 1] },\n                { color: 0xffffff, intensity: .50, position: [0, 0, -1] },\n            ],\n        },\n    },\n];\nlet SceneService = class SceneService {\n    constructor() {\n        this.scene = new three__WEBPACK_IMPORTED_MODULE_2__[\"Scene\"]();\n        this.rig = new StudioRig();\n        this.rigConfigurations = studioRigConfigurations;\n        this.platforms = {};\n        this.isLoading = true; //// directly use loader.busy\n    }\n    initialize() {\n        this.scene.add(this.rig);\n        this.rig.initialize(studioRigConfigurations[DEFAULT_RIG], this.scene);\n        _services_main_service__WEBPACK_IMPORTED_MODULE_3__[\"context\"].events.subscribe(_services_main_service__WEBPACK_IMPORTED_MODULE_3__[\"Events\"].ADD_CHARACTER, (character) => {\n            let platform = this.platforms[character.uuid] = new three__WEBPACK_IMPORTED_MODULE_2__[\"Group\"]();\n            platform.add(character.model);\n            platform.position.x = _services_main_service__WEBPACK_IMPORTED_MODULE_3__[\"context\"].characters.length - 1;\n            this.scene.add(platform);\n        });\n        this.isLoading = false;\n    }\n    setupRig(config) {\n        this.rig.initialize(config, this.scene);\n    }\n};\nSceneService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({ providedIn: 'root' })\n], SceneService);\n\nclass StudioRig extends three__WEBPACK_IMPORTED_MODULE_2__[\"Group\"] {\n    initialize(configuration, scene) {\n        this.configuration = configuration;\n        while (this.children.length > 0)\n            this.remove(this.children[0]);\n        scene.background = new three__WEBPACK_IMPORTED_MODULE_2__[\"Color\"](configuration.colors.background);\n        configuration.lights.ambient.forEach((c, i) => {\n            let light = new three__WEBPACK_IMPORTED_MODULE_2__[\"AmbientLight\"](c.color, c.intensity);\n            light.name = \"Light (ambient) \" + i;\n            this.add(light);\n        });\n        configuration.lights.directional.forEach((c, i) => {\n            let light = new three__WEBPACK_IMPORTED_MODULE_2__[\"DirectionalLight\"](c.color, c.intensity);\n            light.position.set(c.position[0], c.position[1], c.position[2]).setLength(20);\n            light.lookAt(new three__WEBPACK_IMPORTED_MODULE_2__[\"Vector3\"](0, 0, 0));\n            light.name = \"Light (directional) \" + i;\n            this.add(light);\n        });\n        this.grid = new three__WEBPACK_IMPORTED_MODULE_2__[\"GridHelper\"](20, 20, configuration.colors.grid_a, configuration.colors.grid_b);\n        this.add(this.grid);\n        this.envMap = textureLoader.load(\"assets/images/metal-5.png\");\n        this.envMap.mapping = three__WEBPACK_IMPORTED_MODULE_2__[\"SphericalReflectionMapping\"];\n        this.envMap.encoding = three__WEBPACK_IMPORTED_MODULE_2__[\"sRGBEncoding\"];\n        // this.envMap = textureLoader.load( \"assets/shitroom.jpg\" )\n        // this.envMap.mapping = THREE.EquirectangularReflectionMapping;\n        // this.envMap.magFilter = THREE.LinearFilter;\n        // this.envMap.minFilter = THREE.LinearMipmapLinearFilter;\n        // this.envMap.encoding = THREE.sRGBEncoding\n    }\n}\n\n\n/***/ }),\n\n/***/ \"./src/environments/environment.ts\":\n/*!*****************************************!*\\\n  !*** ./src/environments/environment.ts ***!\n  \\*****************************************/\n/*! exports provided: environment */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"environment\", function() { return environment; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nconst environment = {\n    production: false\n};\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n\n\n/***/ }),\n\n/***/ \"./src/main.ts\":\n/*!*********************!*\\\n  !*** ./src/main.ts ***!\n  \\*********************/\n/*! no exports provided */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hammerjs */ \"./node_modules/hammerjs/hammer.js\");\n/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(hammerjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ \"./node_modules/@angular/platform-browser-dynamic/fesm2015/platform-browser-dynamic.js\");\n/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./app/app.module */ \"./src/app/app.module.ts\");\n/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./environments/environment */ \"./src/environments/environment.ts\");\n\n\n\n\n\n\nif (_environments_environment__WEBPACK_IMPORTED_MODULE_5__[\"environment\"].production) {\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__[\"enableProdMode\"])();\n}\nObject(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_3__[\"platformBrowserDynamic\"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_4__[\"AppModule\"])\n    .catch(err => console.error(err));\n\n\n/***/ }),\n\n/***/ 0:\n/*!***************************!*\\\n  !*** multi ./src/main.ts ***!\n  \\***************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /workspace/animateur/src/main.ts */\"./src/main.ts\");\n\n\n/***/ })\n\n},[[0,\"runtime\",\"vendor\"]]]);\n//# sourceMappingURL=main-es2015.js.map","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"<main id=\\\"pageMain\\\">\\n  <div class=\\\"panes\\\">\\n    <app-toolbar id=\\\"panel-toolbar\\\" class=\\\"toolbar-vertical\\\"></app-toolbar>\\n    <app-explorer class=\\\"pane\\\" *ngIf=\\\"!! context.viewMode && context.characters.length\\\">\\n      \\n    </app-explorer>\\n    <div class=\\\"middle-pane\\\">\\n      <app-viewport id=\\\"viewport\\\"></app-viewport>\\n      <app-animation-bar id=\\\"animation-bar\\\" class=\\\"bar-horizontal\\\" *ngIf=\\\"context.characters.length\\\"\\n                         [hidden]=\\\"!context.character||!context.character.currentAction\\\"></app-animation-bar>\\n    </div>\\n  </div>\\n  <!-- <app-statusbar></app-statusbar> -->\\n</main>\"","export default \"\\n\\n<div class=\\\"buttons-bar\\\">\\n  <button class=\\\"button-play\\\" (click)=\\\"togglePause()\\\">▶</button>\\n  <!-- <button (click)=\\\"addEvent()\\\">Add Event Yo!</button> -->\\n  <!-- <div class=\\\"filler\\\"><span class=\\\"timer\\\"></span></div> -->\\n</div>\\n<div class=\\\"sliders\\\">\\n  <br/>\\n  <nouislider id=\\\"slider-events\\\" [config]=\\\"sliderConfig.events\\\" #SliderEvents\\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.events\\\"\\n              (slide)=\\\"handlers.change_events($event)\\\"\\n              [hidden]=\\\"!action.hasEvents\\\"\\n              ></nouislider>\\n  <nouislider id=\\\"slider-weight\\\" [config]=\\\"sliderConfig.weight\\\"\\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.weight\\\"\\n              ></nouislider>\\n  <nouislider id=\\\"slider-play\\\"   [config]=\\\"sliderConfig.play\\\"   \\n              [min]=\\\"0\\\" [max]=\\\"action.duration\\\" [(ngModel)]=\\\"action.time\\\"\\n              (slide)=\\\"handlers.change_play($event)\\\"\\n              ></nouislider>\\n  <br/>\\n</div>\"","export default \"<!-- CHARACTERS -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'characters'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>Current Characters</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let c of context.characters\\\" attr.uuid=\\\"{{c.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.character === c\\\"\\n      (click)=\\\"main.focusOnCharacter( c )\\\">{{c.name}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- OVERVIEW -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'overview'\\\">\\n  <div id=\\\"subpanel-properties\\\" class=\\\"subpanel\\\">\\n    <header><h3>Selection</h3></header>\\n    <div class=\\\"contents\\\">\\n      <br />\\n      <input id=\\\"field-name\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.name\\\"/>\\n      <div class=\\\"i-vector-row position\\\">\\n        <input id=\\\"field-position-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.x\\\" />\\n        <input id=\\\"field-position-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.y\\\" />\\n        <input id=\\\"field-position-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.position.z\\\" />\\n      </div>\\n      <div class=\\\"i-vector-row rotation\\\">\\n        <input id=\\\"field-rotation-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.x\\\" />\\n        <input id=\\\"field-rotation-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.y\\\" />\\n        <input id=\\\"field-rotation-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.rotation.z\\\" />\\n      </div>\\n      <div class=\\\"i-vector-row scale linked\\\">\\n        <input id=\\\"field-scale-x\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.x\\\" />\\n        <input id=\\\"field-scale-y\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.y\\\" />\\n        <input id=\\\"field-scale-z\\\" type=\\\"text\\\" [(ngModel)]=\\\"object.scale.z\\\" />\\n      </div>\\n      <br/>\\n    </div>\\n  </div>\\n  <div id=\\\"subpanel-nodes\\\" class=\\\"subpanel\\\">\\n    <header><h3>Model</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.model.children\\\"\\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      (click)=\\\"select(o,'node')\\\">{{o.name||o.uuid}}</li>\\n    </ul>\\n  </div>\\n  <div id=\\\"subpanel-props\\\" class=\\\"subpanel\\\" *ngIf=\\\"context.character\\\">\\n    <header><h3>Props</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.props\\\" \\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      [hidden]=\\\"o.userData.hidden\\\"\\n      (click)=\\\"select(o,'prop')\\\"><a>{{o.name||o.uuid}}</a></li>\\n    </ul>\\n  </div>\\n  <div id=\\\"subpanel-anims\\\" class=\\\"subpanel\\\" *ngIf=\\\"context.character\\\">\\n    <header><h3>Animations</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let o of context.character.anims\\\" \\n      class=\\\"list-item\\\" attr.uuid=\\\"{{o.uuid}}\\\" [class.selected]=\\\"context.selection.last === o\\\"\\n      (click)=\\\"select(o,'anim')\\\">{{o.name||o.uuid}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- NODES -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'nodes'\\\">\\n  <header><h3>Model Nodes</h3></header>\\n  <tree [tree]=\\\"tree_sceneNodes\\\" \\n        (nodeSelected)=\\\"tree_sceneNodes.onNodeSelected($event)\\\"\\n        #tree__sceneNodes>\\n  </tree>\\n</div>\\n\\n<!-- BONES -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'bones'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>My Bones</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let bone of allBones\\\" attr.uuid=\\\"{{bone.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.selection.last === bone\\\"\\n      (click)=\\\"select(bone,'node')\\\">{{bone.name}}</li>\\n    </ul>\\n  </div>\\n</div>\\n\\n<!-- ANIMATIONS -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'animations'\\\">\\n</div>\\n\\n<!-- MATERIALING -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'materials'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>All Materials</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let m of allMaterials\\\" attr.uuid=\\\"{{m.uuid}}\\\" \\n      class=\\\"list-item\\\" [class.selected]=\\\"context.selection.last === m\\\"\\n      (click)=\\\"select(m,'mat')\\\">{{m.name||m.uuid}}</li>\\n    </ul>\\n  </div>\\n  <div class=\\\"filler\\\"></div>\\n  <div class=\\\"subpanel\\\" *ngIf=\\\"!! material\\\">\\n    <header><h3> {{ material.name || material.uuid }} </h3></header>\\n    <br/>\\n    <nouislider id=\\\"slider-roughness\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.roughness\\\"\\n    ></nouislider>\\n    <br/>\\n    <nouislider id=\\\"slider-metalness\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.metalness\\\"\\n    ></nouislider>\\n    <br/>\\n    <nouislider id=\\\"slider-envMapIntensity\\\" [config]=\\\"materialSliders.zeroToOne\\\"\\n                [min]=\\\"0\\\" [max]=\\\"1\\\" [(ngModel)]=\\\"material.envMapIntensity\\\"\\n    ></nouislider>\\n    <br/>\\n  </div>\\n</div>\\n\\n<!-- STUDIO -->\\n\\n<div id=\\\"panel-navigation\\\" *ngIf=\\\"context.viewMode === 'studio'\\\">\\n  <div class=\\\"subpanel\\\">\\n    <header><h3>Select Studio Rig</h3></header>\\n    <ul class=\\\"contents list\\\">\\n      <li *ngFor=\\\"let config of scener.rigConfigurations\\\"\\n      class=\\\"list-item\\\" [class.selected]=\\\"scener.rig.configuration === config\\\"\\n      (click)=\\\"scener.setupRig( config )\\\">{{config.name}}</li>\\n    </ul>\\n  </div>\\n</div>\"","export default \"<!-- <b>Characters: </b> -->\\n<a *ngFor=\\\"let c of context.characters\\\" (click)=\\\"main.focusOnCharacter( c )\\\"> •   {{c.name}}   • </a>\\n\"","export default \"<div class=\\\"top\\\">\\n  <button *ngFor=\\\"let b of buttons\\\" title=\\\"{{b.name}}\\\" [class.selected]=\\\"context.viewMode===b.viewMode\\\"\\n    (click)=\\\"selectViewMode(b.viewMode)\\\">\\n    <i class=\\\"material-icons\\\">{{b.icon}}</i>\\n  </button>\\n</div>\\n<div class=\\\"filler\\\"></div>\\n<div class=\\\"bottom\\\">\\n  <!-- <button onclick=\\\"location.reload()\\\"><i class=\\\"material-icons\\\">autorenew</i></button> -->\\n  <button class=\\\"options-menu\\\"><i class=\\\"material-icons\\\">menu</i></button>\\n</div>\"","export default \"<div class=\\\"contents\\\">\\n  <canvas id=\\\"webgl-canvas\\\" [hidden]=\\\"!context.character\\\"></canvas>\\n  <div [hidden]=\\\"context.character\\\">Drag files here</div>\\n  <div class=\\\"overlay overlay-top-right\\\">\\n    <button class=\\\"transform position\\\">✣&#xFE0E;</button>\\n    <button class=\\\"transform rotation\\\">↺&#xFE0E;</button>\\n    <button class=\\\"transform scale\\\">■&#xFE0E;</button>\\n    <button class=\\\"transform space\\\">🌐&#xFE0E;</button>\\n  </div>\\n  <!-- <div class=\\\"overlay overlay-top-left\\\"> -->\\n  <div class=\\\"overlay overlay-bottom-right\\\">\\n    <!-- <button class=\\\"select-character\\\">💀&#xFE0E;</button> -->\\n  </div>\\n  <div class=\\\"loading\\\" *ngIf=\\\"loador.isBusy\\\"><h1>Loading</h1></div>\\n  <div class=\\\"exporting\\\" *ngIf=\\\"exportor.isBusy\\\"><h1>Exporting...</h1></div>\\n</div>\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Component } from '@angular/core'\nimport { LoadorService } from './services/loador.service'\nimport { SceneService } from './services/scener.service'\nimport { context, MainService, Character } from './services/main.service'\nimport Stats from \"stats-js\"\n\n@Component({ selector: 'app-root', templateUrl: './app.component.html' })\nexport class AppComponent {\n  context = context\n  \n  constructor( private main:MainService, private loador:LoadorService, private scener:SceneService ) { }\n  ngOnInit() \n  {\n    this.main.initialize()\n    this.scener.initialize()\n\n    this.loador.makeDropField( 'viewport', this.loador.fileResolvers.characters, \n                               ( ...rest:any ) => this.onCharactersLoaded( ...rest ) )\n    ///\n    \n    // new DropField( document.getElementById('subpanel-nodes') ).resolver( fileResolvers.model ).loaded( onCharacterLoaded )\n    // new DropField( document.getElementById('subpanel-props') ).resolver( fileResolvers.props ).loaded( onPropLoaded )\n    // new DropField( document.getElementById('subpanel-anims') ).resolver( fileResolvers.anims ).loaded( onAnimationsLoaded )\n    \n    //this.loador.loadZipFromLocalStorage( ( ...rest:any ) => this.onCharactersLoaded( ...rest ) )\n    this.loador.loadFromUrl( \"/assets/examples/glb/hero-shield.glb\" ).then( ( c:any ) => \n      this.onCharactersLoaded( new Character( c.scene , c.animations ) ) )\n\n    const SHOW_STATS = false\n    \n    if ( SHOW_STATS ) {\n      var stats = new Stats()\n      stats.showPanel( 1 ); // 0: fps, 1: ms, 2: mb, 3+: custom\n      stats.dom.style.setProperty(\"left\", \"unset\")\n      stats.dom.style.setProperty(\"right\", \"48px\")\n      document.body.appendChild( stats.dom )\n      function animate() {\n        stats.end()\n        stats.begin()\n        requestAnimationFrame( animate )\n      }\n      requestAnimationFrame( animate )\n    }\n\n    /// @ts-ignore\n    window.app = this ; window.context = context\n  }\n\n  onCharactersLoaded( ...characters:Character[] ) \n  {\n    characters.forEach( character => {\n      console.log( character )\n      this.main.addCharacter( character )\n      character.playDefaultAnimation()\n      // this.extractColors( character.model )\n    } )\n    this.main.focusOnCharacter( characters[0] )\n  }\n  \n}\n\n/////// EXTENSIONS //////\n\ndeclare global { interface Array<T> {\n  toSet<T>():Set<T>\n  mapToObject<T>( func:(o:T,i?:number) => string | [string,any] ):{[key:string]:any}\n} }\nArray.prototype.toSet = function<T>():Set<T> { return new Set( this ) }\nArray.prototype.mapToObject = function<T>( func:(o:T,i?:number) => string | [string,T] ):{[key:string]:T} {\n  const result = {}\n  this.forEach( ( o:T, i:number ) => {\n    let r = func( o, i )\n    let [ key, value ] = Array.isArray( r ) ? [ r[0], r[1] ] : [ r, o ]\n    result[ key ] = value\n  } )\n  return result\n}","import { BrowserModule } from '@angular/platform-browser'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { NouisliderModule } from 'ng2-nouislider'\nimport { TreeModule } from 'ng2-tree'\n\nimport { TabsComponent } from './common/tabs.component'\nimport { TabComponent } from './common/tab.component'\n\nimport { AppComponent } from './app.component'\nimport { ViewportComponent } from './components/viewport.component'\nimport { AnimationBarComponent } from './components/animation-bar.component'\nimport { ExplorerComponent } from './components/explorer.component'\nimport { ToolbarComponent } from './components/toolbar.component'\nimport { StatusbarComponent } from './components/statusbar.component'\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations'\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ViewportComponent,\n    AnimationBarComponent,\n    ExplorerComponent,\n    ToolbarComponent,\n    TabsComponent,\n    TabComponent,\n    StatusbarComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    FormsModule,\n    NouisliderModule,\n    TreeModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","/**\n * A single tab page. It renders the passed template\n * via the @Input properties by using the ngTemplateOutlet\n * and ngTemplateOutletContext directives.\n */\n\nimport { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'my-tab',\n  styles: [\n    `\n    .pane{\n      // padding: 1em;\n    }\n  `\n  ],\n  template: `\n    <div [hidden]=\"!active\" class=\"pane\">\n      <ng-content></ng-content>\n    </div>\n  `\n})\nexport class TabComponent {\n  @Input('tabTitle') title: string;\n  @Input() active = false;\n}\n","/**\n * The main component that renders single TabComponent\n * instances.\n */\n\nimport {\n  Component,\n  ContentChildren,\n  QueryList,\n  AfterContentInit,\n  ViewChild,\n  ComponentFactoryResolver,\n  ViewContainerRef\n} from '@angular/core';\n\nimport { TabComponent } from './tab.component';\n// import { DynamicTabsDirective } from './dynamic-tabs.directive';\n\n@Component({\n  selector: 'my-tabs',\n  template: `\n    <ul class=\"nav nav-tabs\">\n      <li *ngFor=\"let tab of tabs\" (click)=\"selectTab(tab)\" [class.active]=\"tab.active\">\n        <a href=\"#\">{{tab.title}}</a>\n      </li>\n    </ul>\n    <ng-content></ng-content>\n  `,\n  styles: [\n    `\n    .tab-close {\n      color: gray;\n      text-align: right;\n      cursor: pointer;\n    }\n    `\n  ]\n})\nexport class TabsComponent implements AfterContentInit\n{\n  @ContentChildren(TabComponent) tabs: QueryList<TabComponent>;\n  \n  // contentChildren are set\n  ngAfterContentInit() {\n    // get all active tabs\n    let activeTabs = this.tabs.filter((tab)=>tab.active)\n    \n    // if there is no active tab set, activate the first\n    if(activeTabs.length === 0) {\n      this.selectTab( this.tabs.first )\n    }\n  }\n  \n  selectTab( target_tab:TabComponent ){\n    this.tabs.toArray().forEach( tab => tab.active = tab === target_tab )\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvYW5pbWF0aW9uLWJhci5jb21wb25lbnQuY3NzIn0= */\"","import { Component, OnInit, ViewChild } from '@angular/core'\nimport { context, Events } from '../services/main.service'\nimport { NouisliderModule, NouisliderComponent } from 'ng2-nouislider'\nimport * as THREE from \"three\"\nimport * as $ from 'jquery'\n\nconst FRAME_TIME = 1.000 / 30\n\n@Component({\n  selector: 'app-animation-bar',\n  templateUrl: './animation-bar.component.html',\n  styleUrls: ['./animation-bar.component.css']\n})\nexport class AnimationBarComponent implements OnInit\n{\n  @ViewChild( NouisliderComponent, {static:true} )\n  slider_events:NouisliderComponent\n\n  sliderConfig = {\n    events : {\n      step: FRAME_TIME,\n      connect: false,\n      animate: false,\n      behaviour: 'unconstrained-tap-snap',\n      // tooltips: true,\n      tooltips: [\n        { to : () => \"1\" } ,\n        { to : () => \"2\" } ,\n        { to : () => \"3\" } ,\n        { to : () => \"4\" } ,\n        { to : () => \"5\" } ,\n        { to : () => \"6\" } ,\n        { to : () => \"7\" } ,\n        { to : () => \"8\" } ,\n        { to : () => \"9\" } ,\n        { to : () => \"10\" } ,\n      ]\n    } ,\n    weight : {\n      step: FRAME_TIME,\n      margin: FRAME_TIME,\n      connect: [true,false,true],\n      animate: false,\n      behaviour: 'snap',\n    } ,\n    play : {\n      step: .001,\n      connect: [true,false],\n      animate: false,\n      behaviour: 'snap',\n      // pips: {\n        // mode: 'steps',\n        // filter: t => t % 1.000 ? -1 : 0,\n        // format: t => (<number>t).toPrecision(1)\n        // density: 1,\n      // }\n    }\n  }\n  \n  action = {\n    get clip():THREE.AnimationClip { \n      if ( ! context.character || ! context.character.currentAction )\n        return null\n      return context.character.currentAction.getClip()\n    } ,\n    get userData() { \n      if ( ! this.clip )\n        return null\n      return context.character.anims.getUserData( this.clip )\n    } ,\n\n    get duration():number { \n      if ( ! context.character || ! context.character.currentAction )\n        return 1.000\n      return this.clip.duration\n    } ,\n    get hasEvents():boolean {\n      return !! context.character && \n             !! context.character.currentAction &&\n             !! this.userData.eventTimes.length\n    } ,\n\n    // _events : [.1,.2,.3,.4,.5,.6,.7,.8,.9,1.0] ,\n    events : [11,12,13,14,15,16,17,18,19,20] ,\n\n    get weight():number[] { \n      if ( ! context.character || ! context.character.currentAction )\n        return [ 0.000, 0.000 ]\n      const clip = context.character.currentAction.getClip()\n      return context.character.anims.getUserData( clip ).fadeTimes\n    } ,\n    set weight( v:number[] ) { \n      const clip = context.character.currentAction.getClip()\n      const fadeTimes = context.character.anims.getUserData( clip ).fadeTimes\n      fadeTimes[ 0 ] = v[ 0 ]\n      fadeTimes[ 1 ] = v[ 1 ]\n    } ,\n\n    get time():number { \n      if ( ! context.character || ! context.character.currentAction )\n        return 0.000\n      return context.character.currentAction.time\n    } ,\n    set time(v:number) { \n      if ( ! context.character || ! context.character.currentAction )\n        return\n      // console.log( v )\n      // context.character.currentAction.paused = true\n      // context.character.currentAction.time = v\n    }\n  }\n\n  context = context\n\n  handlers = {\n    change_play( value:number ) { \n      // console.log( value )\n      context.character.currentAction.paused = true\n      context.character.currentAction.time = value\n    } ,\n    change_events( values:number[] ) {\n      const clip = context.character.currentAction.getClip()\n      const eventTimes = context.character.anims.getUserData( clip ).eventTimes\n      eventTimes.forEach( ( t, i ) => eventTimes[ i ] = values[ i ] )\n    }\n  }\n\n  constructor() { }\n\n  ngOnInit() \n  {\n    ///@ts-ignore\n    window.ani = this\n    context.events.subscribe( Events.CHANGE_SELECTION, selection => {\n      if ( selection.type === \"anim\" ) {\n        context.character.play( selection.last as THREE.AnimationClip )\n      }\n    } )\n\n    /// @ts-ignore\n    $.contextMenu( {\n      selector: 'div.sliders',\n      animation: {duration: 100, show: 'fadeIn', hide: 'fadeOut'},\n      items: [\n        { name : \"Add Event\", icon: \"star\", callback : () => this.addEvent() } , \n        { name : \"Create animation from first frame\", icon: \"flash\", callback : () => {\n          /// @ts-ignore\n          let a = this.action.clip.clone()\n          a.tracks.forEach( t => { \n            t.times = [ 0 ]\n            t.values = t.values.slice( 0, t.name.endsWith(\".quaternion\") ? 4 : 3 ) \n          } )\n          a.name += \"-start-pose\"\n          a.duration = 0.000\n          context.character.anims.add( a )\n        } } , \n        { name : \"Create animation from first frame\", icon: \"flash\", callback : () => {\n          /// @ts-ignore\n          let a = this.action.clip.clone()\n          a.tracks.forEach( t => { \n            t.times = [ 0 ]\n            t.values = t.values.slice( t.values.length - ( t.name.endsWith(\".quaternion\") ? 4 : 3 ) )\n          } )\n          a.name += \"-end-pose\"\n          a.duration = 0.000\n          context.character.anims.add( a )\n        } } , \n      ]\n    } )\n\n    // this.slider_events.slide.subscribe( (...rest) => console.log(rest) )\n    // this.slider_events.slider.on( \"slide\", (...rest) => console.log(rest) )\n    // $(\"#slider-events\").on(\"change\",(...rest) => console.log(rest))\n\n    context.events.subscribe( Events.ANIMATION_PLAY, () => this.refresh() )\n    context.events.subscribe( Events.CHANGE_CHARACTER, () => this.refresh() )\n    if ( context.character && context.character.currentAction )\n      this.refresh() \n    \n    this.onFrame()\n  }\n\n  onFrame() {\n\n    try {\n      const action = context.character.currentAction\n      const clip = action.getClip()\n      const udata = context.character.anims.getUserData( clip )\n      udata.eventTimes.forEach( ( et, i ) => this.action.events[ i ] = et )\n      const handles = $(\"#slider-events .noUi-handle\").toArray()\n      handles.forEach( ( o, i ) => $(o).toggle( udata.eventTimes[ i ] !== undefined ) )\n    } catch( e ) { }\n\n    requestAnimationFrame( () => this.onFrame() )\n  }\n\n  refresh() \n  {\n    const action = context.character.currentAction\n    const clip = action.getClip()\n    const udata = context.character.anims.getUserData( clip )\n    udata.eventTimes.forEach( ( et, i ) => this.action.events[ i ] = et )\n\n    ///@ts-ignore\n    this.slider_events.writeValue( this.action.events )\n\n    console.log( udata )\n  }\n\n  ////\n\n  togglePause() {\n    context.character.currentAction.paused = ! context.character.currentAction.paused\n  }\n  \n  addEvent() {\n    const clip = context.character.currentAction.getClip()\n    const udata = context.character.anims.getUserData( clip )\n    udata.addEvent( context.character.currentAction.time )\n    \n    this.refresh() \n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core'\nimport { NouisliderModule, NouisliderComponent } from 'ng2-nouislider'\nimport { context, Events, MainService } from '../services/main.service'\nimport { SceneService } from '../services/scener.service'\nimport * as THREE from \"three\"\nimport * as $ from 'jquery'\nimport 'jquery-contextmenu'\n\n// import 'nouislider/distribute/nouislider.css'\nimport { TreeModel, NodeSelectedEvent, TreeComponent } from 'ng2-tree'\n\nconst VECTOR3_NaN = { x:NaN, y:NaN, z:NaN }\n\nconst boner = {\n  subjects : [], \n  keepWorldMatrix : false, \n  addCurrentSubjectsTo( parentToBe ) {\n    const add = subject =>\n      this.keepWorldMatrix ? parentToBe.attach( subject ) : parentToBe.add( subject )\n    this.subjects.forEach( subject => add( subject ) )\n    context.data.dirty = true\n    return this\n  },\n  openFor( ...subjects ) {\n    this.subjects.length = 0\n    this.subjects.push( ...subjects )\n    return this\n  },\n}\n\nfunction map_node( o:THREE.Object3D, depth=0 ) {\n  return {\n    id : o.uuid,\n    value : o.name || o.uuid,\n    children : o.children.map( child => map_node( child, ++depth ) )\n  }\n}\n\n@Component({ selector: 'app-explorer', templateUrl: './explorer.component.html', })\nexport class ExplorerComponent implements OnInit \n{\n  @ViewChild('tree__sceneNodes',{static:false}) elTree_sceneNodes\n\n  context = context\n\n  tree_sceneNodes:TreeModel = {\n    value: 'character.model',\n    settings: {\n      static : true,\n      isCollapsedOnInit : false,\n    },\n    loadChildren: function( callback ) {\n      callback( context.character.model.children.map( o => map_node( o ) ) )\n    },\n    onNodeSelected( e:NodeSelectedEvent ) {\n      const item = context.character.model.getObjectByProperty( \"uuid\", e.node.id as string )\n      context.selection.type = \"node\"\n      context.selection.last = item\n      context.selection.dirty = true\n      console.log( e ) \n    },\n  }\n\n  constructor( private main:MainService, private scener:SceneService ) { }\n\n  ngOnInit() \n  {\n    ///@ts-ignore\n    window.ex = this\n\n    // this.setup_keyboardEvents()\n    this.setup_contextMenus()\n\n    console.log( this.elTree_sceneNodes )\n  }\n\n  setup_contextMenus()\n  {\n    const animation = {duration: 0, show: 'show', hide: 'hide'}\n    const util = {\n      addChild( parent, name, userData={} )\n      {\n        let child = new THREE.Object3D()\n        child.name = name\n        child.userData = userData\n        parent.add( child )\n        context.data.dirty = true\n      },\n    }\n\n    /// @ts-ignore\n    $.contextMenu( {\n      selector: '#subpanel-nodes .list-item',\n      animation : animation,\n      build: function( el, event )\n      {\n        const uuid = el.attr(\"uuid\")\n        const item = context.character.model.getObjectByProperty( \"uuid\", uuid )\n        return {\n          callback: action => console.log( action, uuid ),\n          animation: {duration: undefined, show: 'show', hide: 'hide'},\n          items: {\n            addChild: {\n              name: \"Add empty child\", icon: \"add\",\n              callback: () => util.addChild( item, \"o\" )\n            },\n            addHolster: {\n              name: \"Add empty holster\", icon: \"add\",\n              callback: () => util.addChild( item, \"holster-\"+item.name, { isHolster : true } )\n            },\n            toggleHolster: { \n              name: item.userData.isHolster ? \"Untag as holster\" : \"Tag as holster\", icon: \"paste\",\n              callback: () => item.userData.isHolster = item.userData.isHolster ? undefined : true\n            },\n            delete: {\n              name: \"Delete\", icon: \"delete\",\n              callback: () => {\n                item.parent.remove( item )\n                context.data.dirty = true\n              }\n            },\n          }\n        }\n      }\n    } )\n\n    /// @ts-ignore\n    $.contextMenu( {\n      selector: '#subpanel-props .list-item',\n      animation : animation,\n      build: ( el, event ) =>\n      {\n        const uuid = el.attr(\"uuid\")\n        const targets:THREE.Object3D[] = [ context.character.model.getObjectByProperty(\"uuid\",uuid) ]\n\n        const makeItem = ( holster, i, keepWorldMatrix ) => {\n          return [ \"attachTo_\" + i, {\n            name: holster.name + ( keepWorldMatrix ? \" (keep global matrix)\" : '' ), \n            icon: \"link\",\n            callback: () => {\n              boner.keepWorldMatrix = keepWorldMatrix\n              boner.openFor( ...targets ).addCurrentSubjectsTo( holster )\n            }\n          } ]\n        }\n\n        return {\n          items: {\n            toggleHidden: { \n              name: targets.length && targets[0].visible ? \"Hide\" : \"Show\", icon: \"eye\",\n              visible: targets.length === 1,\n              callback: () => context.character.setHidden( targets[0], targets[0].visible )\n            },\n            setHiddenTrue: { \n              name: \"Hide\", icon: \"eye\", \n              visible: targets.length > 1,\n              callback: () => targets.forEach( o => context.character.setHidden( o, true ) )\n            },\n            setHiddenFalse: { \n              name: \"Show\", icon: \"eye\", \n              visible: targets.length > 1,\n              callback: () => targets.forEach( o => context.character.setHidden( o, false ) )\n            },\n            sep1: \"---------\",\n            attachLocal: {\n              name: \"Attach to\", icon: \"link\",\n              // items: context.character.findAllChildren( child => child.userData.isHolster )\n              //        .mapToObject( ( holster, i ) => makeItem( holster, i, false ) ),\n            },\n            attachGlobal: {\n              name: \"Attach to (keep global matrix)\", icon: \"link\",\n              // items: context.character.findAllChildren( child => child.userData.isHolster )\n              //        .mapToObject( ( holster, i ) => makeItem( holster, i, true ) ),\n            },\n            sep2: \"---------\",\n            addChild: {\n              name: \"Add hotpoint (empty child)\", icon: \"add\",\n              // visible: targets.length === 1,\n              callback: () => targets.forEach( target => util.addChild( target, \"hot-point\" ) )\n            },\n            clone: {\n              name: \"Clone\", icon: \"copy\",\n              callback: () => targets.forEach( o => context.character.props.duplicate( o ) )\n            },\n            delete: {\n              name: \"Delete\", icon: \"delete\",\n              callback: () => context.character.props.deleteAll( ...targets )\n            },\n          }\n        }\n      },\n    } )\n    \n    /// @ts-ignore\n    $.contextMenu( {\n      selector: '#subpanel-anims .list-item',\n      animation : animation,\n      build: function( el, event )\n      {\n        const uuid = el.attr(\"uuid\")\n        const targets:THREE.AnimationClip[] = [ context.character.anims.getByUuid( uuid ) ]\n        return {\n          items: {\n            clone: {\n              name: \"Clone\", icon: \"copy\",\n              callback: () => targets.forEach( clip => context.character.anims.duplicate( clip ) )\n            },\n            delete: {\n              name: \"Delete\", icon: \"delete\",\n              callback: () => context.character.anims.deleteAll( ...targets )\n            },\n          }\n        }\n      },\n    } )\n  }\n\n  //// GENERAL\n  \n  get object() { \n    const fake = { name : '-', position : VECTOR3_NaN, rotation : VECTOR3_NaN, scale : VECTOR3_NaN }\n    if ( ! context.selection.last ) return fake\n    if ( context.selection.type === \"anim\" ) return fake\n    if ( context.selection.type === \"mat\" ) return fake\n    return context.selection.last as THREE.Object3D\n  }\n\n  select( target, selectionType:\"node\"|\"prop\"|\"anim\" ) {\n    context.selection.all = [ target ]\n    context.selection.last = target\n    context.selection.type = selectionType\n    context.selection.dirty = true\n  }\n\n  //// BONES\n\n  get allBones():THREE.Bone[] { \n    return context.character.findAllChildren( o => o.type === \"Bone\" ) as THREE.Bone[]\n  }\n\n  //// MATERIALS\n\n  materialSliders = {\n    zeroToOne : { connect: [true,false], animate: false, behaviour: 'snap', },\n  }\n  get material():THREE.Material {\n    return context.selection.type !== 'mat' ? null : context.selection.last as THREE.Material\n  }\n\n  get allMaterials():THREE.Material[] {\n    let r = new Set() \n    /// @ts-ignore\n    context.character.model.traverse( o => !o.material ? null : r.add( o.material ) )\n    return Array.from( r ) as Array<THREE.Material>\n  }\n}","import { Component, OnInit } from '@angular/core';\nimport { context, MainService } from '../services/main.service';\n\n@Component({  selector: 'app-statusbar', templateUrl: './statusbar.component.html', })\nexport class StatusbarComponent\n{\n  readonly context = context\n  constructor( private main:MainService ) {\n  }\n  // ngOnInit() { }\n}","import { Component, OnInit } from '@angular/core'\nimport { ExportorService } from '../services/exportor.service'\nimport { context, Events, MainService } from '../services/main.service'\nimport * as $ from 'jquery'\n\n@Component({ selector: 'app-toolbar', templateUrl: './toolbar.component.html', })\nexport class ToolbarComponent implements OnInit \n{\n  context = context\n\n  buttons = []\n\n  constructor( private exportor:ExportorService ) {}\n\n  ngOnInit() {\n    this.buttons = [\n      { icon : \"people\", name : \"Characters\", viewMode : \"characters\" },\n      { icon : \"remove_red_eye\", name : \"Overview\", viewMode : \"overview\" },\n      { icon : \"account_tree\", name : \"Nodes\", viewMode : \"nodes\" }, \n      { icon : \"accessibility\", name : \"Bones\", viewMode : \"bones\" },\n      { icon : \"playlist_play\", name : \"Animations\", viewMode : \"animations\" },\n      { icon : \"format_paint\", name : \"Materials\", viewMode : \"materials\" },\n      { icon : \"camera\", name : \"Studio Rigs\", viewMode : \"studio\" },\n    ]\n\n    /// @ts-ignore\n    $.contextMenu( {\n      selector: 'button.options-menu',\n      trigger: \"left\",\n      animation: {duration: 100, show: 'fadeIn', hide: 'fadeOut'},\n      items: [\n        // { name : \"xxxx\", icon: \"eye\", \n        //   callback : () => null } , \n\n        { name : \"Download GLTF (text)\", icon: \"disk-a\", \n          callback : () => this.exportor.saveZip( false, \"download\" ) } , \n\n        { name : \"Download GLB (binary)\", icon: \"disk-b\", \n          callback : () => this.exportor.saveZip( true, \"download\" ) } , \n\n        { name : \"Save to browser's localStorage\", icon: \"disk-c\", \n          callback : () => this.exportor.saveZip( true, \"storage\" ) } , \n          \n        { name : \"Clear Local Storage\", icon : \"clear\", \n          callback : () => { localStorage.removeItem(\"zip\") } } , \n  \n        { name : \"Upload to Firebase (wip)\", icon: \"fire\", \n          callback : () => this.exportor.saveZip( true, \"firebase\" ) } , \n      ]\n    } )\n  }\n\n  selectViewMode( viewMode ) {\n    context.viewMode = context.viewMode !== viewMode ? viewMode : null\n  }\n}","import { Component, OnInit, ElementRef, HostListener } from '@angular/core'\nimport * as THREE from \"three\"\nimport * as $ from 'jquery'\nimport { LoadorService } from '../services/loador.service'\nimport { SceneService } from '../services/scener.service'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport { TransformControls } from 'three/examples/jsm/controls/TransformControls'\nimport { context, Events } from '../services/main.service'\nimport { ExportorService } from '../services/exportor.service';\n\n@Component({\n  selector: 'app-viewport',\n  templateUrl: './viewport.component.html',\n})\nexport class ViewportComponent implements OnInit \n{\n  context = context\n\n  renderer:THREE.WebGLRenderer\n  orbit:OrbitControls\n  transformer:TransformControls\n  camera:THREE.PerspectiveCamera\n\n  constructor( private viewportElem:ElementRef, \n               private scener:SceneService, \n               private loador:LoadorService,\n               private exportor:ExportorService ) {}\n\n  ngOnInit() \n  {\n    const canvasElem = document.getElementById( \"webgl-canvas\" ) as HTMLCanvasElement \n    this.renderer = new THREE.WebGLRenderer( { canvas: canvasElem, antialias: true } )\n    this.scener.initialize()\n\n    this.camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 0.1, 1000 )\n    this.camera.position.z = 3\n    this.camera.position.y = 2\n    this.camera.lookAt( new THREE.Vector3() )\n\n    this.orbit = new OrbitControls( this.camera, canvasElem )\n    this.orbit.target = new THREE.Vector3( 0, 1, 0 )\n    this.orbit.update()\n    this.orbit.mouseButtons.LEFT = 0\n    this.orbit.mouseButtons.RIGHT = 2\n    this.orbit.mouseButtons.MIDDLE = -1\n    this.orbit.enableKeys = false\n\n    this.transformer = new TransformControls( this.camera, canvasElem )\n    this.transformer.addEventListener( 'dragging-changed', event => this.orbit.enabled = ! event.value )\n    this.transformer.setSize( 0.5 )\n    this.transformer.setSpace( \"local\" )\n    this.scener.scene.add( this.transformer )\n\n    context.events.subscribe( Events.CHANGE_CHARACTER, character => {\n      this.scener.rig.position.x = \n      this.camera.position.x = \n      this.orbit.target.x = this.scener.platforms[ character.uuid ].position.x\n      this.orbit.update()\n      this.transformer.detach()\n    } )\n\n    context.events.subscribe( Events.CHANGE_DATA, data => {\n      if ( this.transformer.object && ! this.transformer.object.parent )\n        this.transformer.detach()\n    } )\n\n    context.events.subscribe( Events.CHANGE_SELECTION, selection => {\n      if ( selection.type === \"node\" || selection.type === \"prop\" )\n        this.transformer.attach( selection.last as THREE.Object3D )\n      else\n        this.transformer.detach()\n    } )\n    \n    $( \"button.transform.position\" ).click( e => this.transformer.setMode( \"translate\" ) )\n    $( \"button.transform.rotation\" ).click( e => this.transformer.setMode( \"rotate\" ) )\n    $( \"button.transform.scale\" ).click( e => this.transformer.setMode( \"scale\" ) )\n    $( \"button.transform.space\" ).click( e => this.transformer.setSpace( \n                                              this.transformer.space === \"world\" ? \"local\" : \"world\" ) )\n\n    this.onResize()\n    this.animate()\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize() {\n    let [ W, H ] = [ this.viewportElem.nativeElement.clientWidth, this.viewportElem.nativeElement.clientHeight ]\n    this.renderer.setSize( W, H )\n    this.camera.aspect = W / H;\n    this.camera.updateProjectionMatrix();\n  }\n\n  animate()\n  {\n    this.renderer.render( this.scener.scene, this.camera )\n    requestAnimationFrame( () => this.animate() )\n  }\n}","import { Injectable } from '@angular/core'\nimport { context, Events, Character } from '../services/main.service'\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\"\nimport * as THREE from \"three\"\nimport * as JSZip from \"jszip\"\n\nconst link = document.createElement( 'a' )\nlink.style.display = 'none'\n\nconst exporter = new GLTFExporter()\nconst zipper = new JSZip()\n\nexport enum ExportDestination { Download, LocalStorage, Firebase }\n\n@Injectable({ providedIn: 'root' })\nexport class ExportorService \n{\n  public get isBusy():boolean { return this._busy }\n  private _busy:boolean = false\n\n  constructor() { console.log( zipper ) }\n\n  async saveZip( binary:boolean, destination:\"download\"|\"storage\"|\"firebase\" )\n  {\n    this._busy = true\n    try {\n      const zip = new JSZip()\n      console.log( \"hajime\" )\n      const results = await Promise.all( context.characters.map( c => this.convertCharacter( c, binary ) ) )\n      console.log( \"results: \", results )\n      results.forEach( (r:any) => zip.file( r.filename, r.blob ) )\n      console.log( \"zip: \", zip )\n      const zip_blob = await new Promise<Blob>( resolve => \n            zip.generateAsync({type : \"blob\",compression: \"DEFLATE\"}).then( resolve ) )\n\n      switch( destination )\n      {\n        case \"download\": this.download( zip_blob, \"characters.zip\" ); break;\n        case \"storage\":  this.saveToLocalStorage( zip_blob ); break;\n        case \"firebase\": throw new Error(\"Not implemented...\"); break;\n      }\n      \n      console.log( \"done \", zip_blob )\n    } finally {\n      this._busy = false\n    }\n  }\n\n  saveToLocalStorage( blob:Blob ) {\n    let fileReader = new FileReader()\n    fileReader.onload = function (evt) {\n        /// @ts-ignore\n        var result = evt.target.result\n        try { localStorage.setItem(\"zip\", result as string ) }\n        catch (e) { console.log(\"Storage failed: \" + e) }\n    }\n    fileReader.readAsDataURL( blob )\n  }\n\n  download( blob:Blob, filename:string ) {\n    link.href = URL.createObjectURL( blob )\n    link.download = filename\n    link.click()\n  }\n\n  async convertCharacter( character:Character, binary:boolean )\n  {\n    let model = character.model\n    let anims = character.anims.toArray()\n    let userData = character.makeUserData()\n    return await this.exportToGLTF( model, anims, userData, binary )\n  }\n\n  async exportToGLTF( group:THREE.Object3D, animations:THREE.AnimationClip[], userData:object, binary:boolean ):Promise<Result>\n  {\n    console.log( group, animations, userData, binary )\n\n    // let exportee = new THREE.Scene()\n    // exportee.add( group )\n    // exportee.add( group.clone( true ) )\n    let exportee = group\n    exportee.userData = userData\n\n    return new Promise( ( resolve, reject ) => {\n      try {\n        exporter.parse( exportee, function ( data ) {\n        // exporter.parse( group, function ( data ) {\n          const name = group.name || \"LeScene\"\n          let binary = data instanceof ArrayBuffer\n          let output = binary ? data : JSON.stringify( data, null, 2 )\n          let filename = `${ name }.${ binary ? \"glb\" : \"gltf\" }`\n          let blob = binary ?\n                    new Blob( [ output as string ], { type: 'text/plain' } ) :\n                    new Blob( [ output as ArrayBuffer ], { type: 'application/octet-stream' } )\n          resolve( new Result( blob, filename ) )\n        }, { animations : animations, onlyVisible : false, binary : binary } )\n      } catch( e ) { reject( e ) }\n    } )\n  }\n}\n\nclass Result {\n  constructor( public readonly blob:Blob, public readonly filename:string ) {}\n}","import { Injectable } from '@angular/core'\n\nimport * as JSZip from \"jszip\"\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js'\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js'\nimport { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js'\nimport { ColladaLoader } from 'three/examples/jsm/loaders/ColladaLoader.js'\nimport { SVGLoader } from 'three/examples/jsm/loaders/SVGLoader.js'\n\nimport * as THREE from \"three\"\nimport * as $ from 'jquery'\nimport { Character } from './main.service';\n\n@Injectable({ providedIn: 'root' })\nexport class LoadorService\n{\n  public get isBusy():boolean { return this._busy }\n  private _busy:boolean = false\n  \n  private loadingManager = new THREE.LoadingManager()\n  private loaders = {\n    gltf: new GLTFLoader( this.loadingManager ),\n    fbx : new FBXLoader( this.loadingManager ),\n    obj : new OBJLoader( this.loadingManager ),\n    dae : new ColladaLoader( this.loadingManager ),\n    svg : new SVGLoader( this.loadingManager ),\n  }\n\n  fileResolvers = {\n    characters : async ( data:string, file_extension:string, file_name:string ):Promise<Character> => {\n      let [ group, animations ] = await new Promise( ( resolve, reject ) => {\n        switch ( file_extension ) {\n          case \"gltf\":\n          case \"glb\": this.loaders.gltf.load( data, gltf => resolve( [ gltf.scene, gltf.animations ] ) ); break;\n          case \"fbx\": this.loaders.fbx.load( data, (o:any) => resolve( [ o, o.animations || [] ] ) ); break;\n          default: reject( `Sorry, can't load files with extension \"${file_extension}\" here` )\n        }\n      } )\n  \n      console.log( group )\n      \n      let model = null\n  \n      if ( group.children.length === 0 )\n      {\n        console.warn( \"No 3D objects found...\" )\n      }\n      else\n      if ( group.children.length === 1)\n      {\n        // model = gltf.scene.children.shift()\n        model = group.children[ 0 ]\n      }\n      else\n      {\n        model = new THREE.Object3D()\n        model.scale.setScalar( .01 )\n        // gltf.scene.children.forEach( o => model.add( o ) )\n        while ( group.children.length )\n          model.add( group.children.shift() )\n      }\n  \n      return new Character( model , animations )\n    },\n    model : async ( data:string, file_extension:string, file_name:string ) => {\n      let model:THREE.Object3D = await new Promise( ( resolve, reject ) => {\n        switch ( file_extension ) {\n          case \"gltf\":\n          case \"glb\": this.loaders.gltf.load( data, o => resolve( o.scene.children[0] ) ); break;\n          case \"dae\": this.loaders.dae.load( data, o => resolve( o.scene.children[0] ) ); break;\n          case \"obj\": this.loaders.obj.load( data, o => resolve( o ) ); break;\n          case \"fbx\": this.loaders.fbx.load( data, o => resolve( o ) ); break;\n          default: reject( `Sorry, can't load files with extension \"${file_extension}\" here` )\n        }\n      } )\n      console.log( model )\n      model.name = model.name || file_name\n      return model\n    },\n    props : async ( data:string, file_extension:string, file_name:string ) => {\n      let props:THREE.Object3D[] = await new Promise( ( resolve, reject ) => {\n        switch ( file_extension ) {\n          case \"gltf\":\n          case \"glb\": this.loaders.gltf.load( data, o => resolve( o.scene.children ) ); break;\n          case \"obj\": this.loaders.obj.load( data, o => resolve( [o] ) ); break;\n          case \"dae\": this.loaders.dae.load( data, o => resolve( [o.scene] ) ); break;\n          case \"fbx\": this.loaders.fbx.load( data, o => resolve( [o] ) ); break;\n          case \"svg\": this.loaders.svg.load( data, o => {\n            let paths = o.paths\n            let group = new THREE.Group()\n            for ( var i = 0; i < paths.length; i ++ ) {\n              var path = paths[ i ]\n              var material = new THREE.MeshBasicMaterial( {\n                color: o.xml.fgColor,\n                side: THREE.DoubleSide,\n                depthWrite: false\n              } );\n              var shapes = path.toShapes( true, false )\n              for ( var j = 0; j < shapes.length; j ++ ) {\n                var shape = shapes[ j ]\n                var geometry = new THREE.ShapeBufferGeometry( shape )\n                var mesh = new THREE.Mesh( geometry, material )\n                group.add( mesh )\n              }\n            }\n            resolve( [ group ] )\n  \n          } ); break;\n          default: reject( `Sorry, can't load files with extension \"${file_extension}\" here` )\n        }\n      } )\n      props = [].concat( ...props )\n      \n      let todel = []\n      props.forEach( prop => {\n        prop.traverse( o => { \n          let del = false\n          del = del || o.type.indexOf(\"Light\") > -1\n          del = del || o.type.indexOf(\"Camera\") > -1\n          del = del || o.type === \"SkinnedMesh\"\n          del = del || o.type === \"Bone\"\n          if ( del ) todel.push( o )\n        } )\n      } )\n      todel.forEach( o => o.parent.remove( o ) )\n  \n      if ( props.length === 1 ) props[ 0 ].name = file_name\n      else props.forEach( prop => prop.name = prop.name || file_name )\n      return props\n    },\n    anims : async ( data:string, file_extension:string, file_name:string ) => {\n      let animations:THREE.AnimationClip[] = await new Promise( ( resolve, reject ) => {\n        switch ( file_extension ) {\n          case \"gltf\":\n          case \"glb\": this.loaders.gltf.load( data, gl => resolve( gl.animations ) ); break;\n          // case \"fbx\": this.loaders.fbx.load( data, group => console.warn( group ), null, e => console.error( e ) );\n          // case \"fbx\": this.loaders.fbx.load( data, group => resolve( group.animations ) ); break;\n          case \"fbx\": this.loaders.fbx.load( data, (group:any) => resolve( group.animations ) ); break;\n          default: reject( `Sorry, can't load files with extension \"${file_extension}\" here` )\n        }\n      } )\n      animations = animations.filter( a => a.duration > 0.0 )\n      if ( animations.length === 1 )\n        animations[ 0 ].name = file_name\n      animations.forEach( a => a.name = a.name.match(/[\\w-]+/g).join('-').toLowerCase() )\n      return animations\n    },\n  }\n\n  constructor() {\n    this.loadingManager.onStart = () => this._busy = true\n    this.loadingManager.onLoad  = () => this._busy = false\n    this.loadingManager.onError = () => this._busy = false\n    // loadingManager.onStart = () => $( \".loading\" ).show()\n    // loadingManager.onLoad  = () => $( \".loading\" ).hide()\n    // loadingManager.onError = () => $( \".loading\" ).hide()\n\n    /// @ts-ignore\n    window.loador = this\n  }\n\n  async loadFromUrl( url:string ) {\n    return await new Promise( ( resolve ) => this.loaders.gltf.load( url, resolve ) )\n  }\n\n  async loadZipFromLocalStorage( funcLoaded:Function ) {\n\n    function dataURLtoBlob(dataurl) {\n      var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n          bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n      while(n--){\n          u8arr[n] = bstr.charCodeAt(n);\n      }\n      return new Blob([u8arr], {type:mime});\n    }\n\n    let data = localStorage[\"zip\"]\n\n    let o = await JSZip.loadAsync( dataURLtoBlob( data ) )\n    console.log( o.files )\n\n    const funcResolver = this.fileResolvers.characters\n\n    let promises = []\n    for ( let zip_filename in o.files )\n    {\n      promises.push( new Promise( async(resolve) => {\n        let file = o.files[ zip_filename ]\n        let [ zfext, zfname ] = this.getFileNameAndExtension( file )\n        let blob = await file.async( \"blob\" )\n        let url = URL.createObjectURL( blob )\n        funcResolver( url, zfext, zfname ).then( resolve ).catch( this.onError ) \n      } ).catch( this.onError ) )\n    }\n\n    Promise.all( promises ).then( a => funcLoaded( ...[].concat( ...a ) ) ).catch( this.onError )\n\n    // let fileReader = new FileReader()\n    // fileReader.onload = function (evt) {\n    //     /// @ts-ignore\n    //     var result = evt.target.result\n    //     try { localStorage.setItem(\"zip\", result) }\n    //     catch (e) { console.log(\"Storage failed: \" + e) }\n    // }\n    // fileReader.\n  }\n\n  makeDropField( elementId, funcResolver:(data,file_extension,file_name)=>any, funcLoaded:Function ) {\n    const element = document.getElementById( elementId )\n    \n    element.ondragover = e => {\n      if ( e.ctrlKey || e.altKey || $(element).is(\":focus-within\") ) \n        return true\n      e.preventDefault()\n      element.classList.add(\"dragover\")\n      return false;\n    }\n\n    element.ondragleave = e => {\n      if ( e.ctrlKey || e.altKey ) \n        return true\n      e.preventDefault()\n      element.classList.remove(\"dragover\")\n      return false;\n    }\n\n    element.ondrop = async(e:DragEvent) => {\n      if ( e.ctrlKey || e.altKey || !e.dataTransfer.files.length ) \n        return true\n\n      e.preventDefault()\n      element.classList.remove(\"dragover\")\n\n      let promises = []\n      /// @ts-ignore\n      for ( let file of e.dataTransfer.files )\n      {\n        let [ fileext, filename ] = this.getFileNameAndExtension( file )\n        // console.log( file )\n          \n        if ( fileext === \"zip\" )\n        {\n          let ab:ArrayBuffer = await new Promise( resolve => {\n            let zip_reader = new FileReader()\n            zip_reader.onload = async(event:any) => resolve( event.target.result )\n            zip_reader.readAsArrayBuffer( file )\n          } )\n          let o = await JSZip.loadAsync( ab )\n          for ( let zip_filename in o.files )\n          {\n            promises.push( new Promise( async(resolve) => {\n              let file = o.files[ zip_filename ]\n              let [ zfext, zfname ] = this.getFileNameAndExtension( file )\n              let blob = await file.async( \"blob\" )\n              let url = URL.createObjectURL( blob )\n              funcResolver( url, zfext, zfname ).then( resolve ).catch( this.onError ) \n            } ).catch( this.onError ) )\n          }\n        } else {\n          promises.push( new Promise( async(resolve) => {\n            let reader = new FileReader()\n            reader.onload = (event:any) => {\n              funcResolver( event.target.result, fileext, filename ).then( resolve ).catch( this.onError )\n            }\n            reader.readAsDataURL( file )\n          } ).catch( this.onError ) )\n        }\n      }\n\n      Promise.all( promises ).then( a => funcLoaded( ...[].concat( ...a ) ) ).catch( this.onError )\n        \n      return false\n    }\n  }\n\n  getFileNameAndExtension( file:{name:string} ) {\n    return [\n      file.name.match( /\\.([0-9a-z]+)(?:[\\?#]|$)/i )[1].toLowerCase() ,\n      file.name.split( '.' )[ 0 ]\n    ]\n  }\n\n  onError( e ) { \n    console.error( e )\n    // try { this._busy = false }\n    // catch( e ) { console.error( e ) }\n  }\n}","import { Injectable } from '@angular/core'\nimport * as THREE from \"three\"\n\nexport enum Events { \n  CHANGE_DATA = \"change.data\",\n  CHANGE_SELECTION = \"change.selection\",\n  CHANGE_CHARACTER = \"change.character\",\n  ANIMATION_PLAY = \"animation.play\",\n  ADD_CHARACTER = \"add.character\",\n}\n\n@Injectable({ providedIn: 'root' })\nexport class MainService\n{\n  initialize() {\n    context.time.clock.start()\n    \n    this.onFrame()\n    \n    context.events.subscribe( Events.CHANGE_DATA, (...a) => console.info( \"CHANGE_DATA\", ...a ) )\n    context.events.subscribe( Events.CHANGE_SELECTION, (...a) => console.info( \"CHANGE_SELECTION\", ...a ) )\n    context.events.subscribe( Events.CHANGE_CHARACTER, (...a) => console.info( \"CHANGE_CHARACTER\", ...a ) )\n    context.events.subscribe( Events.ANIMATION_PLAY, (...a) => console.info( \"ANIMATION_PLAY\", ...a ) )\n  }\n  private onFrame() {\n    context.time.delta = context.time.clock.getDelta()\n  \n    if ( context.data.dirty ) {\n      context.events.dispatch( Events.CHANGE_DATA, context.data )\n      context.data.dirty = false\n    }\n    if ( context.selection.dirty ) {\n      context.events.dispatch( Events.CHANGE_SELECTION, context.selection )\n      context.selection.dirty = false\n    }\n    for ( let c of context.characters )\n      c.aniMixer.update( context.time.delta )\n    requestAnimationFrame( () => this.onFrame() )\n  }\n\n  /// /// /// /// \n\n  makeAndAddCharacter( model:THREE.Object3D, animations:THREE.AnimationClip[] ):Character {\n    return this.addCharacter( new Character( model , animations ) )\n  }\n  addCharacter( character:Character ):Character\n  {\n    character.model.position.setScalar( 0 )\n    character.model.traverse( o => o.visible = ! o.userData.hidden )\n    context.characters.push( character )\n    context.events.dispatch( Events.ADD_CHARACTER, character )\n    context.data.dirty = true\n    return character\n  }\n  \n  focusOnCharacter( character:Character )\n  {\n    context.viewMode = context.viewMode || \"overview\"\n    context.character = character\n    context.events.dispatch( Events.CHANGE_CHARACTER, character )\n    context.data.dirty = true\n  }\n}\n\nexport const context = \n{\n  time : {\n    clock : new THREE.Clock(),\n    delta : 0.0,\n  }, \n  \n  // viewMode : null, //  \"characters\" , // \n  get viewMode() { return localStorage[\"state.viewMode\"] },\n  set viewMode(value) { localStorage[\"state.viewMode\"] = value },\n  \n  character : <Character>null,\n\n  characters : new Array<Character>(),\n\n  data : new class CurrentData {\n    dirty:boolean = false\n  },\n  \n  selection : new class SelectionManager {\n    all:THREE.Object3D[]|THREE.AnimationClip[]\n    type:\"node\"|\"prop\"|\"anim\"|\"mat\"\n    last:THREE.Object3D|THREE.AnimationClip|THREE.Material\n    dirty:boolean = false\n  },\n\n  events : new class EventManager {\n    functions:{ [key:string]:Function[] } = {}\n    subscribe( key:Events, callback:Function ) \n    {\n      if ( !this.functions[ key ] )\n        this.functions[ key ] = []\n      this.functions[ key ].push( callback )\n    }\n    dispatch( key:Events, data?:any ) {\n      if ( this.functions[key] )\n        for ( let callback of this.functions[key] )\n          callback( data )\n    }\n  },\n\n  // state : new class {\n  //   data : any\n  //   constructor() { this.data = localStorage[ \"state\" ] || {} }\n  //   getValue( key:string ) { return this.data[ key ] }\n  //   setValue( key:string, value:any ) {\n  //     this.data[ key ] = value\n  //     localStorage[\"state\"] = JSON.stringify( this.data )\n  //   }\n  //   ////\n  //   get viewMode():string { return this.getValue(\"viewMode\") }\n  // }\n}\n\nexport class Character\n{\n  readonly props:PropsList\n  readonly anims:AnimationsList\n  readonly aniMixer:THREE.AnimationMixer\n  readonly uuid:string\n  \n  currentAction:THREE.AnimationAction = null\n\n  get name():string { return this.model.name || this.model.uuid }\n\n  constructor( public model:THREE.Object3D, animations:THREE.AnimationClip[] ) \n  {\n    this.props = this.findAllProps( model )\n    this.anims = new AnimationsList( animations )\n    this.aniMixer = new THREE.AnimationMixer( model )\n\n    this.uuid = model.uuid\n\n    const animationsUserData = model.userData.animationsUserData\n    if ( animationsUserData )\n      animations.forEach( (clip,i) => \n        this.anims.setUserData( clip, animationsUserData[ i ] ) )\n  }\n\n  makeUserData() {\n    return {\n      animationsUserData : \n        this.anims.toArray().map( clip => this.anims.getUserData( clip ) )\n    }\n  }\n\n  findAllProps( model:THREE.Object3D )\n  {\n    let results:PropsList = new PropsList()\n\n    function traverseChildren( o:THREE.Object3D ) {\n      let push = false \n      let hasChildren = o.children && !! o.children.filter(c=>c.type!==\"Bone\").length\n      push = push || ( ( o.type === \"Object3D\" || o.type === \"Group\" ) && hasChildren )\n      push = push || o.type === \"Mesh\"\n      push = push && ! o.userData.isHolster\n      push = push && o !== model\n  \n      if ( push )\n        results.add( o )\n      else \n      if ( o.children )\n        o.children.forEach( (child:THREE.Object3D) => traverseChildren( child ) )\n    }\n  \n    traverseChildren( model )\n\n    return results\n  }\n\n  /// /// ///\n  \n  findAllChildren( func:(child:THREE.Object3D)=>boolean ) {\n    let results:THREE.Object3D[] = []\n    this.model.traverse( child => func( child ) ? results.push( child ) : null )\n    return results\n  }\n\n  setHidden( object:THREE.Object3D, hidden:boolean )\n  {\n    hidden = hidden !== undefined ? hidden : ! object.visible\n    object.userData.hidden = hidden\n    object.visible = ! hidden\n    context.data.dirty = true\n  }\n  \n  playDefaultAnimation() {\n    let idle_anim = this.anims.find( a => a.name === \"idle\" ) ||\n                    this.anims.find( a => a.name.toLowerCase().indexOf( \"idle\" ) > -1 )\n    if ( idle_anim )\n      this.play( idle_anim )\n  }\n  \n  play( clip:THREE.AnimationClip ) {\n    this.aniMixer.stopAllAction()\n    this.aniMixer.uncacheClip( clip )\n    this.currentAction = this.aniMixer.clipAction( clip )\n    this.currentAction.setLoop( THREE.LoopRepeat, undefined )\n    this.currentAction.enabled = true\n    this.currentAction.weight = 1.0\n    this.currentAction.play()\n\n    if ( context.character === this )\n      context.events.dispatch( Events.ANIMATION_PLAY, this.currentAction )\n  }\n}\n\nexport class UniqueItemsList<T> extends Set<T>\n{\n  get length():number { return this.size }\n\n  getByUuid( uuid:string ) { \n    for ( let item of this )\n      if ( (<any>item).uuid === uuid )\n        return item\n    return null\n  }\n\n  map( func:Function ) { \n    return Array.from(this).map( (v,i,a)=>func(v,i,a) )\n  }\n\n  find( func:(o:T)=>boolean ) { \n    for ( let item of this )\n      if ( func( item ) )\n        return item\n    return null\n  }\n\n  addAll( ...items:T[] ):void {\n    items.forEach( item => this.add( item ) )\n  }\n\n  add( item:T) {\n    context.data.dirty = true\n    return super.add( item )\n  }\n\n  deleteAll( ...props:T[] ):void {\n    props.forEach( item => this.delete( item ) )\n  }\n\n  delete( item:T ):boolean {\n    context.data.dirty = true\n    return super.delete( item )\n  }\n\n  toArray():T[] { return Array.from( this ) }\n}\n\nclass AnimationUserData\n{\n  fadeTimes:[number,number]\n  eventTimes:number[]\n  // get events():{time:number}[] { return this.eventTimes.map( time => { return { time : time } } ) }\n  // events:{time:number}[]\n  constructor( clip:THREE.AnimationClip, data?:any ) {\n    this.fadeTimes = [ 0.0 , clip.duration ]\n    this.eventTimes = [ ]\n\n    if ( data ) {\n      this.fadeTimes[ 0 ] = data.fadeTimes[ 0 ]\n      this.fadeTimes[ 1 ] = data.fadeTimes[ 1 ]\n      this.eventTimes.push( ...data.eventTimes )\n    }\n\n    // this.events = [ ]\n  }\n  addEvent( time:number ) {\n    this.eventTimes.push( time )\n    this.eventTimes.sort()\n    // this.events.push( { time : time } )\n  }\n}\nexport class AnimationsList extends UniqueItemsList<THREE.AnimationClip>\n{\n  userDatas:{ [uuid:string] : AnimationUserData } = {}\n\n  getUserData( clip:THREE.AnimationClip ):AnimationUserData {\n    if ( this.userDatas[ clip.uuid ] === undefined ) {\n      this.userDatas[ clip.uuid ] = new AnimationUserData( clip )\n    }\n    return this.userDatas[ clip.uuid ]\n  }\n  setUserData( clip:THREE.AnimationClip, data:any ):void {\n    this.userDatas[ clip.uuid ] = new AnimationUserData( clip, data )\n  }\n\n  add( item:THREE.AnimationClip ) {\n    let i = 0, originalName = item.name\n    while ( this.find( a => a.name === item.name ) )\n      item.name = `${originalName}-${++i}`\n    return super.add( item )\n  }\n\n  duplicate( clip:THREE.AnimationClip ):THREE.AnimationClip {\n    /// @ts-ignore\n    let clone = clip.clone()\n    this.add( clone )\n    return clone\n  }\n}\n\nexport class PropsList extends UniqueItemsList<THREE.Object3D>\n{\n  duplicate( prop:THREE.Object3D ):THREE.Object3D {\n    let clone = prop.clone()\n    prop.parent.add( clone )\n    this.add( clone )\n    return clone\n  }\n\n  delete( prop:THREE.Object3D ):boolean {\n    prop.parent.remove( prop )\n    return super.delete( prop )\n  }\n}","import { Injectable } from '@angular/core'\nimport * as THREE from \"three\"\nimport { context, Events, Character } from '../services/main.service'\n\nconst DEFAULT_RIG = 2 /// 0 1 2\n\nconst textureLoader = new THREE.TextureLoader()\n\nexport const studioRigConfigurations = [\n  {\n    name : \"default\",\n    colors : {\n      background : 0x224477,\n      grid_a : 0x99CCFF,\n      grid_b : 0x4466CC,\n    } ,\n    lights : {\n      ambient : [\n        { color : 0xffffff, intensity : .60 } \n      ] ,\n      directional : [\n        { color : 0xffffff, intensity : .50, position : [-1, 0, 0 ] } ,\n        { color : 0xffffff, intensity : .75, position : [ 1, 1, 1 ] } ,\n        { color : 0xffffff, intensity : .50, position : [ 0, 0,-1 ] } ,\n      ] ,\n    } ,\n  } ,\n  {\n    name : \"in-gamish\",\n    colors : {\n      background : 0x3a7f41,\n      grid_a : 0xFFFF41,\n      grid_b : 0x5a9f61,\n    } ,\n    lights : {\n      ambient : [\n        { color : 0xffffff, intensity : 0.70 }\n      ] ,\n      directional : [\n        { color : 0xffffff, intensity : .40, position : [-1, 0,-1 ] } ,\n        { color : 0xffffff, intensity : .70, position : [ 1, 1, 1 ] } ,\n      ] ,\n    } ,\n  } ,\n  {\n    name : \"dark\",\n    colors : {\n      background : 0x1A1A1A,\n      grid_a : 0x404040,\n      grid_b : 0x303030,\n    } ,\n    lights : {\n      ambient : [\n        { color : 0xffffff, intensity : .50 } \n      ] ,\n      directional : [\n        { color : 0xffffff, intensity : .50, position : [-1, 0, 0 ] } ,\n        { color : 0xffffff, intensity : .75, position : [ 1, 1, 1 ] } ,\n        { color : 0xffffff, intensity : .50, position : [ 0, 0,-1 ] } ,\n      ] ,\n    } ,\n  } ,\n]\n\n@Injectable({ providedIn: 'root' })\nexport class SceneService\n{\n  scene = new THREE.Scene()\n  rig = new StudioRig()\n  rigConfigurations = studioRigConfigurations\n\n  platforms:{[character_uuid:string]:THREE.Group} = {}\n\n  isLoading:boolean = true //// directly use loader.busy\n\n  initialize() \n  {\n    this.scene.add( this.rig )\n    this.rig.initialize( studioRigConfigurations[ DEFAULT_RIG ], this.scene )\n\n    context.events.subscribe( Events.ADD_CHARACTER, (character:Character) => {\n      let platform = this.platforms[ character.uuid ] = new THREE.Group()\n      platform.add( character.model )\n      platform.position.x = context.characters.length - 1\n      this.scene.add( platform )\n    } )\n\n    this.isLoading = false\n  }\n\n  setupRig( config ) {\n    this.rig.initialize( config, this.scene )\n  }\n}\n\nclass StudioRig extends THREE.Group\n{\n  configuration\n  grid:THREE.GridHelper\n  envMap:THREE.Texture\n\n  initialize( configuration, scene:THREE.Scene ) {\n    this.configuration = configuration\n\n    while( this.children.length > 0 )\n      this.remove( this.children[ 0 ] )\n\n    scene.background = new THREE.Color( configuration.colors.background )\n\n    configuration.lights.ambient.forEach( ( c, i ) => {\n      let light = new THREE.AmbientLight( c.color, c.intensity )\n      light.name = \"Light (ambient) \" + i\n      this.add( light )\n    } )\n\n    configuration.lights.directional.forEach( ( c, i ) => {\n      let light = new THREE.DirectionalLight( c.color, c.intensity )\n      light.position.set( c.position[0], c.position[1], c.position[2] ).setLength(20)\n      light.lookAt( new THREE.Vector3( 0,0,0 ) )\n      light.name = \"Light (directional) \" + i\n      this.add( light )\n    } )\n\n    this.grid = new THREE.GridHelper( 20, 20, \n                    configuration.colors.grid_a, \n                    configuration.colors.grid_b )\n    this.add( this.grid )\n\n    this.envMap = textureLoader.load( \"assets/images/metal-5.png\" )\n    this.envMap.mapping = THREE.SphericalReflectionMapping\n    this.envMap.encoding = THREE.sRGBEncoding\n\n    // this.envMap = textureLoader.load( \"assets/shitroom.jpg\" )\n    // this.envMap.mapping = THREE.EquirectangularReflectionMapping;\n    // this.envMap.magFilter = THREE.LinearFilter;\n    // this.envMap.minFilter = THREE.LinearMipmapLinearFilter;\n    // this.envMap.encoding = THREE.sRGBEncoding\n  }\n}","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import 'hammerjs';\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}